<!DOCTYPE html>
<html lang="en">
<link rel="stylesheet" type="text/css" href="https://keflavich.github.io/blog/theme/css/style.css" />
<link rel="icon" type="image/gif" href="https://keflavich.github.io/blog/theme/favicon8.ico">
<head>
    <base href="https://keflavich.github.io/blog">
        <title>Adam Ginsburg's blog - googlepost</title>
        <meta charset="utf-8" />
        <link href="https://keflavich.github.io/blog/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="Adam Ginsburg's blog Full Atom Feed" />
<!-- Using MathJax, with the delimiters $ -->
<!-- Conflict with pygments for the .mo and .mi -->
<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
    "HTML-CSS": {
    styles: {
    ".MathJax .mo, .MathJax .mi": {color: "inherit !important"}},
    'div.typeset': { 'text-align': 'left'}
    },
    tex2jax: {inlineMath: [['$','$'], ['\\(','\\)']],processEscapes: true}
    });
    TeX: {
        extensions: ["AMSmath.js", "AMSsymbols.js"]
    }
    MathJax.Hub.Register.StartupHook("HTML-CSS Jax Ready",function () {
    var VARIANT = MathJax.OutputJax["HTML-CSS"].FONTDATA.VARIANT;
    VARIANT["normal"].fonts.unshift("MathJax_SansSerif");
    VARIANT["bold"].fonts.unshift("MathJax_SansSerif-bold");
    VARIANT["italic"].fonts.unshift("MathJax_SansSerif-italic");
    VARIANT["-tex-mathit"].fonts.unshift("MathJax_SansSerif-italic");
    });
    MathJax.Hub.Register.StartupHook("SVG Jax Ready",function () {
    var VARIANT = MathJax.OutputJax.SVG.FONTDATA.VARIANT;
    VARIANT["normal"].fonts.unshift("MathJax_SansSerif");
    VARIANT["bold"].fonts.unshift("MathJax_SansSerif-bold");
    VARIANT["italic"].fonts.unshift("MathJax_SansSerif-italic");
    VARIANT["-tex-mathit"].fonts.unshift("MathJax_SansSerif-italic");
    });
</script>

<script type="text/javascript"
src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS_HTML">
</script>
        
</head>

<body id="base" class="home">


    <header id="banner" class="body" >
        <div id="header" style='background-image: url("https://keflavich.github.io/blog/images/GC_4096sq_bolo.png"); background-position:left; min-heigt: 200px;  background-repeat: no-repeat; max-width: 80%;'>
            <h1 style="color: #C4C4C4;"><a class="header" href="https://keflavich.github.io/blog">Adam Ginsburg's blog <strong></strong></a></h1>

            <nav id="menu"><ul id="menulist">
                <li><a href="https://www.adamgginsburg.com">Homepage</a></li>
                <li><a href="/index.html">Blog Index</a></li>
                <li><a href="/category/bgps.html">BGPS Blog</a></li>
                <li><a href="/category/publications.html">Publications</a></li>
                <li><a href="/archives.html">Archives</a></li>
                <li><a href="/tags.html">Tags</a></li>
            </ul></nav><!-- /#menu -->
        </div>
    </header><!-- /#banner -->

  <div id="sidebar">
    <ul>
      <li>
        <h3 id='recent_header'>Recent Posts</h3>
        <ul>
              <li class="post">
                  2012/12/26
                  <br>
                  <a href="https://keflavich.github.io/blog/catalog-vs-image-shift-a-possible-solution-to-the-atlasgal-issue.html">Catalog vs Image shift? A possible solution to the ATLASGAL issue</a>
              </li>
              <li class="post">
                  2012/12/22
                  <br>
                  <a href="https://keflavich.github.io/blog/idea-multispectral-eigenimage-decomposition.html">Idea: Multispectral Eigenimage decomposition...</a>
              </li>
              <li class="post">
                  2012/12/15
                  <br>
                  <a href="https://keflavich.github.io/blog/pointing-cross-correlation-yet-again.html">Pointing & Cross-Correlation yet again</a>
              </li>
              <li class="post">
                  2012/11/21
                  <br>
                  <a href="https://keflavich.github.io/blog/the-peculiar-balmer-decrement-of-sn-2009ip-constraints-on-circumstellar-geometry.html">The Peculiar Balmer Decrement of SN 2009ip: Constraints on Circumstellar Geometry</a>
              </li>
              <li class="post">
                  2012/11/21
                  <br>
                  <a href="https://keflavich.github.io/blog/galactic-h2co-densitometry-i-pilot-survey-of-ultracompact-hii-regions-and-methodology.html">Galactic H2CO Densitometry I: Pilot survey of Ultracompact HII regions and methodology</a>
              </li>
        </ul>
      </li>
    
    </ul>
  </div><!-- end #sidebar -->

  <div id="content">
<section id="content">

<ul id="post-list">
    <li><article class="hentry">
        <header> 
            <h2 class="entry-title">
                <a href="https://keflavich.github.io/blog/failed-fields.html" rel="bookmark" title="Permalink to Failed fields">
                    Failed fields</a>
            </h2> 
        </header>
        <footer class="post-info">
            <abbr class="published" title="2008-09-13T21:00:00-06:00"> 2008/09/13 </abbr>
            <!--<address class="vcard author"><a class="url fn" href="https://keflavich.github.io/blog/author/adam-adamgginsburggmailcom.html">Adam (adam.g.ginsburg@gmail.com)</a></address>-->
        </footer><!-- /.post-info -->
        <div class="entry-content"> <ul class="simple">
<li>l030 - comments were in the form ;; instead of # in the infile</li>
<li>l055 - no such folder</li>
<li>l026 - no infile existed; made one</li>
<li>l028 - /scratch/sliced_polychrome/l028/060605_o[**]_raw_ds5.nc
are bad</li>
<li>l031 - Downsampling seems to have failed for most of this directory.
Need to downsample all files and create a new infile</li>
<li>l035 - /scratch/sliced_polychrome/l035/060605_o[**]_raw_ds5.nc
are bad - that's all 060605 observations of l035.</li>
<li>l036 - /scratch/sliced_polychrome/l036/070702_o25_raw_ds5.nc,
/scratch/sliced_polychrome/l036/070705_o21_raw_ds5.nc are bad</li>
<li>l038 - /scratch/sliced_polychrome/l038/060627_ob3_raw_ds5.nc,
/scratch/sliced_polychrome/l038/060627_ob[3567]_raw.nc are bad -
had to re-preprocess</li>
<li>l054 - /scratch/sliced_polychrome/l054/070724_o25_raw_ds5.nc is
bad</li>
<li>l057 - /scratch/sliced_polychrome/l057/070907_o16_raw_ds5.nc is
bad</li>
</ul>
<p>Except for l057, there is no guarantee that the whole observation is
bad, BUT the code failed on ncdf_open, so it possible the observation
turned bad during downsampling/preprocessing.
fixed: 30, 26, 55, 35, 28, 31, 38, 54, 57
so far all observations on 060605 are bad.</p>
 </div>
        <!-- /.entry-content   not article.summary--> 
    </article></li>
    <hr width=100%>
    <li><article class="hentry">
        <header> 
            <h2 class="entry-title">
                <a href="https://keflavich.github.io/blog/disagreement-over-definition-of-lb-coordinates.html" rel="bookmark" title="Permalink to Disagreement over definition of l,b coordinates">
                    Disagreement over definition of l,b coordinates</a>
            </h2> 
        </header>
        <footer class="post-info">
            <abbr class="published" title="2008-09-10T22:43:00-06:00"> 2008/09/10 </abbr>
            <!--<address class="vcard author"><a class="url fn" href="https://keflavich.github.io/blog/author/adam-adamgginsburggmailcom.html">Adam (adam.g.ginsburg@gmail.com)</a></address>-->
        </footer><!-- /.post-info -->
        <div class="entry-content"> <p>DS9 does something intuitive: cd0_0 and cd1_1 multiplied by the x,y
pixel difference gets you the new l,b coordinate. I think this is very
likely to be correct on the galactic plane. IDL does something
different. I don't know why different, or really how - it's buried
somewhere in wcsxy2sph - but it's definitely different. Which is right?</p>
 </div>
        <!-- /.entry-content   not article.summary--> 
    </article></li>
    <hr width=100%>
    <li><article class="hentry">
        <header> 
            <h2 class="entry-title">
                <a href="https://keflavich.github.io/blog/broken-rotation.html" rel="bookmark" title="Permalink to Broken rotation">
                    Broken rotation</a>
            </h2> 
        </header>
        <footer class="post-info">
            <abbr class="published" title="2008-09-09T01:34:00-06:00"> 2008/09/09 </abbr>
            <!--<address class="vcard author"><a class="url fn" href="https://keflavich.github.io/blog/author/adam-adamgginsburggmailcom.html">Adam (adam.g.ginsburg@gmail.com)</a></address>-->
        </footer><!-- /.post-info -->
        <div class="entry-content"> <p>I have to echo James in saying how remarkable it is than anything I ever
did worked at all! I'm growing more and more certain that I've been
double-correcting rotation for the past 2 months, and my maps don't look
all that bad!
.. image:: <a class="reference external" href="http://4.bp.blogspot.com/_lsgW26mWZnU/SMW4oOPcLaI/AAAAAAAADXw/1ARG8iyVXDQ/s400/070717_o15_rotations.png">http://4.bp.blogspot.com/_lsgW26mWZnU/SMW4oOPcLaI/AAAAAAAADXw/1ARG8iyVXDQ/s400/070717_o15_rotations.png</a>
Image caption:
Top left - both PA and rotang
Top right - neither
Bottom left - rotang only
Bottom right - PA only
I'm running the same sort of comparison on all of the GC and L=24 data.
Check out /scratch/adam_work/ROT_TEST for the results. I'll be
updating this when I've completed that analysis.
Update 6:35 PM: !&#64;#$, etc. New problem child:
.. image:: <a class="reference external" href="http://1.bp.blogspot.com/_lsgW26mWZnU/SMXFUjLjRGI/AAAAAAAADX4/aynvuycRzGM/s400/060603_o16_rotations.png">http://1.bp.blogspot.com/_lsgW26mWZnU/SMXFUjLjRGI/AAAAAAAADX4/aynvuycRzGM/s400/060603_o16_rotations.png</a>
Image caption (same as above, luckily):
Top left - both PA and rotang
Top right - neither
Bottom left - rotang only
Bottom right - PA only
So, can anyone tell me which one of THESE is right? Because I can't. Top
left is 'correct' except that it's not.
Update 7:10 PM: I compared adding/subtracting PA and RA, and I can say
this: subtracting PA never works. Adding/subtracting RA works variably.
I think I'm done testing parameter space. I haven't had very good luck
doing parameter space tests in the past; it usually is more beneficial
to take a step back and try to think through the problem.
Update 7:30 PM: Fixed. Much as this looks like a short-lived, easily
solved problem, it was one of the most subtle and insidious errors I've
made. I got extremely lucky that plotting PA and ROTANGLE happened to
spark off warning sirens in my mind about the positioning of the
variable names. I wouldn't normally look for that.</p>
 </div>
        <!-- /.entry-content   not article.summary--> 
    </article></li>
    <hr width=100%>
    <li><article class="hentry">
        <header> 
            <h2 class="entry-title">
                <a href="https://keflavich.github.io/blog/fresh-blood.html" rel="bookmark" title="Permalink to fresh blood">
                    fresh blood</a>
            </h2> 
        </header>
        <footer class="post-info">
            <abbr class="published" title="2008-09-08T23:34:00-06:00"> 2008/09/08 </abbr>
            <!--<address class="vcard author"><a class="url fn" href="https://keflavich.github.io/blog/author/adam-adamgginsburggmailcom.html">Adam (adam.g.ginsburg@gmail.com)</a></address>-->
        </footer><!-- /.post-info -->
        <div class="entry-content"> <p>hate to put it this way, but probably true - bolocam will eat us all.
Cara and Marc have both agreed to help out with alignment work. This is
good news! Next post will be bad news, just to compensate.</p>
 </div>
        <!-- /.entry-content   not article.summary--> 
    </article></li>
    <hr width=100%>
    <li><article class="hentry">
        <header> 
            <h2 class="entry-title">
                <a href="https://keflavich.github.io/blog/alignment.html" rel="bookmark" title="Permalink to Alignment">
                    Alignment</a>
            </h2> 
        </header>
        <footer class="post-info">
            <abbr class="published" title="2008-09-06T18:32:00-06:00"> 2008/09/06 </abbr>
            <!--<address class="vcard author"><a class="url fn" href="https://keflavich.github.io/blog/author/adam-adamgginsburggmailcom.html">Adam (adam.g.ginsburg@gmail.com)</a></address>-->
        </footer><!-- /.post-info -->
        <div class="entry-content"> <p>a few items...</p>
<ol class="arabic simple">
<li>I requested that pyraf be installed on milkyway. I don't really want
to deal with xgterm/xterm issues when remotely logging in.</li>
<li>I'm writing up a 'script' on
<a class="reference external" href="http://sites.google.com/site/bolocam/pipeline/alignment">http://sites.google.com/site/bolocam/pipeline/alignment</a>. I believe
IRAF is capable of interacting with DS9 even if images are not opened
from IRAF, which should allow you to circumvent the 9-frame limit.</li>
<li>Most of the individual image fields are done now. There may be a few
stragglers, but those are ones that either didn't have an
_infile.txt or only had single observations. What do we do about
those fields? They'll be undersampled!</li>
</ol>
 </div>
        <!-- /.entry-content   not article.summary--> 
    </article></li>
    <hr width=100%>
    <li><article class="hentry">
        <header> 
            <h2 class="entry-title">
                <a href="https://keflavich.github.io/blog/new-code.html" rel="bookmark" title="Permalink to New code">
                    New code</a>
            </h2> 
        </header>
        <footer class="post-info">
            <abbr class="published" title="2008-09-05T21:00:00-06:00"> 2008/09/05 </abbr>
            <!--<address class="vcard author"><a class="url fn" href="https://keflavich.github.io/blog/author/adam-adamgginsburggmailcom.html">Adam (adam.g.ginsburg@gmail.com)</a></address>-->
        </footer><!-- /.post-info -->
        <div class="entry-content"> <p>Done for the day after this (observing tonight)
two new procedures:</p>
<pre class="literal-block">
alignment_offsets_to_ncdf.pro
calcoeffs_to_ncdf.pro
</pre>
<p>they're really easy, very nearly one-liners. Once they've been used
once, you can just use ncdf_varput_scale
Modified keyword parameters in do_the_pointing: offsets will always be
applied unless the keyword 'no_offsets' is passed into the code (or the
top-level wrapper). Since offsets default to zero, this should be OK.</p>
 </div>
        <!-- /.entry-content   not article.summary--> 
    </article></li>
    <hr width=100%>
    <li><article class="hentry">
        <header> 
            <h2 class="entry-title">
                <a href="https://keflavich.github.io/blog/non-greedy-vim.html" rel="bookmark" title="Permalink to Non-greedy vim">
                    Non-greedy vim</a>
            </h2> 
        </header>
        <footer class="post-info">
            <abbr class="published" title="2008-09-05T01:12:00-06:00"> 2008/09/05 </abbr>
            <!--<address class="vcard author"><a class="url fn" href="https://keflavich.github.io/blog/author/adam.html">Adam</a></address>-->
        </footer><!-- /.post-info -->
        <div class="entry-content"> <p>To make .* in VIM be non-greedy (i.e. match just <tt class="docutils literal">&lt;a href=x&gt;</tt> out of <tt class="docutils literal">&quot;&lt;a href=x&gt; &lt;/a&gt;&quot;</tt>), use:</p>
<pre class="literal-block">
.\{-}
</pre>
 </div>
        <!-- /.entry-content   not article.summary--> 
    </article></li>
    <hr width=100%>
    <li><article class="hentry">
        <header> 
            <h2 class="entry-title">
                <a href="https://keflavich.github.io/blog/pointing-model-success.html" rel="bookmark" title="Permalink to Pointing model success">
                    Pointing model success</a>
            </h2> 
        </header>
        <footer class="post-info">
            <abbr class="published" title="2008-09-02T15:11:00-06:00"> 2008/09/02 </abbr>
            <!--<address class="vcard author"><a class="url fn" href="https://keflavich.github.io/blog/author/adam-adamgginsburggmailcom.html">Adam (adam.g.ginsburg@gmail.com)</a></address>-->
        </footer><!-- /.post-info -->
        <div class="entry-content"> <p>/scratch/adam_work/plots/models_myptgmdl_0707.ps
Look at the left plots in #1 and #4, and ignore the red lines. The RMS
is 4.87 in alt, 3.51 in az, using all pointing observations in 0707
(i.e. not splitting it into part1/part2 or refining heavily). Total is
6.003&quot;, not bad.
I'm calling it quits on pointing refinement for the moment; I'm
satisfied using Meredith's pointing models to get science maps
co-aligned, then we'll use my model on the PPSes to get the pointing to
maximum precision.
Also, in the galactic center, the mapping works happily now. No more
silly problems with that.
It's time for a real Next Step. I think that means mapping nearly
everything. Well, here goes!</p>
 </div>
        <!-- /.entry-content   not article.summary--> 
    </article></li>
    <hr width=100%>
    <li><article class="hentry">
        <header> 
            <h2 class="entry-title">
                <a href="https://keflavich.github.io/blog/prepare_map-issues.html" rel="bookmark" title="Permalink to prepare_map issues">
                    prepare_map issues</a>
            </h2> 
        </header>
        <footer class="post-info">
            <abbr class="published" title="2008-09-01T16:31:00-06:00"> 2008/09/01 </abbr>
            <!--<address class="vcard author"><a class="url fn" href="https://keflavich.github.io/blog/author/adam-adamgginsburggmailcom.html">Adam (adam.g.ginsburg@gmail.com)</a></address>-->
        </footer><!-- /.post-info -->
        <div class="entry-content"> <p>The problem: There is a bulk offset that can range from small to ~22'
(largest observed so far) in the combined maps that is not present in
the individual maps.
Observations: I THINK the offset between ra/dec and l/b is most
pronounced when the map boundaries are most different.
We have been putting CRPIX in the middle of the map (i.e. number of x/y
elements divided by 2), which is not the same position as the median
ra/dec or l/b. I figured this might be a problem, but there's not really
a way around it - if you just set CRPIX to be 0,0, it doesn't change
anything. xy2ad and ad2xy produce self-consistent results, but that
doesn't mean anything either.
I think the problem is that AD2XY is largely ignorant of CRPIX: it
calculates x/y offsets from the CRVAL assuming that the CRVAL is at
CRPIX.... but I don't know why that should be wrong. Ideas? More to come
if I figure anything out.
Update: from doing the individual maps in l/b vs ra/dec, I don't think
the offset is between l/b and ra/dec.... something less fundamental.
Update 2: still no clues after reading ad2xy and trying to plow through
parts of wcssph2xy. gotta be rect_pix_tstream, but I think it's
right....
Update 3: I think I have figured out the problem, currently testing. My
idea has to do with the fact that all x,y positions in
rect_pix_tstream are positive, but ad2xy is not constrained to return
positive values. In principle, the two-iteration ad2xy should take care
of this, but in the case where the middle of the map in pixels is not
the middle of the map in the WCS coordinate system, it is still possible
to get negative pixel mappings out of the 2nd iteration. I'm still
confused about whether this is really possible - makes my head fuzzy -
but I tried implementing a solution where I simply shift the crpix
rather than recalculating with AD2XY.
Update 4: Based on L111, my test in update 3 fixed the problem. Scuba
contours are correct, and reasonably consistent across the field - still
need to do the more complete test, e.g. Cygnus
Update 5: Cygnus tests still await completion, but a very close
inspection of single L111 maps reveals a ~2 pixel difference that could
go a long way to explaining my high-RMS pointing calculations. Still
doesn't explain the sine curve, but anything helps...
Update 6: My correction definitely fixed the problem, EXCEPT there's
still an ambiguity at the .5 pixel level. Specifically, is AD2XY
treating the pixel center as .5,.5 or 0,0? Ditto IDL. I believe (from my
simulated data) that this ambiguity is still causing a problem.
Update 7: New correction fixed problem to better than 1&quot; (checked by
making a simulated map with 1&quot; pixels) - probably 'perfect' now. Read
prepare_map.pro for details. The issue was a difference in pixel
centers.</p>
 </div>
        <!-- /.entry-content   not article.summary--> 
    </article></li>
    <hr width=100%>
    <li><article class="hentry">
        <header> 
            <h2 class="entry-title">
                <a href="https://keflavich.github.io/blog/confirmed-error-in-lb-mapping.html" rel="bookmark" title="Permalink to Confirmed error in L/B mapping">
                    Confirmed error in L/B mapping</a>
            </h2> 
        </header>
        <footer class="post-info">
            <abbr class="published" title="2008-08-28T01:32:00-06:00"> 2008/08/28 </abbr>
            <!--<address class="vcard author"><a class="url fn" href="https://keflavich.github.io/blog/author/adam-adamgginsburggmailcom.html">Adam (adam.g.ginsburg@gmail.com)</a></address>-->
        </footer><!-- /.post-info -->
        <div class="entry-content"> <p>I've used my simulated data and confirmed that there is in fact an error
in the l/b mapping, but I haven't tracked it down yet. Stay tuned.
Update: Something is not self-consistent in prepare_map. I've tried a
variety of different things without success yet.</p>
 </div>
        <!-- /.entry-content   not article.summary--> 
    </article></li>
    <hr width=100%>
</ul><!-- /#posts-list -->
<p class="paginator">
            <a href="https://keflavich.github.io/blog/tag/googlepost30.html">&laquo;</a>
    Page 31 / 36
        <a href="https://keflavich.github.io/blog/tag/googlepost32.html">&raquo;</a>
</p>
</section><!-- /#content -->
  </div>

    <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-37306139-1']);
    _gaq.push(['_trackPageview']);
    (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();

    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-37306139-1');
    ga('send', 'pageview');
</script>
<script type="text/javascript">
  var disqus_shortname = 'adamginsburgsblog';
  (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
   })();
</script>
</body>
</html>
