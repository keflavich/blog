<!DOCTYPE html>
<html lang="en">
<link rel="stylesheet" type="text/css" href="https://keflavich.github.io/blog/theme/css/style.css" />
<link rel="icon" type="image/gif" href="https://keflavich.github.io/blog/theme/favicon8.ico">
<head>
    <base href="https://keflavich.github.io/blog">
        <title>Adam Ginsburg's blog - python</title>
        <meta charset="utf-8" />
        <link href="https://keflavich.github.io/blog/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="Adam Ginsburg's blog Full Atom Feed" />
<!-- Using MathJax, with the delimiters $ -->
<!-- Conflict with pygments for the .mo and .mi -->
<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
    "HTML-CSS": {
    styles: {
    ".MathJax .mo, .MathJax .mi": {color: "inherit !important"}},
    'div.typeset': { 'text-align': 'left'}
    },
    tex2jax: {inlineMath: [['$','$'], ['\\(','\\)']],processEscapes: true}
    });
    TeX: {
        extensions: ["AMSmath.js", "AMSsymbols.js"]
    }
    MathJax.Hub.Register.StartupHook("HTML-CSS Jax Ready",function () {
    var VARIANT = MathJax.OutputJax["HTML-CSS"].FONTDATA.VARIANT;
    VARIANT["normal"].fonts.unshift("MathJax_SansSerif");
    VARIANT["bold"].fonts.unshift("MathJax_SansSerif-bold");
    VARIANT["italic"].fonts.unshift("MathJax_SansSerif-italic");
    VARIANT["-tex-mathit"].fonts.unshift("MathJax_SansSerif-italic");
    });
    MathJax.Hub.Register.StartupHook("SVG Jax Ready",function () {
    var VARIANT = MathJax.OutputJax.SVG.FONTDATA.VARIANT;
    VARIANT["normal"].fonts.unshift("MathJax_SansSerif");
    VARIANT["bold"].fonts.unshift("MathJax_SansSerif-bold");
    VARIANT["italic"].fonts.unshift("MathJax_SansSerif-italic");
    VARIANT["-tex-mathit"].fonts.unshift("MathJax_SansSerif-italic");
    });
</script>

<script type="text/javascript"
src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS_HTML">
</script>
        
</head>

<body id="base" class="home">


    <header id="banner" class="body" >
        <div id="header" style='background-image: url("https://keflavich.github.io/blog/images/GC_4096sq_bolo.png"); background-position:left; min-heigt: 200px;  background-repeat: no-repeat; max-width: 80%;'>
            <h1 style="color: #C4C4C4;"><a class="header" href="https://keflavich.github.io/blog">Adam Ginsburg's blog <strong></strong></a></h1>

            <nav id="menu"><ul id="menulist">
                <li><a href="https://www.adamgginsburg.com">Homepage</a></li>
                <li><a href="/index.html">Blog Index</a></li>
                <li><a href="/category/bgps.html">BGPS Blog</a></li>
                <li><a href="/category/publications.html">Publications</a></li>
                <li><a href="/archives.html">Archives</a></li>
                <li><a href="/tags.html">Tags</a></li>
            </ul></nav><!-- /#menu -->
        </div>
    </header><!-- /#banner -->

  <div id="sidebar">
    <ul>
      <li>
        <h3 id='recent_header'>Recent Posts</h3>
        <ul>
              <li class="post">
                  2015/10/09
                  <br>
                  <a href="https://keflavich.github.io/blog/sensitivity-plots-using-astroquery-nrao-tool.html">Sensitivity Plots using astroquery NRAO tool</a>
              </li>
              <li class="post">
                  2015/05/07
                  <br>
                  <a href="https://keflavich.github.io/blog/my-python-ipython-vim-debugging-workflow.html">My python + ipython + vim debugging workflow</a>
              </li>
              <li class="post">
                  2014/02/19
                  <br>
                  <a href="https://keflavich.github.io/blog/python-stack-on-mavericks.html">Python stack on Mavericks</a>
              </li>
              <li class="post">
                  2013/12/13
                  <br>
                  <a href="https://keflavich.github.io/blog/there-is-a-gap-in-the-dust-around-sgr-b2.html">There is a "gap" in the dust around Sgr B2</a>
              </li>
              <li class="post">
                  2013/09/24
                  <br>
                  <a href="https://keflavich.github.io/blog/position-velocity-diagrams.html">Position-Velocity Diagrams</a>
              </li>
        </ul>
      </li>
    
    </ul>
  </div><!-- end #sidebar -->

  <div id="content">
<section id="content">

<ul id="post-list">
    <li><article class="hentry">
        <header> 
            <h2 class="entry-title">
                <a href="https://keflavich.github.io/blog/port-vs-fink.html" rel="bookmark" title="Permalink to Port vs Fink">
                    Port vs Fink</a>
            </h2> 
        </header>
        <footer class="post-info">
            <abbr class="published" title="2012-09-20T20:02:00-06:00"> 2012/09/20 </abbr>
            <!--<address class="vcard author"><a class="url fn" href="https://keflavich.github.io/blog/author/adam-keflavichgmailcom.html">Adam (keflavich@gmail.com)</a></address>-->
        </footer><!-- /.post-info -->
        <div class="entry-content"> <p>Port failed to install:
<tt class="docutils literal"><span class="pre">adam-macbook</span> ~$ sudo port install <span class="pre">py25-matplotlib---&gt;</span>&nbsp; Building <span class="pre">py25-hashlib</span> with target <span class="pre">build---&gt;</span>&nbsp; Staging <span class="pre">py25-hashlib</span> into <span class="pre">destroot---&gt;</span>&nbsp; Installing <span class="pre">py25-hashlib</span> <span class="pre">2.5.2_0---&gt;</span>&nbsp; Activating <span class="pre">py25-hashlib</span> <span class="pre">2.5.2_0---&gt;</span>&nbsp; Cleaning <span class="pre">py25-hashlib---&gt;</span>&nbsp; Fetching <span class="pre">py25-zlib---&gt;</span>&nbsp; Verifying checksum(s) for <span class="pre">py25-zlib---&gt;</span>&nbsp; Extracting <span class="pre">py25-zlib---&gt;</span>&nbsp; Configuring <span class="pre">py25-zlib---&gt;</span>&nbsp; Building <span class="pre">py25-zlib</span> with target <span class="pre">build---&gt;</span>&nbsp; Staging <span class="pre">py25-zlib</span> into <span class="pre">destroot---&gt;</span>&nbsp; Installing <span class="pre">py25-zlib</span> <span class="pre">2.5.2_0---&gt;</span>&nbsp; Activating <span class="pre">py25-zlib</span> <span class="pre">2.5.2_0---&gt;</span>&nbsp; Cleaning <span class="pre">py25-zlib---&gt;</span>&nbsp; Fetching <span class="pre">py25-setuptools---&gt;</span>&nbsp; Attempting to fetch <span class="pre">setuptools-0.6c8.tar.gz</span> from <span class="pre">http://cheeseshop.python.org/packages/source/s/setuptools/---&gt;</span>&nbsp; Verifying checksum(s) for <span class="pre">py25-setuptools---&gt;</span>&nbsp; Extracting <span class="pre">py25-setuptools---&gt;</span>&nbsp; Applying patches to <span class="pre">py25-setuptools---&gt;</span>&nbsp; Configuring <span class="pre">py25-setuptools---&gt;</span>&nbsp; Building <span class="pre">py25-setuptools</span> with target <span class="pre">build---&gt;</span>&nbsp; Staging <span class="pre">py25-setuptools</span> into <span class="pre">destroot---&gt;</span>&nbsp; Installing <span class="pre">py25-setuptools</span> <span class="pre">0.6c8_2---&gt;</span>&nbsp; Activating <span class="pre">py25-setuptools</span> <span class="pre">0.6c8_2---&gt;</span>&nbsp; Cleaning <span class="pre">py25-setuptools---&gt;</span>&nbsp; Fetching <span class="pre">py25-tz---&gt;</span>&nbsp; Attempting to fetch <span class="pre">pytz-2007k.tar.bz2</span> from <span class="pre">http://cheeseshop.python.org/packages/source/p/pytz/---&gt;</span>&nbsp; Verifying checksum(s) for <span class="pre">py25-tz---&gt;</span>&nbsp; Extracting <span class="pre">py25-tz---&gt;</span>&nbsp; Configuring <span class="pre">py25-tz---&gt;</span>&nbsp; Building <span class="pre">py25-tz</span> with target <span class="pre">build---&gt;</span>&nbsp; Staging <span class="pre">py25-tz</span> into <span class="pre">destroot---&gt;</span>&nbsp; Installing <span class="pre">py25-tz</span> <span class="pre">2007k_0---&gt;</span>&nbsp; Activating <span class="pre">py25-tz</span> <span class="pre">2007k_0---&gt;</span>&nbsp; Cleaning <span class="pre">py25-tz---&gt;</span>&nbsp; Fetching <span class="pre">py25-dateutil---&gt;</span>&nbsp; Attempting to fetch <span class="pre">python-dateutil-1.4.1.tar.gz</span> from <span class="pre">http://labix.org/download/python-dateutil---&gt;</span>&nbsp; Verifying checksum(s) for <span class="pre">py25-dateutil---&gt;</span>&nbsp; Extracting <span class="pre">py25-dateutil---&gt;</span>&nbsp; Configuring <span class="pre">py25-dateutil---&gt;</span>&nbsp; Building <span class="pre">py25-dateutil</span> with target <span class="pre">build---&gt;</span>&nbsp; Staging <span class="pre">py25-dateutil</span> into <span class="pre">destroot---&gt;</span>&nbsp; Installing <span class="pre">py25-dateutil</span> <span class="pre">1.4.1_0---&gt;</span>&nbsp; Activating <span class="pre">py25-dateutil</span> <span class="pre">1.4.1_0---&gt;</span>&nbsp; Cleaning <span class="pre">py25-dateutil---&gt;</span>&nbsp; Fetching <span class="pre">fftw-3---&gt;</span>&nbsp; Attempting to fetch <span class="pre">fftw-3.1.3.tar.gz</span> from <span class="pre">http://www.fftw.org/---&gt;</span>&nbsp; Verifying checksum(s) for <span class="pre">fftw-3---&gt;</span>&nbsp; Extracting <span class="pre">fftw-3---&gt;</span>&nbsp; Configuring <span class="pre">fftw-3---&gt;</span>&nbsp; Building <span class="pre">fftw-3</span> with target <span class="pre">all---&gt;</span>&nbsp; Staging <span class="pre">fftw-3</span> into <span class="pre">destroot---&gt;</span>&nbsp; Installing <span class="pre">fftw-3</span> <span class="pre">3.1.3_0---&gt;</span>&nbsp; Activating <span class="pre">fftw-3</span> <span class="pre">3.1.3_0---&gt;</span>&nbsp; Cleaning <span class="pre">fftw-3---&gt;</span>&nbsp; Fetching <span class="pre">py25-nose---&gt;</span>&nbsp; Attempting to fetch <span class="pre">nose-0.10.4.tar.gz</span> from <span class="pre">http://somethingaboutorange.com/mrl/projects/nose/---&gt;</span>&nbsp; Verifying checksum(s) for <span class="pre">py25-nose---&gt;</span>&nbsp; Extracting <span class="pre">py25-nose---&gt;</span>&nbsp; Configuring <span class="pre">py25-nose---&gt;</span>&nbsp; Building <span class="pre">py25-nose</span> with target <span class="pre">build---&gt;</span>&nbsp; Staging <span class="pre">py25-nose</span> into <span class="pre">destroot---&gt;</span>&nbsp; Installing <span class="pre">py25-nose</span> <span class="pre">0.10.4_0---&gt;</span>&nbsp; Activating <span class="pre">py25-nose</span> <span class="pre">0.10.4_0---&gt;</span>&nbsp; Cleaning <span class="pre">py25-nose---&gt;</span>&nbsp; Fetching <span class="pre">py25-numpy---&gt;</span>&nbsp; Attempting to fetch <span class="pre">numpy-1.2.0.tar.gz</span> from <span class="pre">http://downloads.sourceforge.net/numpy---&gt;</span>&nbsp; Verifying checksum(s) for <span class="pre">py25-numpy---&gt;</span>&nbsp; Extracting <span class="pre">py25-numpy---&gt;</span>&nbsp; Applying patches to <span class="pre">py25-numpy---&gt;</span>&nbsp; Configuring <span class="pre">py25-numpy---&gt;</span>&nbsp; Building <span class="pre">py25-numpy</span> with target buildError: Target org.macports.build returned: shell command &quot; cd <span class="pre">&quot;/opt/local/var/macports/build/_opt_local_var_macports_sources_rsync.macports.org_release_ports_python_py25-numpy/work/numpy-1.2.0&quot;</span> &amp;&amp; /opt/local/bin/python2.5 setup.py build &quot; returned error 1Command output:&nbsp;&nbsp;&nbsp;&nbsp; setup_package()&nbsp; File &quot;setup.py&quot;, line 89, in setup_package&nbsp;&nbsp;&nbsp; configuration=configuration )&nbsp; File <span class="pre">&quot;/opt/local/var/macports/build/_opt_local_var_macports_sources_rsync.macports.org_release_ports_python_py25-numpy/work/numpy-1.2.0/numpy/distutils/core.py&quot;,</span> line 184, in setup&nbsp;&nbsp;&nbsp; return <span class="pre">old_setup(**new_attr)</span>&nbsp; File &quot;/opt/local/Library/Frameworks/Python.framework/Versions/2.5/lib/python2.5/distutils/core.py&quot;, line 151, in setup&nbsp;&nbsp;&nbsp; dist.run_commands()&nbsp; File &quot;/opt/local/Library/Frameworks/Python.framework/Versions/2.5/lib/python2.5/distutils/dist.py&quot;, line 974, in run_commands&nbsp;&nbsp;&nbsp; self.run_command(cmd)&nbsp; File &quot;/opt/local/Library/Frameworks/Python.framework/Versions/2.5/lib/python2.5/distutils/dist.py&quot;, line 994, in run_command&nbsp;&nbsp;&nbsp; cmd_obj.run()&nbsp; File <span class="pre">&quot;/opt/local/var/macports/build/_opt_local_var_macports_sources_rsync.macports.org_release_ports_python_py25-numpy/work/numpy-1.2.0/numpy/distutils/command/build.py&quot;,</span> line 37, in run&nbsp;&nbsp;&nbsp; old_build.run(self)&nbsp; File &quot;/opt/local/Library/Frameworks/Python.framework/Versions/2.5/lib/python2.5/distutils/command/build.py&quot;, line 112, in run&nbsp;&nbsp;&nbsp; self.run_command(cmd_name)&nbsp; File &quot;/opt/local/Library/Frameworks/Python.framework/Versions/2.5/lib/python2.5/distutils/cmd.py&quot;, line 333, in run_command&nbsp;&nbsp;&nbsp; self.distribution.run_command(command)&nbsp; File &quot;/opt/local/Library/Frameworks/Python.framework/Versions/2.5/lib/python2.5/distutils/dist.py&quot;, line 994, in run_command&nbsp;&nbsp;&nbsp; cmd_obj.run()&nbsp; File <span class="pre">&quot;/opt/local/var/macports/build/_opt_local_var_macports_sources_rsync.macports.org_release_ports_python_py25-numpy/work/numpy-1.2.0/numpy/distutils/command/build_src.py&quot;,</span> line 130, in run&nbsp;&nbsp;&nbsp; self.build_sources()&nbsp; File <span class="pre">&quot;/opt/local/var/macports/build/_opt_local_var_macports_sources_rsync.macports.org_release_ports_python_py25-numpy/work/numpy-1.2.0/numpy/distutils/command/build_src.py&quot;,</span> line 147, in build_sources&nbsp;&nbsp;&nbsp; self.build_extension_sources(ext)&nbsp; File <span class="pre">&quot;/opt/local/var/macports/build/_opt_local_var_macports_sources_rsync.macports.org_release_ports_python_py25-numpy/work/numpy-1.2.0/numpy/distutils/command/build_src.py&quot;,</span> line 250, in build_extension_sources&nbsp;&nbsp;&nbsp; sources = self.generate_sources(sources, ext)&nbsp; File <span class="pre">&quot;/opt/local/var/macports/build/_opt_local_var_macports_sources_rsync.macports.org_release_ports_python_py25-numpy/work/numpy-1.2.0/numpy/distutils/command/build_src.py&quot;,</span> line 307, in generate_sources&nbsp;&nbsp;&nbsp; source = func(extension, build_dir)&nbsp; File &quot;numpy/core/setup.py&quot;, line 87, in generate_config_h&nbsp;&nbsp;&nbsp; raise <span class="pre">SystemError,&quot;Failed</span> to test configuration. &quot;\SystemError: Failed to test configuration. See previous error messages for more information.Error: The following dependencies failed to build: <span class="pre">py25-numpy</span> <span class="pre">py25-tkinter</span> tcl tkError: Status 1 encountered during processing.</tt>
I don't want to deal with it so I'm just using Fink.</p>
 </div>
        <!-- /.entry-content   not article.summary--> 
    </article></li>
    <hr width=100%>
    <li><article class="hentry">
        <header> 
            <h2 class="entry-title">
                <a href="https://keflavich.github.io/blog/psds-cross-correlation.html" rel="bookmark" title="Permalink to PSDs, cross-correlation...">
                    PSDs, cross-correlation...</a>
            </h2> 
        </header>
        <footer class="post-info">
            <abbr class="published" title="2012-09-20T20:02:00-06:00"> 2012/09/20 </abbr>
            <!--<address class="vcard author"><a class="url fn" href="https://keflavich.github.io/blog/author/adam-keflavichgmailcom.html">Adam (keflavich@gmail.com)</a></address>-->
        </footer><!-- /.post-info -->
        <div class="entry-content"> <p>scipy is capable of doing fft-base cross-correlation, convolution, etc.,
but it requires the stsci package, which is not generally easy to
install. For that matter, scipy can be a pain some of the time. So agpy
now includes a 2D cross-correlation code and a power spectrum / power
spectral density code. These are pure-numpy codes that should be easy to
use without any other bothersome dependencies.
EDIT: I have them check for scipy (which can cause crashes if you have a
bad scipy install, e.g. 32 bit executables on a 64 bit system) because
scipy uses FFTW and numpy appears not to. Also, this code &amp; related
stuff has been <a class="reference external" href="http://www.astrobetter.com/fourier-transforms-of-images-in-python/">discussed on astrobetyter</a>
<a class="reference external" href="http://code.google.com/p/agpy/">agpy</a>
<a class="reference external" href="http://code.google.com/p/agpy/source/browse/trunk/agpy/correlate2d.py">correlate2d</a>
<a class="reference external" href="http://code.google.com/p/agpy/source/browse/trunk/agpy/psds.py">psds</a></p>
 </div>
        <!-- /.entry-content   not article.summary--> 
    </article></li>
    <hr width=100%>
    <li><article class="hentry">
        <header> 
            <h2 class="entry-title">
                <a href="https://keflavich.github.io/blog/pyspeckit-an-astronomical-spectroscopic-toolkit.html" rel="bookmark" title="Permalink to pyspeckit: an astronomical spectroscopic toolkit">
                    pyspeckit: an astronomical spectroscopic toolkit</a>
            </h2> 
        </header>
        <footer class="post-info">
            <abbr class="published" title="2012-09-20T20:02:00-06:00"> 2012/09/20 </abbr>
            <!--<address class="vcard author"><a class="url fn" href="https://keflavich.github.io/blog/author/adam-keflavichgmailcom.html">Adam (keflavich@gmail.com)</a></address>-->
        </footer><!-- /.post-info -->
        <div class="entry-content"> <p>Jordan and I have been working on our python-based spectroscopic
analysis tool for a while now:
<a class="reference external" href="http://pyspeckit.bitbucket.org/">pyspeckit</a> is a pretty awesome, now functional but incomplete (and
incompletely documented) tool.</p>
 </div>
        <!-- /.entry-content   not article.summary--> 
    </article></li>
    <hr width=100%>
    <li><article class="hentry">
        <header> 
            <h2 class="entry-title">
                <a href="https://keflavich.github.io/blog/python-64-bit-on-mac-os-x-106-snow-leopard.html" rel="bookmark" title="Permalink to Python 64-bit on Mac OS X 10.6 Snow Leopard">
                    Python 64-bit on Mac OS X 10.6 Snow Leopard</a>
            </h2> 
        </header>
        <footer class="post-info">
            <abbr class="published" title="2012-09-20T20:02:00-06:00"> 2012/09/20 </abbr>
            <!--<address class="vcard author"><a class="url fn" href="https://keflavich.github.io/blog/author/adam-keflavichgmailcom.html">Adam (keflavich@gmail.com)</a></address>-->
        </footer><!-- /.post-info -->
        <div class="entry-content"> <p>After <a class="reference external" href="http://buffalothedestroyer.blogspot.com/2010/02/installing-snow-leopard.html">yesterday's disastrous attempt</a> to install various python
packages, I started from scratch. First, I got rid of all of my python
frameworks (backed up but removed from the path). Then, I compiled
python 2.7 from scratch:</p>
<p>I got some help from
<a class="reference external" href="http://blog.mahmoudimus.com/2009/12/python-2-6-4-and-twisted-9-on-os-x-10-6-snow-leopard/">http://blog.mahmoudimus.com/2009/12/python-2-6-4-and-twisted-9-on-os-x-10-6-snow-leopard/</a>
<tt class="docutils literal">./configure <span class="pre">--enable-framework</span> <span class="pre">--enable-universalsdk=/Developer/SDKs/MacOSX10.6.sdk</span> MACOSX_DEPLOYMENT_TARGET=10.6 <span class="pre">--with-universal-archs=intel</span> <span class="pre">-with-readline-dir=/usr/localmake</span> <span class="pre">-j</span> 17make <span class="pre">-j</span> 17 test</tt>
<tt class="docutils literal">make</tt> results:</p>
<pre class="literal-block">
Python build finished, but the necessary bits to build these modules were
not found:
    _bsddb
    dl
    gdbm
    imageop
    linuxaudiodev
    ossaudiodev
    spwd
    sunaudiodev
To find the necessary bits, look in setup.py in detect_modules() for the
module's name.
</pre>
<p>I'm not concerned about these - I don't use any of them and I assume I
need to install some other packages to get them to work.
During make test, I had two failures that resulted in &quot;python crash&quot;
pop-up boxes:</p>
<pre class="literal-block">
test_subprocess.
this bit of output is from a test of stdout in a different process ....
this bit of output is from a test of stdout in a different process ...
test_sunaudiodev
</pre>
<p>Then, I got some malloc errors:</p>
<pre class="literal-block">
test_ioTesting large file ops skipped on darwin.It requires 2147483648
bytes and a long time.Use 'regrtest.py -u largefile test_io' to run
it.Testing large file ops skipped on darwin.It requires 2147483648 bytes
and a long time.Use 'regrtest.py -u largefile test_io' to run
it.python.exe(22914,0x7fff70d3ebe0) malloc: ***
mmap(size=9223372036854775808) failed (error code=12)*** error: can't
allocate region*** set a breakpoint in malloc_error_break to
debugpython.exe(22914,0x7fff70d3ebe0) malloc: ***
mmap(size=9223372036854775808) failed (error code=12)*** error: can't
allocate region*** set a breakpoint in malloc_error_break to
debugpython.exe(22914,0x7fff70d3ebe0) malloc: ***
mmap(size=9223372036854775808) failed (error code=12)*** error: can't
allocate region*** set a breakpoint in malloc_error_break to
debugtest_ioctl
</pre>
 </div>
        <!-- /.entry-content   not article.summary--> 
    </article></li>
    <hr width=100%>
    <li><article class="hentry">
        <header> 
            <h2 class="entry-title">
                <a href="https://keflavich.github.io/blog/python-magic-advanced-numpy-indexing.html" rel="bookmark" title="Permalink to Python magic / advanced numpy indexing">
                    Python magic / advanced numpy indexing</a>
            </h2> 
        </header>
        <footer class="post-info">
            <abbr class="published" title="2012-09-20T20:02:00-06:00"> 2012/09/20 </abbr>
            <!--<address class="vcard author"><a class="url fn" href="https://keflavich.github.io/blog/author/adam-keflavichgmailcom.html">Adam (keflavich@gmail.com)</a></address>-->
        </footer><!-- /.post-info -->
        <div class="entry-content"> <p>Yeah, indexing python arrays should really be easy.
<a class="reference external" href="http://mentat.za.net/numpy/numpy_advanced_slides/">Stefan van der Walt's page</a>
<tt class="docutils literal">In [85]: bi = <span class="pre">(f.bolo_indices[np.newaxis,:]</span> + <span class="pre">zeros([7751,1])).astype('int')In</span> [86]: whc = <span class="pre">(whscan[:,np.newaxis]</span> + <span class="pre">zeros([1,107])).astype('int')In</span> [87]: array2d[whc,bi] = temp2d</tt></p>
 </div>
        <!-- /.entry-content   not article.summary--> 
    </article></li>
    <hr width=100%>
    <li><article class="hentry">
        <header> 
            <h2 class="entry-title">
                <a href="https://keflavich.github.io/blog/python-one-line-arrays.html" rel="bookmark" title="Permalink to Python: one-line arrays">
                    Python: one-line arrays</a>
            </h2> 
        </header>
        <footer class="post-info">
            <abbr class="published" title="2012-09-20T20:02:00-06:00"> 2012/09/20 </abbr>
            <!--<address class="vcard author"><a class="url fn" href="https://keflavich.github.io/blog/author/adam-keflavichgmailcom.html">Adam (keflavich@gmail.com)</a></address>-->
        </footer><!-- /.post-info -->
        <div class="entry-content"> <p>Ahhh, refreshing:
``      whscan = asarray([arange(scanlen)+i for i in scans_info[:,0]]).ravel()``
Not like IDL, which takes at least 4 lines b/c of the variable
declaration. There's probably a better way to do that too.</p>
 </div>
        <!-- /.entry-content   not article.summary--> 
    </article></li>
    <hr width=100%>
    <li><article class="hentry">
        <header> 
            <h2 class="entry-title">
                <a href="https://keflavich.github.io/blog/python-setting-matplotlib-defaults.html" rel="bookmark" title="Permalink to Python: setting matplotlib defaults">
                    Python: setting matplotlib defaults</a>
            </h2> 
        </header>
        <footer class="post-info">
            <abbr class="published" title="2012-09-20T20:02:00-06:00"> 2012/09/20 </abbr>
            <!--<address class="vcard author"><a class="url fn" href="https://keflavich.github.io/blog/author/adam-keflavichgmailcom.html">Adam (keflavich@gmail.com)</a></address>-->
        </footer><!-- /.post-info -->
        <div class="entry-content"> <p>Setting matplotlib defaults is a lot more difficult than it should be.
<tt class="docutils literal"><span class="pre">matplotlib.defaultParams['image.origin']='lower'matplotlib.defaultParams['image.interpolation']='nearest'</span></tt></p>
 </div>
        <!-- /.entry-content   not article.summary--> 
    </article></li>
    <hr width=100%>
    <li><article class="hentry">
        <header> 
            <h2 class="entry-title">
                <a href="https://keflavich.github.io/blog/rebuilding-python-from-scratch-again.html" rel="bookmark" title="Permalink to Rebuilding python from scratch again">
                    Rebuilding python from scratch again</a>
            </h2> 
        </header>
        <footer class="post-info">
            <abbr class="published" title="2012-09-20T20:02:00-06:00"> 2012/09/20 </abbr>
            <!--<address class="vcard author"><a class="url fn" href="https://keflavich.github.io/blog/author/adam-keflavichgmailcom.html">Adam (keflavich@gmail.com)</a></address>-->
        </footer><!-- /.post-info -->
        <div class="entry-content"> <p>I got scipy working a week or two ago, but doing so killed matplotib's
tkagg. So, I switched to the MacOSX backend, which worked ok until I
realized that the interactive (connect) features of macosx failed
miserably. This led me to try to get matplotlib working.... which broke
with those awful &quot;symbol not found&quot; errors in ft2font.so and _path.so,
which I've determined all have to do with linking to the wrong library
files.
The most worrisome part of this process was discovering that a full Time
Machine recovery of /usr and /Library/Frameworks and /Library/Python did
*not* restore python - it stayed dead with IDENTICAL errors. So there
are probably additional layers of hidden links.
The process below is based on <a class="reference external" href="http://blog.hyperjeff.net/?p=160">hyperjeff's blog post</a> but differs
substantially based on <a class="reference external" href="http://casa.colorado.edu/~skillman/research_and_codes/files/649710e82f85745eb65a90535f0f3098-5.html">Sam Skillman's recommendations</a> and the very
big issue I ran into that my /usr/local files appeared to be corrupted.
After this install, my path no longer includes /usr/local/bin and /sw
has been moved to /_sw... hopefully one of these days I'll be ballsy
enough to delete it.</p>
<ol class="arabic simple">
<li>Install python 2.6.4<ol class="arabic">
<li>Needed a clean terminal with no flags set at all. Don't know why -
all I had set were a bunch of -arch x86_64 flags.
<tt class="docutils literal">export <span class="pre">LD_LIBRARY_PATH=&quot;/usr/local/lib:/usr/X11/lib&quot;./configure</span> <span class="pre">--enable-framework=/Library/Frameworks</span> MACOSX_DEPLOYMENT_TARGET=10.6 make <span class="pre">-j</span> 17sudo make install</tt></li>
<li>Reset PYTHONPATH to blank</li>
<li>`` alias clearflags='export CFLAGS=&quot;&quot;; export CCFLAGS=&quot;&quot;; export CXXFLAGS=&quot;&quot;; export LDFLAGS=&quot;&quot;; export FFLAGS=&quot;&quot;;'``
to make sure</li>
</ol>
</li>
<li>Install FFTW
<tt class="docutils literal">cd ~/tmpcurl <span class="pre">-O</span> <span class="pre">http://www.fftw.org/fftw-3.2.2.tar.gztar</span> xf <span class="pre">fftw-3.2.2.tar.gzcd</span> <span class="pre">fftw-3.2.2clearflags./configure</span> <span class="pre">CC=&quot;gcc</span> <span class="pre">-arch</span> x86_64&quot; <span class="pre">CXX=&quot;g++</span> <span class="pre">-arch</span> x86_64&quot; <span class="pre">CPP=&quot;gcc</span> <span class="pre">-E&quot;</span> <span class="pre">CXXCPP=&quot;g++</span> <span class="pre">-E&quot;make</span> <span class="pre">-j</span> 17sudo make install</tt></li>
<li>Install UMFPACK
<tt class="docutils literal">cd ~/tmpcurl <span class="pre">-O</span> <span class="pre">http://www.cise.ufl.edu/research/sparse/umfpack/current/UMFPACK.tar.gzcurl</span> <span class="pre">-O</span> <span class="pre">http://www.cise.ufl.edu/research/sparse/UFconfig/current/UFconfig.tar.gzcurl</span> <span class="pre">-O</span> <span class="pre">http://www.cise.ufl.edu/research/sparse/amd/current/AMD.tar.gztar</span> xf AMD.tar.gztar xf UFconfig.tar.gztar xf UMFPACK.tar.gzsed <span class="pre">-ibck</span> 's/F77 = f77/F77 = gfortran/' UFconfig/UFconfig.mk sed <span class="pre">-ibck</span> '299,303s/# //' UFconfig/UFconfig.mkcp UFconfig/UFconfig.h AMD/Include/cp UFconfig/UFconfig.h UMFPACK/Include/cd UMFPACKmake <span class="pre">-j</span> 17make hbmake clean</tt></li>
<li>Install numpy<ol class="arabic">
<li>Set environment variables
<tt class="docutils literal">export MACOSX_DEPLOYMENT_TARGET=10.6export <span class="pre">CFLAGS=&quot;-arch</span> x86_64&quot;export <span class="pre">FFLAGS=&quot;-m64&quot;export</span> <span class="pre">LDFLAGS=&quot;-Wall</span> <span class="pre">-undefined</span> dynamic_lookup <span class="pre">-bundle</span> <span class="pre">-arch</span> x86_64&quot;export <span class="pre">PYTHONPATH=&quot;/Library/Frameworks/Python.framework/Versions/2.6/lib/python2.6/site-packages/&quot;echo</span> &quot;[amd]library_dirs = /Users/adam/tmp/AMD/Libinclude_dirs = /Users/adam/tmp/AMD/Includeamd_libs = amd[umfpack]library_dirs = /Users/adam/tmp/UMFPACK/Libinclude_dirs = /Users/adam/tmp/UMFPACK/Includeumfpack_libs = umfpack&quot; &gt; site.cfg</tt></li>
<li>Setup &amp; Install
<tt class="docutils literal">python setup.py build <span class="pre">--fcompiler=gnu95sudo</span> python setup.py install</tt></li>
<li>Test: python -c &quot;import numpy&quot;</li>
</ol>
</li>
<li>Install scipy. The important thing is to use g++-4.2 because g++-4.5
doesn't accept the -arch flag. Also, get rid of /sw if it's on your
computer at all.
<tt class="docutils literal">sudo mv /System/Library/Frameworks/Python.framework/Versions/2.6/Extras/lib/python/numpy /System/Library/Frameworks/Python.framework/Versions/2.6/Extras/lib/python/numpyXcd <span class="pre">~/repos/scipy-0.7.1python</span> setup.py cleanrm <span class="pre">-rf</span> <span class="pre">buildclearflagsFFLAGS=&quot;-m64&quot;</span> <span class="pre">CFLAGS=&quot;-arch</span> x86_64 <span class="pre">-I/usr/local/include/freetype2</span> <span class="pre">-I/usr/X11/include</span> <span class="pre">-L/usr/X11/lib&quot;</span>&nbsp; <span class="pre">LDFLAGS=&quot;-Wall</span> <span class="pre">-undefined</span> dynamic_lookup <span class="pre">-bundle</span>&nbsp; <span class="pre">-lpng</span> <span class="pre">-arch</span> x86_64&quot; <span class="pre">CXX=&quot;/usr/bin/g++-4.2&quot;</span> <span class="pre">CC=&quot;/usr/bin/gcc-4.2&quot;</span> python setup.py buildpython setup.py install</tt>
Test the install:
<tt class="docutils literal">python <span class="pre">-c</span> &quot;import scipy, scipy.fftpack, scipy.interpolate&quot;</tt></li>
<li><ol class="first arabic">
<li>Install matplotlib. MAKE SURE /usr/bin/texbin is in front of
/usr/local/bin and /sw/bin so that dvipng comes from MacTEX. I
also ended up having to remove /usr/local/bin from my path
completely
<tt class="docutils literal">sudo mv /System/Library/Frameworks/Python.framework/Versions/2.6/Extras/lib/python/numpy /System/Library/Frameworks/Python.framework/Versions/2.6/Extras/lib/python/numpyXcd <span class="pre">~/repos/matplotlib-svnpython</span> setup.py cleanrm <span class="pre">-rf</span> buildclearflags</tt></li>
<li>Do hyperjeff's recommended edits except don't use /usr/local
because it's f'd:
make.osx:
<tt class="docutils literal"><span class="pre">MACOSX_DEPLOYMENT_TARGET=10.6PREFIX=/usrPYTHON=/Library/Frameworks/Python.framework/Versions/Current/bin/python##</span> You shouldn't need to configure past this point (and <span class="pre">yet…)PKG_CONFIG_PATH=&quot;${PREFIX}/lib/pkgconfig&quot;CFLAGS=&quot;-arch</span> i386 <span class="pre">-arch</span> x86_64 <span class="pre">-I${PREFIX}/include</span> <span class="pre">-I${PREFIX}/include/freetype2</span> <span class="pre">-isysroot</span> <span class="pre">/Developer/SDKs/MacOSX10.6.sdk&quot;LDFLAGS=&quot;-arch</span> i386 <span class="pre">-arch</span> x86_64 <span class="pre">-L${PREFIX}/lib</span> <span class="pre">-syslibroot,/Developer/SDKs/MacOSX10.6.sdk&quot;FFLAGS=&quot;-arch</span> i386 <span class="pre">-arch</span> x86_64&quot;</tt>
setup.cfg:
<tt class="docutils literal">wxagg = False</tt></li>
<li>Do the install (different from hyperjeff b/c I don't want root)
`` sudo make -f make.osx fetch deps make -f mpl_build mpl_installpython setup.py install``</li>
</ol>
</li>
<li>Install setuptools</li>
<li>easy_install ipython</li>
<li>install everything else pythonically</li>
</ol>
</p> </div>
        <!-- /.entry-content   not article.summary--> 
    </article></li>
    <hr width=100%>
    <li><article class="hentry">
        <header> 
            <h2 class="entry-title">
                <a href="https://keflavich.github.io/blog/reinstalling-a-system.html" rel="bookmark" title="Permalink to Reinstalling a system">
                    Reinstalling a system</a>
            </h2> 
        </header>
        <footer class="post-info">
            <abbr class="published" title="2012-09-20T20:02:00-06:00"> 2012/09/20 </abbr>
            <!--<address class="vcard author"><a class="url fn" href="https://keflavich.github.io/blog/author/adam-keflavichgmailcom.html">Adam (keflavich@gmail.com)</a></address>-->
        </footer><!-- /.post-info -->
        <div class="entry-content"> <p>Python died tonight when I foolishly tried to update numpy or
matplotlib. One was not compatible with the other in upgraded form, and
the update for matplotlib wouldn't install because of GTK issues that
were totally opaque.
So, I reinstalled EVERYTHING - fink AND macports - from scratch. If I
don't get things running by morning I'm going to have to do a restore,
which is ugly as death.
Things I need to do post-install:
``        sudo port install python_select          sudo python_select python25``
test ipython
test matplotlib
test numpy</p>
 </div>
        <!-- /.entry-content   not article.summary--> 
    </article></li>
    <hr width=100%>
    <li><article class="hentry">
        <header> 
            <h2 class="entry-title">
                <a href="https://keflavich.github.io/blog/save-restore-in-python.html" rel="bookmark" title="Permalink to SAVE / RESTORE in Python">
                    SAVE / RESTORE in Python</a>
            </h2> 
        </header>
        <footer class="post-info">
            <abbr class="published" title="2012-09-20T20:02:00-06:00"> 2012/09/20 </abbr>
            <!--<address class="vcard author"><a class="url fn" href="https://keflavich.github.io/blog/author/adam-keflavichgmailcom.html">Adam (keflavich@gmail.com)</a></address>-->
        </footer><!-- /.post-info -->
        <div class="entry-content"> <p>Save/Restore is probably the single best feature of IDL that, sadly, is
very poorly replicated in Python. For 1 or 2 dimensional variables, you
can use Pylab's <tt class="docutils literal">save/load</tt>, but I never use such piddling tiny
arrays. For higher dimensional objects, either using FITS files (a pain
because of header definitions) or pickling ought to work.
e.g.:
<tt class="docutils literal">import numpyimport <span class="pre">picklex=ones([10,10,10,10],dtype='float64')pickle.dump(x,open('x.pysav','w'))X</span> = <span class="pre">pickle.load(open('x.pysav','r'))</span></tt></p>
 </div>
        <!-- /.entry-content   not article.summary--> 
    </article></li>
    <hr width=100%>
</ul><!-- /#posts-list -->
<p class="paginator">
            <a href="https://keflavich.github.io/blog/tag/python2.html">&laquo;</a>
    Page 3 / 4
        <a href="https://keflavich.github.io/blog/tag/python4.html">&raquo;</a>
</p>
</section><!-- /#content -->
  </div>

    <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-37306139-1']);
    _gaq.push(['_trackPageview']);
    (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();

    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-37306139-1');
    ga('send', 'pageview');
</script>
<script type="text/javascript">
  var disqus_shortname = 'adamginsburgsblog';
  (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
   })();
</script>
</body>
</html>
