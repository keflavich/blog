<!DOCTYPE html>
<html lang="en">
<link rel="stylesheet" type="text/css" href="https://keflavich.github.io/blog/theme/css/style.css" />
<link rel="icon" type="image/gif" href="https://keflavich.github.io/blog/theme/favicon8.ico">
<head>
    <base href="https://keflavich.github.io/blog">
        <title>Adam Ginsburg's blog - python</title>
        <meta charset="utf-8" />
        <link href="https://keflavich.github.io/blog/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="Adam Ginsburg's blog Full Atom Feed" />
<!-- Using MathJax, with the delimiters $ -->
<!-- Conflict with pygments for the .mo and .mi -->
<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
    "HTML-CSS": {
    styles: {
    ".MathJax .mo, .MathJax .mi": {color: "inherit !important"}},
    'div.typeset': { 'text-align': 'left'}
    },
    tex2jax: {inlineMath: [['$','$'], ['\\(','\\)']],processEscapes: true}
    });
    TeX: {
        extensions: ["AMSmath.js", "AMSsymbols.js"]
    }
    MathJax.Hub.Register.StartupHook("HTML-CSS Jax Ready",function () {
    var VARIANT = MathJax.OutputJax["HTML-CSS"].FONTDATA.VARIANT;
    VARIANT["normal"].fonts.unshift("MathJax_SansSerif");
    VARIANT["bold"].fonts.unshift("MathJax_SansSerif-bold");
    VARIANT["italic"].fonts.unshift("MathJax_SansSerif-italic");
    VARIANT["-tex-mathit"].fonts.unshift("MathJax_SansSerif-italic");
    });
    MathJax.Hub.Register.StartupHook("SVG Jax Ready",function () {
    var VARIANT = MathJax.OutputJax.SVG.FONTDATA.VARIANT;
    VARIANT["normal"].fonts.unshift("MathJax_SansSerif");
    VARIANT["bold"].fonts.unshift("MathJax_SansSerif-bold");
    VARIANT["italic"].fonts.unshift("MathJax_SansSerif-italic");
    VARIANT["-tex-mathit"].fonts.unshift("MathJax_SansSerif-italic");
    });
</script>

<script type="text/javascript"
src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS_HTML">
</script>
        
</head>

<body id="base" class="home">


    <header id="banner" class="body" >
        <div id="header" style='background-image: url("https://keflavich.github.io/blog/images/GC_4096sq_bolo.png"); background-position:left; min-heigt: 200px;  background-repeat: no-repeat; max-width: 80%;'>
            <h1 style="color: #C4C4C4;"><a class="header" href="https://keflavich.github.io/blog">Adam Ginsburg's blog <strong></strong></a></h1>

            <nav id="menu"><ul id="menulist">
                <li><a href="https://www.adamgginsburg.com">Homepage</a></li>
                <li><a href="/index.html">Blog Index</a></li>
                <li><a href="/category/bgps.html">BGPS Blog</a></li>
                <li><a href="/category/publications.html">Publications</a></li>
                <li><a href="/archives.html">Archives</a></li>
                <li><a href="/tags.html">Tags</a></li>
            </ul></nav><!-- /#menu -->
        </div>
    </header><!-- /#banner -->

  <div id="sidebar">
    <ul>
      <li>
        <h3 id='recent_header'>Recent Posts</h3>
        <ul>
              <li class="post">
                  2015/10/09
                  <br>
                  <a href="https://keflavich.github.io/blog/sensitivity-plots-using-astroquery-nrao-tool.html">Sensitivity Plots using astroquery NRAO tool</a>
              </li>
              <li class="post">
                  2015/05/07
                  <br>
                  <a href="https://keflavich.github.io/blog/my-python-ipython-vim-debugging-workflow.html">My python + ipython + vim debugging workflow</a>
              </li>
              <li class="post">
                  2014/02/19
                  <br>
                  <a href="https://keflavich.github.io/blog/python-stack-on-mavericks.html">Python stack on Mavericks</a>
              </li>
              <li class="post">
                  2013/12/13
                  <br>
                  <a href="https://keflavich.github.io/blog/there-is-a-gap-in-the-dust-around-sgr-b2.html">There is a "gap" in the dust around Sgr B2</a>
              </li>
              <li class="post">
                  2013/09/24
                  <br>
                  <a href="https://keflavich.github.io/blog/position-velocity-diagrams.html">Position-Velocity Diagrams</a>
              </li>
        </ul>
      </li>
    
    </ul>
  </div><!-- end #sidebar -->

  <div id="content">
<section id="content">

<ul id="post-list">
    <li><article class="hentry">
        <header> 
            <h2 class="entry-title">
                <a href="https://keflavich.github.io/blog/cython-vs-f2py.html" rel="bookmark" title="Permalink to cython vs f2py">
                    cython vs f2py</a>
            </h2> 
        </header>
        <footer class="post-info">
            <abbr class="published" title="2012-09-20T20:02:00-06:00"> 2012/09/20 </abbr>
            <!--<address class="vcard author"><a class="url fn" href="https://keflavich.github.io/blog/author/adam-keflavichgmailcom.html">Adam (keflavich@gmail.com)</a></address>-->
        </footer><!-- /.post-info -->
        <div class="entry-content"> <p>I had a go at optimizing some code this past week, and ended up learning
to use both cython and f2py.
f2py is much easier to use. If you want to write a function in fortran
and use it in python, all you do is write the code and add
specifications using comments in the fortran code.
cython is more natural to code. The code style is C/fortran-like: think
in terms of loops instead of arrays. The syntax is python-like, which
makes coding somewhat clearer and simpler.
For my code, I found that cython was ~10% slower than fortran.
Check out the plfits in:
<a class="reference external" href="http://code.google.com/p/agpy/source/browse/#svn/trunk/">http://code.google.com/p/agpy/source/browse/#svn/trunk/</a></p>
 </div>
        <!-- /.entry-content   not article.summary--> 
    </article></li>
    <hr width=100%>
    <li><article class="hentry">
        <header> 
            <h2 class="entry-title">
                <a href="https://keflavich.github.io/blog/ds9-gaussian-fitting.html" rel="bookmark" title="Permalink to DS9 gaussian fitting">
                    DS9 gaussian fitting</a>
            </h2> 
        </header>
        <footer class="post-info">
            <abbr class="published" title="2012-09-20T20:02:00-06:00"> 2012/09/20 </abbr>
            <!--<address class="vcard author"><a class="url fn" href="https://keflavich.github.io/blog/author/adam-keflavichgmailcom.html">Adam (keflavich@gmail.com)</a></address>-->
        </footer><!-- /.post-info -->
        <div class="entry-content"> <p>One thing DS9 desperately needs is an interactive gaussian fitter. I
have NOT implemented one yet, but it is high on my to do list. Has
anyone else (googlers?) tried or succeeded in implementing such a thing?
Ideally, something with NO dependencies: if I write one, it will require
python, numpy, and probably pyds9 - ick. Straight-up TCL would be very
much preferable.</p>
 </div>
        <!-- /.entry-content   not article.summary--> 
    </article></li>
    <hr width=100%>
    <li><article class="hentry">
        <header> 
            <h2 class="entry-title">
                <a href="https://keflavich.github.io/blog/filled-step-plots-in-matplotlib.html" rel="bookmark" title="Permalink to Filled step plots in matplotlib">
                    Filled step plots in matplotlib</a>
            </h2> 
        </header>
        <footer class="post-info">
            <abbr class="published" title="2012-09-20T20:02:00-06:00"> 2012/09/20 </abbr>
            <!--<address class="vcard author"><a class="url fn" href="https://keflavich.github.io/blog/author/adam-keflavichgmailcom.html">Adam (keflavich@gmail.com)</a></address>-->
        </footer><!-- /.post-info -->
        <div class="entry-content"> <p><p>It's not possible to do a simple filled step plot in matplotlib using
default
commands. Workaround:</p>
<pre class="literal-block">
def steppify(arr,isX=False,interval=0):    &quot;&quot;&quot;    Converts an array to double-length for step plotting    &quot;&quot;&quot;    if isX and interval==0:        interval = abs(arr[1]-arr[0]) / 2.0        newarr = array(zip(arr-interval,arr+interval)).ravel()        return newarrplot(xx,yy,linestyle='steps-mid',color='b',linewidth=1.5)fill_between(steppify(xx[x1:x2],isX=True),    steppify(yy[x1:x2])*0,    steppify(yy[x1:x2]),    facecolor='b',alpha=0.2)
</pre>
</p> </div>
        <!-- /.entry-content   not article.summary--> 
    </article></li>
    <hr width=100%>
    <li><article class="hentry">
        <header> 
            <h2 class="entry-title">
                <a href="https://keflavich.github.io/blog/idl-to-python.html" rel="bookmark" title="Permalink to IDL-to-Python">
                    IDL-to-Python</a>
            </h2> 
        </header>
        <footer class="post-info">
            <abbr class="published" title="2012-09-20T20:02:00-06:00"> 2012/09/20 </abbr>
            <!--<address class="vcard author"><a class="url fn" href="https://keflavich.github.io/blog/author/adam-keflavichgmailcom.html">Adam (keflavich@gmail.com)</a></address>-->
        </footer><!-- /.post-info -->
        <div class="entry-content"> <p>astrobetter started up an <a class="reference external" href="http://www.astrobetter.com/wiki/tiki-index.php?page=Python+Switchers+Guide">idl-to-python guide</a> on their wiki.</p>
 </div>
        <!-- /.entry-content   not article.summary--> 
    </article></li>
    <hr width=100%>
    <li><article class="hentry">
        <header> 
            <h2 class="entry-title">
                <a href="https://keflavich.github.io/blog/installing-64-bit-tcltk-on-mac-os-x.html" rel="bookmark" title="Permalink to Installing 64 bit tcl/tk on Mac OS X">
                    Installing 64 bit tcl/tk on Mac OS X</a>
            </h2> 
        </header>
        <footer class="post-info">
            <abbr class="published" title="2012-09-20T20:02:00-06:00"> 2012/09/20 </abbr>
            <!--<address class="vcard author"><a class="url fn" href="https://keflavich.github.io/blog/author/adam-keflavichgmailcom.html">Adam (keflavich@gmail.com)</a></address>-->
        </footer><!-- /.post-info -->
        <div class="entry-content"> <p>Everything is described in this post:
<a class="reference external" href="http://www.nabble.com/Error-compiling-tk-8.5.7-on-Mac-OS-X-10.5-td23790967.html">http://www.nabble.com/Error-compiling-tk-8.5.7-on-Mac-OS-X-10.5-td23790967.html</a></p>
<p>But here's a script too:
<tt class="docutils literal">curl <span class="pre">-O</span> <span class="pre">'http://osdn.dl.sourceforge.net/sourceforge/tcl/t{cl,k}8.5.7-src.tar.gz'for</span> f in <span class="pre">t*8.5.7*.gz;</span> do tar zxf $f; done cd <span class="pre">tcl8.5.7/unix/./configure</span> <span class="pre">--enable-framework</span> <span class="pre">--enable-64-bitcd</span> <span class="pre">tk8.5.7/unix/./configure</span> <span class="pre">--enable-framework</span> <span class="pre">--enable-64-bitmake</span> <span class="pre">-j</span> 4 <span class="pre">-C</span> tcl8.5.7/unix make <span class="pre">-j</span> 4 <span class="pre">-C</span> tk8.5.7/unixsudo make install <span class="pre">-C</span> tcl8.5.7/unix sudo make install <span class="pre">-C</span> tk8.5.7/unix</tt></p>
<p>Concerns:</p>
<blockquote>
<ul class="simple">
<li>might be necessary to do this in the macosx directory for some reason,
though Aqua doesn't support 64 bits</li>
<li>have to recompile python to get _tkinter to work (see <a class="reference external" href="http://buffalothedestroyer.blogspot.com/2009/07/success-64-bit-python-with-64-bit-tcltk.html">a later post</a>)</li>
</ul>
</blockquote>
 </div>
        <!-- /.entry-content   not article.summary--> 
    </article></li>
    <hr width=100%>
    <li><article class="hentry">
        <header> 
            <h2 class="entry-title">
                <a href="https://keflavich.github.io/blog/listing-variables-eg-idl-help-in-python.html" rel="bookmark" title="Permalink to Listing variables (e.g IDL help) in Python">
                    Listing variables (e.g IDL help) in Python</a>
            </h2> 
        </header>
        <footer class="post-info">
            <abbr class="published" title="2012-09-20T20:02:00-06:00"> 2012/09/20 </abbr>
            <!--<address class="vcard author"><a class="url fn" href="https://keflavich.github.io/blog/author/adam-keflavichgmailcom.html">Adam (keflavich@gmail.com)</a></address>-->
        </footer><!-- /.post-info -->
        <div class="entry-content"> <p>Again, IDL has the simple 'help' command to tell you all variables in
your namespace. Python has the same thing, but the namespace tends to be
cluttered with imported functions. The commands who, who_ls, and whos
are meant for interactive use. They are a hell of a lot more useful than
var, locals, globals, and dir.
examples:
<tt class="docutils literal">whos floatwhos ndarraywho modulefloat_vars = %who_ls <span class="pre">floatgrep('x',float_vars)</span></tt>
I'm afraid I don't know how to make the last two lines into a one-liner,
as would be desirable.</p>
 </div>
        <!-- /.entry-content   not article.summary--> 
    </article></li>
    <hr width=100%>
    <li><article class="hentry">
        <header> 
            <h2 class="entry-title">
                <a href="https://keflavich.github.io/blog/logarithmic-colormap-other-colormap-in-matplotlib.html" rel="bookmark" title="Permalink to Logarithmic Colormap / Other Colormap in Matplotlib">
                    Logarithmic Colormap / Other Colormap in Matplotlib</a>
            </h2> 
        </header>
        <footer class="post-info">
            <abbr class="published" title="2012-09-20T20:02:00-06:00"> 2012/09/20 </abbr>
            <!--<address class="vcard author"><a class="url fn" href="https://keflavich.github.io/blog/author/adam-keflavichgmailcom.html">Adam (keflavich@gmail.com)</a></address>-->
        </footer><!-- /.post-info -->
        <div class="entry-content"> <p>This is kind of a pain to find out:
<tt class="docutils literal">from matplotlib.colors import LogNormim = <span class="pre">imshow(....</span> <span class="pre">cmap=...</span> , norm=LogNorm(vmin=clevs[0], <span class="pre">vmax=clevs[-1]))</span> ``
It also works for contours, and can be particularly useful if you only
want to display contours at a few levels, but you want the colormap to
start at a different point. e.g.:
<span class="pre">``contour(xx,levels=[2,3,4,5,6,7,8,9,10],norm=matplotlib.colors.Normalize(vmin=0,vmax=10))</span></tt>
will start at light blue instead of dark blue in the default colormap</p>
 </div>
        <!-- /.entry-content   not article.summary--> 
    </article></li>
    <hr width=100%>
    <li><article class="hentry">
        <header> 
            <h2 class="entry-title">
                <a href="https://keflavich.github.io/blog/my-scipy-install.html" rel="bookmark" title="Permalink to my scipy install...">
                    my scipy install...</a>
            </h2> 
        </header>
        <footer class="post-info">
            <abbr class="published" title="2012-09-20T20:02:00-06:00"> 2012/09/20 </abbr>
            <!--<address class="vcard author"><a class="url fn" href="https://keflavich.github.io/blog/author/adam-keflavichgmailcom.html">Adam (keflavich@gmail.com)</a></address>-->
        </footer><!-- /.post-info -->
        <div class="entry-content"> <p>As far as I was able to reconstruct, my scipy install looked like this
when it went well:
<tt class="docutils literal">mkdir <span class="pre">scipy-bincp</span> <span class="pre">../scipy-svn/site.cfg</span> .export <span class="pre">PATH=/Users/adam/repos/scipy.git/scipy-bin:$PATHln</span> <span class="pre">-s</span> <span class="pre">/usr/bin/g++-4.0</span> <span class="pre">scipy-bin/g++-4.0ln</span> <span class="pre">-s</span> <span class="pre">/usr/bin/g++-4.0</span> <span class="pre">scipy-bin/c++export</span> <span class="pre">CC=/usr/bin/gcc-4.0</span> ln <span class="pre">-s</span> <span class="pre">/usr/bin/gcc-4.0</span> <span class="pre">scipy-bin/ln</span> <span class="pre">-s</span> <span class="pre">/usr/bin/gcc-4.0</span> <span class="pre">scipy-bin/gccln</span> <span class="pre">-s</span> <span class="pre">/usr/local/bin/gfortran-4.0</span> <span class="pre">scipy-bin/gfortran-4.0ln</span> <span class="pre">-s</span> <span class="pre">/usr/local/bin/gfortran-4.0</span> <span class="pre">scipy-bin/gfortranln</span> <span class="pre">-s</span> /usr/local/bin/g95 <span class="pre">scipy-bin/g95ln</span> <span class="pre">-s</span> <span class="pre">/usr/local/bin/i686-apple-darwin8-gfortran-4.2</span> <span class="pre">scipy-bin/python2.7</span> setup.py buildpython2.7 setup.py install</tt>
However, site.cfg included pointers to AMD and UMFPACK that were
installed via the incredibly complicated series of steps listed here:
<a class="reference external" href="http://blog.hyperjeff.net/?p=160">http://blog.hyperjeff.net/?p=160</a>
<a class="reference external" href="http://casa.colorado.edu/~ginsbura/index.htm">AG</a></p>
 </div>
        <!-- /.entry-content   not article.summary--> 
    </article></li>
    <hr width=100%>
    <li><article class="hentry">
        <header> 
            <h2 class="entry-title">
                <a href="https://keflavich.github.io/blog/nan-friendly-convolution.html" rel="bookmark" title="Permalink to NaN-friendly convolution">
                    NaN-friendly convolution</a>
            </h2> 
        </header>
        <footer class="post-info">
            <abbr class="published" title="2012-09-20T20:02:00-06:00"> 2012/09/20 </abbr>
            <!--<address class="vcard author"><a class="url fn" href="https://keflavich.github.io/blog/author/adam-keflavichgmailcom.html">Adam (keflavich@gmail.com)</a></address>-->
        </footer><!-- /.post-info -->
        <div class="entry-content"> <p>NaN-friendly convolution is important for, e.g., masked data sets in
which you want to interpolate across the masked region.</p>
<p>Astropy has gained this functionality with pull request 155:
<a class="reference external" href="https://github.com/astropy/astropy/pull/155">https://github.com/astropy/astropy/pull/155</a> but this is a &quot;direct&quot; convolution parallel to IDL's 'convol'
routine.</p>
<p>My FFT-based version now works in N dimensions and is a little cleaner:
<a class="reference external" href="http://code.google.com/p/agpy/source/browse/trunk/AG_fft_tools/convolve_nd.py">http://code.google.com/p/agpy/source/browse/trunk/AG_fft_tools/convolve_nd.py</a></p>
<p>I'm still working on writing unit tests, and I'm really not sure what
the &quot;correct&quot; behavior at the edges is for the different cases... right
now, it seems counterintuitive to me, but the code is doing what I
expect it to.</p>
<p>Also, Boxcar kernels always result in shifts for me... they're never
supposed to. This is a bug.</p>
<p>Currently, other links to these codes:
<a class="reference external" href="http://stackoverflow.com/questions/1100100/fft-based-2d-convolution-and-correlation-in-python/8454010#8454010">http://stackoverflow.com/questions/1100100/fft-based-2d-convolution-and-correlation-in-python/8454010#8454010</a></p>
 </div>
        <!-- /.entry-content   not article.summary--> 
    </article></li>
    <hr width=100%>
    <li><article class="hentry">
        <header> 
            <h2 class="entry-title">
                <a href="https://keflavich.github.io/blog/observing-1020.html" rel="bookmark" title="Permalink to Observing 10/20">
                    Observing 10/20</a>
            </h2> 
        </header>
        <footer class="post-info">
            <abbr class="published" title="2012-09-20T20:02:00-06:00"> 2012/09/20 </abbr>
            <!--<address class="vcard author"><a class="url fn" href="https://keflavich.github.io/blog/author/adam-keflavichgmailcom.html">Adam (keflavich@gmail.com)</a></address>-->
        </footer><!-- /.post-info -->
        <div class="entry-content"> <p>I don't have a better place to post this one, so here it is:</p>
<img alt="" src="http://sites.google.com/site/iras05358/figure-discussion/figures/iras05358_triple_17.29.png?attredirects=0" />
<p>My automated fitter (<a class="reference external" href="http://casa.colorado.edu/~ginsbura/pygausscollapse.htm">Gaussfitting Cube Collapser</a>) has come a long
way. I now adaptively choose to fit 1, 2, or 3 Gaussian components to
output to a data cube.
The purpose of that code is primarily to find a two-dimensional way to
display information about the 3D structure, specifically about the
presence/absence of outflows. Outflows will inevitably be confused with
multiple velocity components, but they are also likely to be convolved
with them.</p>
 </div>
        <!-- /.entry-content   not article.summary--> 
    </article></li>
    <hr width=100%>
</ul><!-- /#posts-list -->
<p class="paginator">
            <a href="https://keflavich.github.io/blog/tag/python.html">&laquo;</a>
    Page 2 / 4
        <a href="https://keflavich.github.io/blog/tag/python3.html">&raquo;</a>
</p>
</section><!-- /#content -->
  </div>

    <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-37306139-1']);
    _gaq.push(['_trackPageview']);
    (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();

    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-37306139-1');
    ga('send', 'pageview');
</script>
<script type="text/javascript">
  var disqus_shortname = 'adamginsburgsblog';
  (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
   })();
</script>
</body>
</html>
