<!DOCTYPE html>
<html lang="en">
<link rel="stylesheet" type="text/css" href="https://keflavich.github.io/blog/theme/css/style.css" />
<link rel="icon" type="image/gif" href="https://keflavich.github.io/blog/theme/favicon8.ico">
<head>
    <base href="https://keflavich.github.io/blog">
        <title>Adam Ginsburg's blog - version comparison</title>
        <meta charset="utf-8" />
        <link href="https://keflavich.github.io/blog/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="Adam Ginsburg's blog Full Atom Feed" />
<!-- Using MathJax, with the delimiters $ -->
<!-- Conflict with pygments for the .mo and .mi -->
<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
    "HTML-CSS": {
    styles: {
    ".MathJax .mo, .MathJax .mi": {color: "inherit !important"}},
    'div.typeset': { 'text-align': 'left'}
    },
    tex2jax: {inlineMath: [['$','$'], ['\\(','\\)']],processEscapes: true}
    });
    TeX: {
        extensions: ["AMSmath.js", "AMSsymbols.js"]
    }
    MathJax.Hub.Register.StartupHook("HTML-CSS Jax Ready",function () {
    var VARIANT = MathJax.OutputJax["HTML-CSS"].FONTDATA.VARIANT;
    VARIANT["normal"].fonts.unshift("MathJax_SansSerif");
    VARIANT["bold"].fonts.unshift("MathJax_SansSerif-bold");
    VARIANT["italic"].fonts.unshift("MathJax_SansSerif-italic");
    VARIANT["-tex-mathit"].fonts.unshift("MathJax_SansSerif-italic");
    });
    MathJax.Hub.Register.StartupHook("SVG Jax Ready",function () {
    var VARIANT = MathJax.OutputJax.SVG.FONTDATA.VARIANT;
    VARIANT["normal"].fonts.unshift("MathJax_SansSerif");
    VARIANT["bold"].fonts.unshift("MathJax_SansSerif-bold");
    VARIANT["italic"].fonts.unshift("MathJax_SansSerif-italic");
    VARIANT["-tex-mathit"].fonts.unshift("MathJax_SansSerif-italic");
    });
</script>

<script type="text/javascript"
src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS_HTML">
</script>
        
</head>

<body id="base" class="home">


    <header id="banner" class="body" >
        <div id="header" style='background-image: url("https://keflavich.github.io/blog/images/GC_4096sq_bolo.png"); background-position:left; min-heigt: 200px;  background-repeat: no-repeat; max-width: 80%;'>
            <h1 style="color: #C4C4C4;"><a class="header" href="https://keflavich.github.io/blog">Adam Ginsburg's blog <strong></strong></a></h1>

            <nav id="menu"><ul id="menulist">
                <li><a href="https://www.adamgginsburg.com">Homepage</a></li>
                <li><a href="/index.html">Blog Index</a></li>
                <li><a href="/category/bgps.html">BGPS Blog</a></li>
                <li><a href="/category/publications.html">Publications</a></li>
                <li><a href="/archives.html">Archives</a></li>
                <li><a href="/tags.html">Tags</a></li>
            </ul></nav><!-- /#menu -->
        </div>
    </header><!-- /#banner -->

  <div id="sidebar">
    <ul>
      <li>
        <h3 id='recent_header'>Recent Posts</h3>
        <ul>
              <li class="post">
                  2012/05/23
                  <br>
                  <a href="https://keflavich.github.io/blog/bgps-v2-pointing.html">BGPS V2 pointing</a>
              </li>
              <li class="post">
                  2011/08/30
                  <br>
                  <a href="https://keflavich.github.io/blog/bolocat-v1-v2-comparison-with-new-calibration.html">Bolocat v1-v2 comparison with new calibration</a>
              </li>
              <li class="post">
                  2011/08/25
                  <br>
                  <a href="https://keflavich.github.io/blog/v1-vs-v2-calibration-curves.html">V1 vs V2: Calibration Curves</a>
              </li>
              <li class="post">
                  2011/08/23
                  <br>
                  <a href="https://keflavich.github.io/blog/bolocat-v1-v2-comparison.html">Bolocat v1-v2 comparison</a>
              </li>
              <li class="post">
                  2011/08/23
                  <br>
                  <a href="https://keflavich.github.io/blog/v1-v2-comparison.html">v1-v2 comparison</a>
              </li>
        </ul>
      </li>
    
    </ul>
  </div><!-- end #sidebar -->

  <div id="content">
<section id="content">

<ul id="post-list">
    <li><article class="hentry">
        <header> 
            <h2 class="entry-title">
                <a href="https://keflavich.github.io/blog/bgps-v2-pointing.html" rel="bookmark" title="Permalink to BGPS V2 pointing">
                    BGPS V2 pointing</a>
            </h2> 
        </header>
        <footer class="post-info">
            <abbr class="published" title="2012-05-23T23:59:00-06:00"> 2012/05/23 </abbr>
            <!--<address class="vcard author"><a class="url fn" href="https://keflavich.github.io/blog/author/adam-adamgginsburggmailcom.html">Adam (adam.g.ginsburg@gmail.com)</a></address>-->
        </footer><!-- /.post-info -->
        <div class="entry-content"> <p>BGPS V2.0 pointing offsets relative to V1 and Herschel:</p>
<img alt="" src="http://4.bp.blogspot.com/-41YC6GZJR-0/T715bELMplI/AAAAAAAAHE0/Fzk41wW8ysM/s320/Offsets_CDF.png" />
<p>Cumulative Distribution Function of the total offsets.</p>
<img alt="" src="http://2.bp.blogspot.com/-9zPWRdGI0jY/T715bmcgVnI/AAAAAAAAHFA/K0XKvlJdO_8/s320/Offsets_Histogram.png" />
<p>Histograms of the total offsets.</p>
<img alt="" src="http://2.bp.blogspot.com/-3hkzLY1D4KY/T715b0VfMxI/AAAAAAAAHFM/DDBXKCGu8ng/s320/Offsets_XYplot.png" />
<p>X-offsets vs Y-offsets (X and Y are GLON and GLAT). The ellipses are
centered at the mean of the X/Y offsets and have major and minor axes
corresponding to the standard deviations.</p>
 </div>
        <!-- /.entry-content   not article.summary--> 
    </article></li>
    <hr width=100%>
    <li><article class="hentry">
        <header> 
            <h2 class="entry-title">
                <a href="https://keflavich.github.io/blog/bolocat-v1-v2-comparison-with-new-calibration.html" rel="bookmark" title="Permalink to Bolocat v1-v2 comparison with new calibration">
                    Bolocat v1-v2 comparison with new calibration</a>
            </h2> 
        </header>
        <footer class="post-info">
            <abbr class="published" title="2011-08-30T21:04:00-06:00"> 2011/08/30 </abbr>
            <!--<address class="vcard author"><a class="url fn" href="https://keflavich.github.io/blog/author/adam-adamgginsburggmailcom.html">Adam (adam.g.ginsburg@gmail.com)</a></address>-->
        </footer><!-- /.post-info -->
        <div class="entry-content"> <img alt="" src="http://2.bp.blogspot.com/-c3_0Rlbv2qM/Tl1P5FhWC8I/AAAAAAAAGdc/oiFxmO7vrUU/s320/total_v1v2_40arcsec_ratio_compare.png" />
<img alt="" src="http://4.bp.blogspot.com/-Gk60vlSPkWk/Tl1P5c4THoI/AAAAAAAAGdk/E7zdIwtyD3w/s320/total_v1v2_40arcsec_fit_compare.png" />
<p>I re-examined the Bolocat data on l351 after re-running the pipeline
with the new calibration curve. The change wasn't all that great. See
<a class="reference external" href="http://bolocam.blogspot.com/2011/08/bolocat-v1-v2-comparison.html">this post</a> for a brief description of the procedure.
In the data below, I've fit the residuals as a function of v1.0.2 flux
density in an aperture (source mask) with a line. The slope of the line
should ideally be zero - that would indicate a multiplicative offset is
an acceptable correction.
Nicely, in the 40&quot; aperture case, I see no reason to exclude the m=0
case. For the most reliable data - the 13pca - the slope is rather small
and the &quot;correction factor&quot; is disturbingly close to what we recommended
(1.5). We have no right to be that lucky...</p>
<img alt="" src="http://2.bp.blogspot.com/-W08ZvMS3M90/TlwhPW62NQI/AAAAAAAAGc8/8YRm6iyDPO8/s320/l351_40arcsec_residualfit.png" />
<p>...and so perhaps wer are not. The source mask includes more area and
therefore is more sensitive to extended flux recovery. The slopes are
not consistent with 0 - just look at the data above and below 2 Jy to
see that there is a difference. The multiplicative correction of 1.5 is
decent for a pretty wide range of flux densities, but is inadequate for
the brightest sources. This is somewhat interesting... it implies that
the brightest sources also lie on the highest backgrounds.</p>
<img alt="" src="http://3.bp.blogspot.com/-GQBE_MjAxt8/TlwhPveClUI/AAAAAAAAGdE/lohBYlJuHwM/s320/l351_sourcemask_residualfit.png" />
<p>You might note that the brightest source has a smaller correction factor
in both apertures. It's not clear why that is the case, but I don't
think it's enough to call it a trend yet - wait for the full 8000-source
comparison first.
Why is there so much scatter? Not entirely clear, but the scatter is
primarily at low S/N.</p>
<img alt="" src="http://3.bp.blogspot.com/-GPKbsfs9Y8k/Tl1OJE43J3I/AAAAAAAAGdM/pVUx9SClgtc/s320/l351_40arcsec_fit_compare_monochrome.png" />
<img alt="" src="http://3.bp.blogspot.com/-snhh3Bamwc4/Tl1OJXzOYNI/AAAAAAAAGdU/n-rPxs-ZCtI/s320/l351_40arcsec_ratio_compare_monochrome.png" />
<p>Here are the same for all of the data reduced up to this point:</p>
<img alt="" src="http://2.bp.blogspot.com/-oUewyjZc9wU/Tl1QaGPeURI/AAAAAAAAGds/CHx3BtnT9sA/s320/total_v1v2_sourcemask_fit_compare.png" />
<img alt="" src="http://1.bp.blogspot.com/-n27ucFd82VI/Tl1Qab1kbUI/AAAAAAAAGd0/kwWAceGqo5c/s320/total_v1v2_sourcemask_ratio_compare.png" />
 </div>
        <!-- /.entry-content   not article.summary--> 
    </article></li>
    <hr width=100%>
    <li><article class="hentry">
        <header> 
            <h2 class="entry-title">
                <a href="https://keflavich.github.io/blog/v1-vs-v2-calibration-curves.html" rel="bookmark" title="Permalink to V1 vs V2: Calibration Curves">
                    V1 vs V2: Calibration Curves</a>
            </h2> 
        </header>
        <footer class="post-info">
            <abbr class="published" title="2011-08-25T17:09:00-06:00"> 2011/08/25 </abbr>
            <!--<address class="vcard author"><a class="url fn" href="https://keflavich.github.io/blog/author/adam-adamgginsburggmailcom.html">Adam (adam.g.ginsburg@gmail.com)</a></address>-->
        </footer><!-- /.post-info -->
        <div class="entry-content"> <p>Why did we find a factor ~1.8 in <a class="reference external" href="http://bolocam.blogspot.com/2011/08/bolocat-v1-v2-comparison.html">the previous post</a>? Well, for
starters we used a calibration curve that was based off of 'masking' and
other tricky techniques.
The calibration curves below are the first ever produced
self-consistently, i.e. using the EXACT same pipeline with the EXACT
same parameters as the science data. No hacks were needed to produce
these<a class="reference external" href="#asterisk&quot;">*</a>. The recovered Volts/Jy are substantially higher than
BGPSv1 and ALSO higher than the curve used about a year ago in an
attempt to explain the v1 flux discrepancy.
Remember that a higher calibration curve means a LOWER recovered flux. I
haven't finished the check, but odds are pretty good that applying these
self-consistent cal curves will reduce the v2 data to be about 1.5.</p>
<img alt="" src="http://4.bp.blogspot.com/-PRU4LQ5f-C4/TlZ9wpeFBeI/AAAAAAAAGb8/jKdJHtIqV40/s320/planet_dcfluxes_05_defaults_ds2_v2.0_13pca_map20.png" />
<img alt="" src="http://3.bp.blogspot.com/-AIzsETyl69g/TlZ9w50DjBI/AAAAAAAAGcE/h5ggKhH3dO4/s320/planet_dcfluxes_06_defaults_ds2_v2.0_13pca_map20.png" />
<img alt="" src="http://4.bp.blogspot.com/-BNWD4QQ21Ac/TlZ9xZ5eTkI/AAAAAAAAGcM/QOVbum2jXIo/s320/planet_dcfluxes_07_defaults_ds2_v2.0_13pca_map20.png" />
<img alt="" src="http://2.bp.blogspot.com/-OucWo74b8VY/TlZ9yFIJYQI/AAAAAAAAGcU/IBMs5YLMlYU/s320/planet_dcfluxes_09_defaults_ds2_v2.0_13pca_map20.png" />
<p>While no hacks were needed to produce these plots, there were abundant
problems. There are far fewer data points than there should be. The
problems are manifold, but mostly have to do with the PCA scaling (I
think).
In some cases, the first scan in an observation was wildly variable.
There looked to be an exponential or similar decay (as has been observed
in scan turnarounds) at the observation start that took ~3 scans to
decay to bring all of the bolometers onto a scaleable curve. This is a
HUGE problem, because the assumption that the dominant signal is
atmosphere is badly violated in this situation - the signal becomes
electronics-dominated. The first PCA component is then an ugly
step-function. With these first scans flagged out, the whole problem
goes away, but that's a painful manual process. Automating it MAY be
possible, but also risky.
In other cases, particularly September 4th 2007, the atmosphere appeared
to be negligible! While the atmospheric optical depth probably was not,
if it was extraordinarily stable over the course of ~10 minutes, again
we experience severe problems. A stable atmosphere means no atmospheric
variation, which means that ACBOLOS is just noise (plus Uranus signal).
Ironically, this is very bad for calibration - it means there is no
common signal on which we can calibrate the bolos' relative
sensitivities. This problem doesn't seem to affect science data,
probably because there's no such thing as 45-minute stable atmosphere
(especially when you're following rising/setting sources). If I REALLY
need that data, I could snag the relative scalings from a science field
and apply them to the cal data... honestly that's not a bad idea in
general... hmm... Well, we'll explore that later if I have time, that
will take days to implement.</p>
 </div>
        <!-- /.entry-content   not article.summary--> 
    </article></li>
    <hr width=100%>
    <li><article class="hentry">
        <header> 
            <h2 class="entry-title">
                <a href="https://keflavich.github.io/blog/bolocat-v1-v2-comparison.html" rel="bookmark" title="Permalink to Bolocat v1-v2 comparison">
                    Bolocat v1-v2 comparison</a>
            </h2> 
        </header>
        <footer class="post-info">
            <abbr class="published" title="2011-08-23T04:39:00-06:00"> 2011/08/23 </abbr>
            <!--<address class="vcard author"><a class="url fn" href="https://keflavich.github.io/blog/author/adam-adamgginsburggmailcom.html">Adam (adam.g.ginsburg@gmail.com)</a></address>-->
        </footer><!-- /.post-info -->
        <div class="entry-content"> <p>For this experiment, I ran Bolocat on all of the v1 and v2 images using
the source masks Erik derived for v1. I then compared the derived fluxes
using both aperture photometry (as defined in bolocat) and the mask
sums.</p>
<p>First, note that the object_photometry code Erik wrote does NOT do
background subtraction - this is important for understanding
non-multiplicative offsets between v1 and v2.</p>
<p>I fit a 2-parameter model (a line) to the v2 vs v1 plots using two
methods. The simple linear-least-squares method is one we're all
familiar with, and it gives semi-reasonable results, but is NOT
statistically robust when there are errors on both axes. The other fit
method used was Total Least Squares, which is approximately equivalent
to Principle Component Analysis with 2 vectors. It uses components of
the singular-value-decomposition to determine the best fit. The fits
returned by TLS should be more robust, though the additive offsets need
not be.</p>
<p>Conclusion: Our factor of 1.5 looks like it was pretty accurate. For 40&quot;
apertures, the best fit is ~1.56, which is easily within the error bars.
Luckily, for 40&quot; apertures, there is no apparent need for an additive
offset (I'm pretty sure the uncertainty on the measured offset is larger
than the offset, though statistically that is not the case), which would
complicate things.</p>
<p>However, for the source mask, there is a greater scaling factor and a
very substantial offset. This implies that the peaks in v2 are brighter
by a large factor, but the backgrounds in v2 are actually lower than in
v1 (though please do check my reasoning here). I'm really not sure what
to make of the difference between source mask and aperture yet,
though... there's probably something significant in the source mask
being forced to pick positive pixels. (and peppered pickles)</p>
<img alt="" src="http://2.bp.blogspot.com/-9a-O_TQx3Ek/TlMr1f-nmKI/AAAAAAAAGbs/Tp6UY_vwl_s/s320/total_v1v2_40arcsec_fit_compare.png" />
<img alt="" src="http://2.bp.blogspot.com/-zhLxvflZ-30/TlMr1mWy6kI/AAAAAAAAGb0/GH7xSizIjnk/s320/total_v1v2_sourcemask_fit_compare.png" />
 </div>
        <!-- /.entry-content   not article.summary--> 
    </article></li>
    <hr width=100%>
    <li><article class="hentry">
        <header> 
            <h2 class="entry-title">
                <a href="https://keflavich.github.io/blog/v1-v2-comparison.html" rel="bookmark" title="Permalink to v1-v2 comparison">
                    v1-v2 comparison</a>
            </h2> 
        </header>
        <footer class="post-info">
            <abbr class="published" title="2011-08-23T04:25:00-06:00"> 2011/08/23 </abbr>
            <!--<address class="vcard author"><a class="url fn" href="https://keflavich.github.io/blog/author/adam-adamgginsburggmailcom.html">Adam (adam.g.ginsburg@gmail.com)</a></address>-->
        </footer><!-- /.post-info -->
        <div class="entry-content"> <p>Some positive results.
v2 is uniformly higher than v1, but at nearly 1.8, not 1.5. Some of this
could be because of a different calibration curve (which is worth
checking on; I'll do that later).</p>
<img alt="" src="http://1.bp.blogspot.com/-OJ0dGhlukDI/TkrJp3xJ3CI/AAAAAAAAGaM/2wljUfSwwiM/s320/v1.0.2_compare_to_v2.0_ds2_deconv_compare.png" />
<img alt="" src="http://4.bp.blogspot.com/-JuJNBoV9AFw/TkrJqtQVgYI/AAAAAAAAGaU/SMlGuh16ETs/s320/v1.0.2_compare_to_v2.0_ds2_deconv_deline_compare.png" />
<img alt="" src="http://1.bp.blogspot.com/-HIMECvNyofo/TkrJrFOgCeI/AAAAAAAAGac/6T6TTJMx0cM/s320/v1.0.2_compare_to_v2.0_ds2_deconv_madflag3_compare.png" />
<img alt="" src="http://1.bp.blogspot.com/-wYf-dSk8NXY/TkrJsINgC7I/AAAAAAAAGak/k6Kn6WbgxWM/s320/v1.0.2_compare_to_v2.0_ds2_deline_compare.png" />
<img alt="" src="http://3.bp.blogspot.com/-cMEqPyhfKDM/TkrJsmmMEpI/AAAAAAAAGas/ZgwSeLos5QQ/s320/v1.0.2_compare_to_v2.0_ds2_inversescaleweight_compare.png" />
<p>While the pixel-to-pixel comparison yields values ~1.75, the aperture
photometry is perhaps even more severe:</p>
<img alt="" src="http://2.bp.blogspot.com/-2kmy7UjYx-U/TkrX2i9j3KI/AAAAAAAAGbU/WTPdP7p6nHY/s320/v1.0.2_compare_to_v2.0_ds2_reconv_point.png" />
<img alt="" src="http://3.bp.blogspot.com/-Uhcyj_rCPrY/TkrX2-k72nI/AAAAAAAAGbc/yePgRQO3RCU/s320/v1.0.2_compare_to_v2.0_ds2_reconv_point2.png" />
<p>Those are a difference of a factor of 2.5, which is rather enormous.</p>
 </div>
        <!-- /.entry-content   not article.summary--> 
    </article></li>
    <hr width=100%>
</ul><!-- /#posts-list -->
<p class="paginator">
    Page 1 / 1
</p>
</section><!-- /#content -->
  </div>

    <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-37306139-1']);
    _gaq.push(['_trackPageview']);
    (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();

    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-37306139-1');
    ga('send', 'pageview');
</script>
<script type="text/javascript">
  var disqus_shortname = 'adamginsburgsblog';
  (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
   })();
</script>
</body>
</html>
