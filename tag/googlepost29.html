<!DOCTYPE html>
<html lang="en">
<link rel="stylesheet" type="text/css" href="https://keflavich.github.io/blog/theme/css/style.css" />
<link rel="icon" type="image/gif" href="https://keflavich.github.io/blog/theme/favicon8.ico">
<head>
    <base href="https://keflavich.github.io/blog">
        <title>Adam Ginsburg's blog - googlepost</title>
        <meta charset="utf-8" />
        <link href="https://keflavich.github.io/blog/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="Adam Ginsburg's blog Full Atom Feed" />
<!-- Using MathJax, with the delimiters $ -->
<!-- Conflict with pygments for the .mo and .mi -->
<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
    "HTML-CSS": {
    styles: {
    ".MathJax .mo, .MathJax .mi": {color: "inherit !important"}},
    'div.typeset': { 'text-align': 'left'}
    },
    tex2jax: {inlineMath: [['$','$'], ['\\(','\\)']],processEscapes: true}
    });
    TeX: {
        extensions: ["AMSmath.js", "AMSsymbols.js"]
    }
    MathJax.Hub.Register.StartupHook("HTML-CSS Jax Ready",function () {
    var VARIANT = MathJax.OutputJax["HTML-CSS"].FONTDATA.VARIANT;
    VARIANT["normal"].fonts.unshift("MathJax_SansSerif");
    VARIANT["bold"].fonts.unshift("MathJax_SansSerif-bold");
    VARIANT["italic"].fonts.unshift("MathJax_SansSerif-italic");
    VARIANT["-tex-mathit"].fonts.unshift("MathJax_SansSerif-italic");
    });
    MathJax.Hub.Register.StartupHook("SVG Jax Ready",function () {
    var VARIANT = MathJax.OutputJax.SVG.FONTDATA.VARIANT;
    VARIANT["normal"].fonts.unshift("MathJax_SansSerif");
    VARIANT["bold"].fonts.unshift("MathJax_SansSerif-bold");
    VARIANT["italic"].fonts.unshift("MathJax_SansSerif-italic");
    VARIANT["-tex-mathit"].fonts.unshift("MathJax_SansSerif-italic");
    });
</script>

<script type="text/javascript"
src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS_HTML">
</script>
        
</head>

<body id="base" class="home">


    <header id="banner" class="body" >
        <div id="header" style='background-image: url("https://keflavich.github.io/blog/images/GC_4096sq_bolo.png"); background-position:left; min-heigt: 200px;  background-repeat: no-repeat; max-width: 80%;'>
            <h1 style="color: #C4C4C4;"><a class="header" href="https://keflavich.github.io/blog">Adam Ginsburg's blog <strong></strong></a></h1>

            <nav id="menu"><ul id="menulist">
                <li><a href="https://www.adamgginsburg.com">Homepage</a></li>
                <li><a href="/index.html">Blog Index</a></li>
                <li><a href="/category/bgps.html">BGPS Blog</a></li>
                <li><a href="/category/publications.html">Publications</a></li>
                <li><a href="/archives.html">Archives</a></li>
                <li><a href="/tags.html">Tags</a></li>
            </ul></nav><!-- /#menu -->
        </div>
    </header><!-- /#banner -->

  <div id="sidebar">
    <ul>
      <li>
        <h3 id='recent_header'>Recent Posts</h3>
        <ul>
              <li class="post">
                  2012/12/26
                  <br>
                  <a href="https://keflavich.github.io/blog/catalog-vs-image-shift-a-possible-solution-to-the-atlasgal-issue.html">Catalog vs Image shift? A possible solution to the ATLASGAL issue</a>
              </li>
              <li class="post">
                  2012/12/22
                  <br>
                  <a href="https://keflavich.github.io/blog/idea-multispectral-eigenimage-decomposition.html">Idea: Multispectral Eigenimage decomposition...</a>
              </li>
              <li class="post">
                  2012/12/15
                  <br>
                  <a href="https://keflavich.github.io/blog/pointing-cross-correlation-yet-again.html">Pointing & Cross-Correlation yet again</a>
              </li>
              <li class="post">
                  2012/11/21
                  <br>
                  <a href="https://keflavich.github.io/blog/the-peculiar-balmer-decrement-of-sn-2009ip-constraints-on-circumstellar-geometry.html">The Peculiar Balmer Decrement of SN 2009ip: Constraints on Circumstellar Geometry</a>
              </li>
              <li class="post">
                  2012/11/21
                  <br>
                  <a href="https://keflavich.github.io/blog/galactic-h2co-densitometry-i-pilot-survey-of-ultracompact-hii-regions-and-methodology.html">Galactic H2CO Densitometry I: Pilot survey of Ultracompact HII regions and methodology</a>
              </li>
        </ul>
      </li>
    
    </ul>
  </div><!-- end #sidebar -->

  <div id="content">
<section id="content">

<ul id="post-list">
    <li><article class="hentry">
        <header> 
            <h2 class="entry-title">
                <a href="https://keflavich.github.io/blog/v061-done.html" rel="bookmark" title="Permalink to v0.6.1 done">
                    v0.6.1 done</a>
            </h2> 
        </header>
        <footer class="post-info">
            <abbr class="published" title="2008-11-21T02:42:00-07:00"> 2008/11/21 </abbr>
            <!--<address class="vcard author"><a class="url fn" href="https://keflavich.github.io/blog/author/adam-adamgginsburggmailcom.html">Adam (adam.g.ginsburg@gmail.com)</a></address>-->
        </footer><!-- /.post-info -->
        <div class="entry-content">  </div>
        <!-- /.entry-content   not article.summary--> 
    </article></li>
    <hr width=100%>
    <li><article class="hentry">
        <header> 
            <h2 class="entry-title">
                <a href="https://keflavich.github.io/blog/version-06-begun.html" rel="bookmark" title="Permalink to Version 0.6 begun">
                    Version 0.6 begun</a>
            </h2> 
        </header>
        <footer class="post-info">
            <abbr class="published" title="2008-11-19T04:52:00-07:00"> 2008/11/19 </abbr>
            <!--<address class="vcard author"><a class="url fn" href="https://keflavich.github.io/blog/author/adam-adamgginsburggmailcom.html">Adam (adam.g.ginsburg@gmail.com)</a></address>-->
        </footer><!-- /.post-info -->
        <div class="entry-content"> <p>I started on (what I hope will be) v0.6 tonight.
New things:
-Sigma-rejection flagging in the spatial domain
-Inverse-variance weighting</p>
 </div>
        <!-- /.entry-content   not article.summary--> 
    </article></li>
    <hr width=100%>
    <li><article class="hentry">
        <header> 
            <h2 class="entry-title">
                <a href="https://keflavich.github.io/blog/mad-flagger.html" rel="bookmark" title="Permalink to MAD flagger">
                    MAD flagger</a>
            </h2> 
        </header>
        <footer class="post-info">
            <abbr class="published" title="2008-11-19T04:50:00-07:00"> 2008/11/19 </abbr>
            <!--<address class="vcard author"><a class="url fn" href="https://keflavich.github.io/blog/author/adam-adamgginsburggmailcom.html">Adam (adam.g.ginsburg@gmail.com)</a></address>-->
        </footer><!-- /.post-info -->
        <div class="entry-content"> <pre class="literal-block">
; The Mad Flagger; Flag based on the median average deviation within a spatial pixelfunction mad_flagger,data,inds,flags,nsig=nsig    t = systime(/sec)    f0 = total(where(flags))    if n_e(nsig) eq 0 then nsig = 3            newflags = flags    mx=max(inds)    vec3=fltarr(mx+1)    h=histogram(inds,reverse_indices=ri,OMIN=om)    for j=0L,n_elements(h)-1 do begin        if ri[j+1] gt ri[j] then begin            v_inds = [ri[ri[j]:ri[j+1]-1]]            if n_e(v_inds) gt 2 then begin                vec = data[v_inds];                vecmad = mad(vec)  ; the MAD is WAY too small!  I ended up rejecting 8% of points!                vecmad = stddev(vec)                vecmed = median(vec,/even)                madreject = where( (vec gt vecmed + nsig*vecmad) or (vec lt vecmed - nsig*vecmad) )                if (n_e(madreject) gt 0 and total(madreject)) gt 0 then begin                    reject_inds = v_inds[madreject]                    newflags[reject_inds] = 1                endif             endif        endif    endfor    print,&quot;MAD flagger took &quot;,strc(systime(/sec)-t),&quot; seconds and flagged &quot;,$        strc(round(total(where(newflags)) - f0)),' points'    return,newflagsend
</pre>
 </div>
        <!-- /.entry-content   not article.summary--> 
    </article></li>
    <hr width=100%>
    <li><article class="hentry">
        <header> 
            <h2 class="entry-title">
                <a href="https://keflavich.github.io/blog/median-drizzling.html" rel="bookmark" title="Permalink to Median drizzling">
                    Median drizzling</a>
            </h2> 
        </header>
        <footer class="post-info">
            <abbr class="published" title="2008-11-18T16:11:00-07:00"> 2008/11/18 </abbr>
            <!--<address class="vcard author"><a class="url fn" href="https://keflavich.github.io/blog/author/adam-adamgginsburggmailcom.html">Adam (adam.g.ginsburg@gmail.com)</a></address>-->
        </footer><!-- /.post-info -->
        <div class="entry-content"> <p><a class="reference external" href="http://groups.google.com/group/comp.lang.idl-pvwave/browse_thread/thread/762770933591238d">http://groups.google.com/group/comp.lang.idl-pvwave/browse_thread/thread/762770933591238d</a>
Someone going by the name 'wox' introduced me to a spectacularly simple
drizzling algorithm for medianing. It will be a little less efficient
because it can't take advantage of some 'partial sum' tricks that the
average can, but it will median over ALL data points, which is an
advantage.</p>
 </div>
        <!-- /.entry-content   not article.summary--> 
    </article></li>
    <hr width=100%>
    <li><article class="hentry">
        <header> 
            <h2 class="entry-title">
                <a href="https://keflavich.github.io/blog/massive-upgrades-new-strategy.html" rel="bookmark" title="Permalink to Massive upgrades, new strategy?">
                    Massive upgrades, new strategy?</a>
            </h2> 
        </header>
        <footer class="post-info">
            <abbr class="published" title="2008-11-18T04:01:00-07:00"> 2008/11/18 </abbr>
            <!--<address class="vcard author"><a class="url fn" href="https://keflavich.github.io/blog/author/adam-adamgginsburggmailcom.html">Adam (adam.g.ginsburg@gmail.com)</a></address>-->
        </footer><!-- /.post-info -->
        <div class="entry-content"> <p>A few major things today:</p>
<blockquote>
<p>#. I renamed 'ts_to_map' to 'drizzle' and made 'ts_to_map' a wrapper
that will either median combine by scans (if passed the right keywords,
i.e. tstomapmedian and scans_info). This will reject cosmic rays much
more effectively than previously.
#. My extensive test runs on the 'weird' fields completed. Conclusions:</p>
<blockquote>
<ul class="simple">
<li><dl class="first docutils">
<dt>Deconvolution is DEFINITELY responsibly for the weird fuzzy effects</dt>
<dd>seen esp. in l=33, l=2.</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Even a descending iterator is ineffective at alleviating this</dt>
<dd>problem
What I still don't understand is WHY the deconvolver is behaving badly
for some regions. It is extracting peaks that are too high.</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Not deconvolving works pretty well, so I'm not really concerned. I'm</dt>
<dd>resetting the defaults to no deconvolution once my next test is done....</dd>
</dl>
</li>
</ul>
</blockquote>
<ol class="arabic simple">
<li>Started up a new test run to compare median stacking with weighted
average stacking</li>
</ol>
</blockquote>
 </div>
        <!-- /.entry-content   not article.summary--> 
    </article></li>
    <hr width=100%>
    <li><article class="hentry">
        <header> 
            <h2 class="entry-title">
                <a href="https://keflavich.github.io/blog/5x1.html" rel="bookmark" title="Permalink to 5x1?">
                    5x1?</a>
            </h2> 
        </header>
        <footer class="post-info">
            <abbr class="published" title="2008-11-17T16:32:00-07:00"> 2008/11/17 </abbr>
            <!--<address class="vcard author"><a class="url fn" href="https://keflavich.github.io/blog/author/adam-adamgginsburggmailcom.html">Adam (adam.g.ginsburg@gmail.com)</a></address>-->
        </footer><!-- /.post-info -->
        <div class="entry-content"> <p>060609_o17 is weird looking. It appears to be TWO 3x1s with an overlap,
but it's only 1 observation. Any idea what happened?</p>
 </div>
        <!-- /.entry-content   not article.summary--> 
    </article></li>
    <hr width=100%>
    <li><article class="hentry">
        <header> 
            <h2 class="entry-title">
                <a href="https://keflavich.github.io/blog/weighting-next-steps.html" rel="bookmark" title="Permalink to Weighting - next steps">
                    Weighting - next steps</a>
            </h2> 
        </header>
        <footer class="post-info">
            <abbr class="published" title="2008-11-15T01:04:00-07:00"> 2008/11/15 </abbr>
            <!--<address class="vcard author"><a class="url fn" href="https://keflavich.github.io/blog/author/adam-adamgginsburggmailcom.html">Adam (adam.g.ginsburg@gmail.com)</a></address>-->
        </footer><!-- /.post-info -->
        <div class="entry-content"> <p>Idea: 'edge taper' for scans. The scan start/end usually has higher
noise, so it would be good to downweight those regions slightly.
Probably only the first/last 5% of each scan should be linearly
downweighted.
I'm running a lot of tests on l001 with/without deconvolution, lots of
iterations, different pca components. They'll be done sometime tomorrow.</p>
 </div>
        <!-- /.entry-content   not article.summary--> 
    </article></li>
    <hr width=100%>
    <li><article class="hentry">
        <header> 
            <h2 class="entry-title">
                <a href="https://keflavich.github.io/blog/weighting-and-high-frequency-noise.html" rel="bookmark" title="Permalink to Weighting and high-frequency noise">
                    Weighting and high-frequency noise</a>
            </h2> 
        </header>
        <footer class="post-info">
            <abbr class="published" title="2008-11-15T00:41:00-07:00"> 2008/11/15 </abbr>
            <!--<address class="vcard author"><a class="url fn" href="https://keflavich.github.io/blog/author/adam-adamgginsburggmailcom.html">Adam (adam.g.ginsburg@gmail.com)</a></address>-->
        </footer><!-- /.post-info -->
        <div class="entry-content"> <img alt="" src="http://1.bp.blogspot.com/_lsgW26mWZnU/SR4DzVCz1WI/AAAAAAAADfk/cJ70OPeqEzg/s400/psds.png" />
<p>Image of PSDs (with no normalization) of the raw (blue), delined and
exponential and polynomial subtracted (white), the noise timestream
(yellow), and the data (cyan).
The good: It looks like all of the powerline noise got into the noise
timestream and almost none in the data.
The bad: weighting is based on the noise timestream so it's possible
that the weights aren't quite right as a result
The weird: the data PSD. What's up with that? Apparently I'm
preferentially subtracting certain scales but I don't know why, unless
deconvolution is at fault.
Edit/Update: The deconvolution is definitely at fault. Here's the same
scan done without deconvolution:</p>
<img alt="" src="http://3.bp.blogspot.com/_lsgW26mWZnU/SR4ZM6FPfrI/AAAAAAAADf0/baHOQwedeqs/s400/psds2.png" />
<p>It should have been obvious; the cyan in the first plot is the PSD of
the deconvolution straight up, and that should have no high-frequency
structure...</p>
 </div>
        <!-- /.entry-content   not article.summary--> 
    </article></li>
    <hr width=100%>
    <li><article class="hentry">
        <header> 
            <h2 class="entry-title">
                <a href="https://keflavich.github.io/blog/paragraph-for-the-methods-paper.html" rel="bookmark" title="Permalink to Paragraph for the methods paper">
                    Paragraph for the methods paper</a>
            </h2> 
        </header>
        <footer class="post-info">
            <abbr class="published" title="2008-11-15T00:25:00-07:00"> 2008/11/15 </abbr>
            <!--<address class="vcard author"><a class="url fn" href="https://keflavich.github.io/blog/author/adam-adamgginsburggmailcom.html">Adam (adam.g.ginsburg@gmail.com)</a></address>-->
        </footer><!-- /.post-info -->
        <div class="entry-content"> <p>The raw data from Bolocam contains noise components from the atmosphere
and instrument in addition to the astrophysical signal. To remove the
atmospheric noise, an iterative approach was required.</p>
<ol class="arabic simple">
<li>The median across all bolometers is subtracted</li>
<li>A set number of principle components are subtracted. The principle
components are the most correlated components between bolometers. In
this process both the atmosphere above the telescope - which is
assumed to be constant across the field of view - and any large-scale
astrophysical structure are removed.</li>
<li>The timestream data is mapped into the plane of the sky. Data points
are mapped to the nearest pixel. 7.2&quot; pixels are used so that
sampling is better than Nyquist.</li>
<li>The map is deconvolved using a maximum entropy deconvolution
algorithm ( Based on paper by Hollis, Dorband, Yusef-Zadeh, Ap.J.
Feb.1992, written by Frank Varosi at NASA/GSFC 1992)</li>
<li>The deconvolved map is returned to a timestream and subtracted from
the original to yield a noise-only timestream.</li>
<li>Power spectral densities are calculated for each scan in the noise
timestream, and weights are calculated from these. [At the moment,
the weights are actually inverse-variance]</li>
<li>The deconvolved map timestream is subtracted from the raw timestream,
and then steps 1-6 are repeated on that timestream to recover flux
that was oversubtracted in the first iteration.</li>
</ol>
<p>Convergence takes ???? iterations....
??? PCA components are subtracted [default 13]...</p>
 </div>
        <!-- /.entry-content   not article.summary--> 
    </article></li>
    <hr width=100%>
    <li><article class="hentry">
        <header> 
            <h2 class="entry-title">
                <a href="https://keflavich.github.io/blog/rewriting-pipeline-again.html" rel="bookmark" title="Permalink to Rewriting pipeline again">
                    Rewriting pipeline again</a>
            </h2> 
        </header>
        <footer class="post-info">
            <abbr class="published" title="2008-11-14T20:42:00-07:00"> 2008/11/14 </abbr>
            <!--<address class="vcard author"><a class="url fn" href="https://keflavich.github.io/blog/author/adam-adamgginsburggmailcom.html">Adam (adam.g.ginsburg@gmail.com)</a></address>-->
        </footer><!-- /.post-info -->
        <div class="entry-content"> <p>Not entirely, but I realized my code had become... clunky, at best.
I'm rewriting the wrappers using structs. I HATE IDL structs, but
they're necessary.... if only they would make them dynamically
modifiable.
Weighting worked to some degree, the mapping is pretty much done.</p>
 </div>
        <!-- /.entry-content   not article.summary--> 
    </article></li>
    <hr width=100%>
</ul><!-- /#posts-list -->
<p class="paginator">
            <a href="https://keflavich.github.io/blog/tag/googlepost28.html">&laquo;</a>
    Page 29 / 36
        <a href="https://keflavich.github.io/blog/tag/googlepost30.html">&raquo;</a>
</p>
</section><!-- /#content -->
  </div>

    <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-37306139-1']);
    _gaq.push(['_trackPageview']);
    (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();

    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-37306139-1');
    ga('send', 'pageview');
</script>
<script type="text/javascript">
  var disqus_shortname = 'adamginsburgsblog';
  (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
   })();
</script>
</body>
</html>
