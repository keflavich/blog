<!DOCTYPE html>
<html lang="en">
<link rel="stylesheet" type="text/css" href="https://keflavich.github.io/blog/theme/css/style.css" />
<link rel="icon" type="image/gif" href="https://keflavich.github.io/blog/theme/favicon8.ico">
<head>
    <base href="https://keflavich.github.io/blog">
        <title>Adam Ginsburg's blog</title>
        <meta charset="utf-8" />
        <link href="https://keflavich.github.io/blog/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="Adam Ginsburg's blog Full Atom Feed" />
<!-- Using MathJax, with the delimiters $ -->
<!-- Conflict with pygments for the .mo and .mi -->
<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
    "HTML-CSS": {
    styles: {
    ".MathJax .mo, .MathJax .mi": {color: "inherit !important"}},
    'div.typeset': { 'text-align': 'left'}
    },
    tex2jax: {inlineMath: [['$','$'], ['\\(','\\)']],processEscapes: true}
    });
    TeX: {
        extensions: ["AMSmath.js", "AMSsymbols.js"]
    }
    MathJax.Hub.Register.StartupHook("HTML-CSS Jax Ready",function () {
    var VARIANT = MathJax.OutputJax["HTML-CSS"].FONTDATA.VARIANT;
    VARIANT["normal"].fonts.unshift("MathJax_SansSerif");
    VARIANT["bold"].fonts.unshift("MathJax_SansSerif-bold");
    VARIANT["italic"].fonts.unshift("MathJax_SansSerif-italic");
    VARIANT["-tex-mathit"].fonts.unshift("MathJax_SansSerif-italic");
    });
    MathJax.Hub.Register.StartupHook("SVG Jax Ready",function () {
    var VARIANT = MathJax.OutputJax.SVG.FONTDATA.VARIANT;
    VARIANT["normal"].fonts.unshift("MathJax_SansSerif");
    VARIANT["bold"].fonts.unshift("MathJax_SansSerif-bold");
    VARIANT["italic"].fonts.unshift("MathJax_SansSerif-italic");
    VARIANT["-tex-mathit"].fonts.unshift("MathJax_SansSerif-italic");
    });
</script>

<script type="text/javascript"
src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS_HTML">
</script>
        
</head>

<body id="base" class="home">


    <header id="banner" class="body" >
        <div id="header" style='background-image: url("https://keflavich.github.io/blog/images/GC_4096sq_bolo.png"); background-position:left; min-heigt: 200px;  background-repeat: no-repeat; max-width: 80%;'>
            <h1 style="color: #C4C4C4;"><a class="header" href="https://keflavich.github.io/blog">Adam Ginsburg's blog <strong></strong></a></h1>

            <nav id="menu"><ul id="menulist">
                <li><a href="https://www.adamgginsburg.com">Homepage</a></li>
                <li><a href="/index.html">Blog Index</a></li>
                <li><a href="/category/bgps.html">BGPS Blog</a></li>
                <li><a href="/category/publications.html">Publications</a></li>
                <li><a href="/archives.html">Archives</a></li>
                <li><a href="/tags.html">Tags</a></li>
            </ul></nav><!-- /#menu -->
        </div>
    </header><!-- /#banner -->

  <div id="sidebar">
    <ul>
      <li>
        <h3 id='recent_header'>Recent Posts</h3>
        <ul>
              <li class="post">
                  2025/03/15
                  <br>
                  <a href="https://keflavich.github.io/blog/pushing-to-a-pull-request.html">Pushing to a pull request</a>
              </li>
              <li class="post">
                  2023/08/11
                  <br>
                  <a href="https://keflavich.github.io/blog/editing-metadata-in-measurement-sets.html">Editing metadata in measurement sets</a>
              </li>
              <li class="post">
                  2022/05/06
                  <br>
                  <a href="https://keflavich.github.io/blog/casa-mpi-debugging-contd.html">CASA MPI debugging cont'd</a>
              </li>
              <li class="post">
                  2022/05/01
                  <br>
                  <a href="https://keflavich.github.io/blog/co2-monitoring-at-conferences-update-in-2022.html">CO2 Monitoring at Conferences: Update in 2022</a>
              </li>
              <li class="post">
                  2022/04/14
                  <br>
                  <a href="https://keflavich.github.io/blog/alma-cycle-9-corrupted-zip-fix.html">ALMA Cycle 9 corrupted zip fix</a>
              </li>
        </ul>
      </li>
    
    </ul>
  </div><!-- end #sidebar -->

  <div id="content">
<section id="content">

<ul id="post-list">
    <li><article class="hentry">
        <header> 
            <h2 class="entry-title">
                <a href="https://keflavich.github.io/blog/arecibo-mapping-total-power-measurements.html" rel="bookmark" title="Permalink to Arecibo Mapping: Total Power Measurements">
                    Arecibo Mapping: Total Power Measurements</a>
            </h2> 
        </header>
        <footer class="post-info">
            <abbr class="published" title="2013-03-22T22:50:00-06:00"> 2013/03/22 </abbr>
            <!--<address class="vcard author"><a class="url fn" href="https://keflavich.github.io/blog/author/adam-keflavichgmailcom.html">Adam (keflavich@gmail.com)</a></address>-->
        </footer><!-- /.post-info -->
        <div class="entry-content"> <p>Worked on reducing the Arecibo continuum data.  There were some serious
problems with the off positions previously, in particular generating weird
slopes.</p>
<p>I suspect the problem was with these lines</p>
<!-- this is really IDL but there's no pygment for IDL -->
<div class="highlight"><pre><span></span><span class="n">sorted1</span> <span class="o">=</span> <span class="n">sort</span><span class="p">(</span><span class="n">totals</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="o">-</span><span class="mi">1</span><span class="p">:</span><span class="mi">2</span><span class="p">])</span>
<span class="n">sorted2</span> <span class="o">=</span> <span class="n">sort</span><span class="p">(</span><span class="n">totals</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="o">-</span><span class="mi">1</span><span class="p">:</span><span class="mi">2</span><span class="p">])</span>
</pre></div>
<p>since the indexing is wrong, but I'm not sure yet.  I re-wrote the whole
off-position measurement to average over all scans.  Still in progress, but the
fitting works now. Here's an example:</p>
<div class="figure">
<img alt="" src="static/images/total_vs_integnum.png" style="width: 800px;" />
</div>
 </div>
        <!-- /.entry-content   not article.summary--> 
    </article></li>
    <hr width=100%>
    <li><article class="hentry">
        <header> 
            <h2 class="entry-title">
                <a href="https://keflavich.github.io/blog/jeans-mass.html" rel="bookmark" title="Permalink to Jeans Mass">
                    Jeans Mass</a>
            </h2> 
        </header>
        <footer class="post-info">
            <abbr class="published" title="2013-03-12T20:16:00-06:00"> 2013/03/12 </abbr>
            <!--<address class="vcard author"><a class="url fn" href="https://keflavich.github.io/blog/author/adam-keflavichgmailcom.html">Adam (keflavich@gmail.com)</a></address>-->
        </footer><!-- /.post-info -->
        <div class="entry-content"> <p>Some notes about the Jeans mass scale using astropy's units.</p>
<p>Simple approaches to determining mass scales:</p>
<div class="math">
\begin{equation*}
v_{esc} = \sqrt{\frac{G M}{R}}
\end{equation*}
</div>
<p>Isothermal equation of state:</p>
<div class="math">
\begin{equation*}
P = \rho k T
\end{equation*}
</div>
<div class="math">
\begin{equation*}
c_s = \sqrt{2 k T / m}
\end{equation*}
</div>
<p>Setting <span class="math">\(v_{esc} = c_s\)</span> yields the mass scale:</p>
<div class="math">
\begin{equation*}
M = \frac{R}{G}  \frac{2 k T}{m} = \frac{R c_s^2}{G}
\end{equation*}
</div>
<p>Using <span class="math">\(\rho = \frac{M}{ 4/3 \pi R^{3} }\)</span>,</p>
<div class="math">
\begin{equation*}
R = \left(\frac{M}{4/3 \pi \rho}\right)^{1/3}
\end{equation*}
</div>
<p>so</p>
<div class="math">
\begin{equation*}
M = M^{1/3} \frac{c_s^2}{G \rho^{1/3}}
\end{equation*}
</div>
<p>which rearranges to</p>
<div class="math">
\begin{equation*}
M = \frac{c_s^{3}}{G^{3/2} \rho^{1/2}}
\end{equation*}
</div>
<p>where <span class="math">\(M\)</span> is now <span class="math">\(M_J\)</span>, the Jeans mass. In terms of
temperature, this is:</p>
<div class="math">
\begin{equation*}
M_J = \frac{(2 k T)^{3/2}}{(m G)^{3/2} \rho^{1/2}}
\end{equation*}
</div>
<p>where <span class="math">\(m\)</span> is the particle mass, usually assumed to be 2.8 amu. (actually,
2.8 is for mass per H$_2$ particle, it should really be 2.3 amu)</p>
<p>In[1]:</p>
<div class="highlight"><pre><span></span><span class="c1"># astropy imports</span>
<span class="kn">import</span> <span class="nn">astropy.units</span> <span class="k">as</span> <span class="nn">u</span>
<span class="kn">import</span> <span class="nn">astropy.constants</span> <span class="k">as</span> <span class="nn">c</span>
<span class="c1"># turn off verbose but unnecessary information</span>
<span class="kn">import</span> <span class="nn">warnings</span>
<span class="n">warnings</span><span class="o">.</span><span class="n">filterwarnings</span><span class="p">(</span><span class="s1">&#39;ignore&#39;</span><span class="p">)</span>
<span class="n">warnings</span><span class="o">.</span><span class="n">filterwarnings</span><span class="p">(</span><span class="s1">&#39;ignore&#39;</span><span class="p">,</span> <span class="n">category</span><span class="o">=</span><span class="n">u</span><span class="o">.</span><span class="n">UnitsWarning</span><span class="p">,</span> <span class="n">append</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
<pre class="literal-block">
WARNING: ConfigurationDefaultMissingWarning: Requested default
configuration file /Users/adam/repos/astropy/astropy/astropy.cfg is not a
file. Cannot install default profile. If you are importing from source,
this is expected. [astropy]
</pre>
<p>In[7]:</p>
<div class="highlight"><pre><span></span><span class="n">amu</span> <span class="o">=</span> <span class="n">c</span><span class="o">.</span><span class="n">m_p</span>
<span class="n">temperature</span> <span class="o">=</span> <span class="mi">10</span> <span class="o">*</span> <span class="n">u</span><span class="o">.</span><span class="n">K</span>
<span class="n">m</span> <span class="o">=</span> <span class="p">(((</span><span class="mi">2</span> <span class="o">*</span> <span class="n">c</span><span class="o">.</span><span class="n">k_B</span> <span class="o">*</span> <span class="n">temperature</span><span class="p">)</span><span class="o">**</span><span class="mf">1.5</span> <span class="o">/</span> <span class="p">((</span><span class="mf">2.8</span><span class="o">*</span><span class="n">c</span><span class="o">.</span><span class="n">m_p</span><span class="o">*</span><span class="n">c</span><span class="o">.</span><span class="n">G</span><span class="p">)</span><span class="o">**</span><span class="mf">1.5</span> <span class="o">*</span> <span class="p">(</span><span class="mf">2.8</span><span class="o">*</span><span class="mf">1e4</span><span class="o">*</span><span class="n">amu</span> <span class="o">/</span> <span class="n">u</span><span class="o">.</span><span class="n">cm</span><span class="o">**</span><span class="mi">3</span><span class="p">)</span><span class="o">**</span><span class="p">(</span><span class="mi">1</span><span class="o">/</span><span class="mf">2.</span><span class="p">))))</span><span class="o">.</span><span class="n">cgs</span>
</pre></div>
<p>In[5]:</p>
<div class="highlight"><pre><span></span><span class="n">m</span><span class="o">.</span><span class="n">to</span><span class="p">(</span><span class="n">u</span><span class="o">.</span><span class="n">solMass</span><span class="p">)</span>
</pre></div>
<p>Out[5]:</p>
<div class="math">
\begin{equation*}
1.92903 \mathrm{M_{\odot}}
\end{equation*}
</div>
<pre class="literal-block">
&lt;Quantity 1.92902547696 solMass&gt;
</pre>
<script type='text/javascript'>if (!document.getElementById('mathjaxscript_pelican_#%@#$@#')) {
    var align = "center",
        indent = "0em",
        linebreak = "false";

    if (false) {
        align = (screen.width < 768) ? "left" : align;
        indent = (screen.width < 768) ? "0em" : indent;
        linebreak = (screen.width < 768) ? 'true' : linebreak;
    }

    var mathjaxscript = document.createElement('script');
    mathjaxscript.id = 'mathjaxscript_pelican_#%@#$@#';
    mathjaxscript.type = 'text/javascript';
    mathjaxscript.src = 'https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.3/latest.js?config=TeX-AMS-MML_HTMLorMML';

    var configscript = document.createElement('script');
    configscript.type = 'text/x-mathjax-config';
    configscript[(window.opera ? "innerHTML" : "text")] =
        "MathJax.Hub.Config({" +
        "    config: ['MMLorHTML.js']," +
        "    TeX: { extensions: ['AMSmath.js','AMSsymbols.js','noErrors.js','noUndefined.js'], equationNumbers: { autoNumber: 'none' } }," +
        "    jax: ['input/TeX','input/MathML','output/HTML-CSS']," +
        "    extensions: ['tex2jax.js','mml2jax.js','MathMenu.js','MathZoom.js']," +
        "    displayAlign: '"+ align +"'," +
        "    displayIndent: '"+ indent +"'," +
        "    showMathMenu: true," +
        "    messageStyle: 'normal'," +
        "    tex2jax: { " +
        "        inlineMath: [ ['\\\\(','\\\\)'] ], " +
        "        displayMath: [ ['$$','$$'] ]," +
        "        processEscapes: true," +
        "        preview: 'TeX'," +
        "    }, " +
        "    'HTML-CSS': { " +
        "        availableFonts: ['STIX', 'TeX']," +
        "        preferredFont: 'STIX'," +
        "        styles: { '.MathJax_Display, .MathJax .mo, .MathJax .mi, .MathJax .mn': {color: 'inherit ! important'} }," +
        "        linebreaks: { automatic: "+ linebreak +", width: '90% container' }," +
        "    }, " +
        "}); " +
        "if ('default' !== 'default') {" +
            "MathJax.Hub.Register.StartupHook('HTML-CSS Jax Ready',function () {" +
                "var VARIANT = MathJax.OutputJax['HTML-CSS'].FONTDATA.VARIANT;" +
                "VARIANT['normal'].fonts.unshift('MathJax_default');" +
                "VARIANT['bold'].fonts.unshift('MathJax_default-bold');" +
                "VARIANT['italic'].fonts.unshift('MathJax_default-italic');" +
                "VARIANT['-tex-mathit'].fonts.unshift('MathJax_default-italic');" +
            "});" +
            "MathJax.Hub.Register.StartupHook('SVG Jax Ready',function () {" +
                "var VARIANT = MathJax.OutputJax.SVG.FONTDATA.VARIANT;" +
                "VARIANT['normal'].fonts.unshift('MathJax_default');" +
                "VARIANT['bold'].fonts.unshift('MathJax_default-bold');" +
                "VARIANT['italic'].fonts.unshift('MathJax_default-italic');" +
                "VARIANT['-tex-mathit'].fonts.unshift('MathJax_default-italic');" +
            "});" +
        "}";

    (document.body || document.getElementsByTagName('head')[0]).appendChild(configscript);
    (document.body || document.getElementsByTagName('head')[0]).appendChild(mathjaxscript);
}
</script> </div>
        <!-- /.entry-content   not article.summary--> 
    </article></li>
    <hr width=100%>
    <li><article class="hentry">
        <header> 
            <h2 class="entry-title">
                <a href="https://keflavich.github.io/blog/installing-sextractor-on-a-mac.html" rel="bookmark" title="Permalink to Installing sextractor on a mac?">
                    Installing sextractor on a mac?</a>
            </h2> 
        </header>
        <footer class="post-info">
            <abbr class="published" title="2013-02-27T18:02:00-07:00"> 2013/02/27 </abbr>
            <!--<address class="vcard author"><a class="url fn" href="https://keflavich.github.io/blog/author/adam-keflavichgmailcom.html">Adam (keflavich@gmail.com)</a></address>-->
        </footer><!-- /.post-info -->
        <div class="entry-content"> <p>Attempting to install sextractor.</p>
<p>First, tried following these instructions:</p>
<p><a class="reference external" href="http://henrysmac.org/blog/2012/8/17/install-sextractor-on-os-x-lion.html">http://henrysmac.org/blog/2012/8/17/install-sextractor-on-os-x-lion.html</a></p>
<p>Then found out that mac's tar doesn't work properly (see this note: <a class="reference external" href="http://math-atlas.sourceforge.net/atlas_install/node60.html">http://math-atlas.sourceforge.net/atlas_install/node60.html</a>)</p>
<p>Fixed that with:</p>
<div class="highlight"><pre><span></span>wget<span class="w"> </span>ftp://gnu.mirror.iweb.com/gnu/tar/tar-latest.tar.gz
<span class="nb">cd</span><span class="w"> </span>~/repos/
tar<span class="w"> </span>-xzvf<span class="w"> </span>~/Downloads/tar-latest.tar.gz<span class="w"> </span><span class="c1"># ironically</span>
<span class="nb">cd</span><span class="w"> </span>tar-1.26/
./configure
make
make<span class="w"> </span>install<span class="w"> </span><span class="c1"># fails</span>
sudo<span class="w"> </span>make<span class="w"> </span>install
<span class="nb">hash</span><span class="w"> </span>-r
</pre></div>
<p>OK, try the instructions again:</p>
<div class="highlight"><pre><span></span><span class="c1"># first command may not work... visit that link if so</span>
wget<span class="w"> </span>https://sourceforge.net/projects/math-atlas/files/latest/download?source<span class="o">=</span>files
mkdir<span class="w"> </span>~/repos/ATLAS3.10
<span class="nb">cd</span><span class="w"> </span>~/repos/ATLAS3.10
tar<span class="w"> </span>-xf<span class="w"> </span>~/Downloads/atlas3.10.1.tar<span class="w"> </span>-C<span class="w"> </span>./<span class="w"> </span>--strip-components<span class="w"> </span><span class="m">1</span>
mkdir<span class="w"> </span>build/
<span class="nb">cd</span><span class="w"> </span>build/
../configure<span class="w"> </span>-b<span class="w"> </span><span class="m">64</span><span class="w"> </span>--shared<span class="w"> </span>--prefix<span class="o">=</span>/usr/local/lib/atlas<span class="w"> </span>--with-netlib-lapack-tarfile<span class="o">=</span>/Users/adam/Downloads/lapack-3.4.2.tar
make<span class="w"> </span>build
</pre></div>
<p>Died with errors:</p>
<pre class="literal-block">
ar r /Users/adam/repos/ATLAS3.10/build/lib/libatlas.a ATL_dMBJBmm.o
    ATL_dIBNBmm.o ATL_dIBJBmm.o ATL_dgemm.o ATL_dGetNB.o ATL_dGetNCNB.o
    ATL_dgemmNN.o ATL_dgemmNT.o ATL_dgemmTN.o ATL_dgemmTT.o ATL_dNCmmIJK.o
    ATL_dNCmmJIK.o ATL_dNCmmIJK_c.o ATL_dNCmmJIK_c.o ATL_daliased_gemm.o
    ATL_dAgemmNN.o ATL_dAgemmNT.o ATL_dAgemmTN.o ATL_dAgemmTT.o ATL_dmmJIK.o
    ATL_dmmIJK.o ATL_dmmJKI.o ATL_dmmK.o ATL_dmmBPP.o ATL_dmmJITcp.o
    ATL_dcol2blk_aX.o ATL_drow2blkT_aX.o ATL_dcol2blk_a1.o ATL_drow2blkT_a1.o
    ATL_dputblk_bX.o ATL_dputblk_b1.o ATL_dputblk_bn1.o ATL_dputblk_b0.o
ar: fatal error in /usr/bin/ranlib
make[4]: *** [dlib.grd] Error 1
make[3]: *** [dlib] Error 2
make[2]: *** [IBuildPtlibs] Error 2
   DONE  STAGE 4-2-1 at 23:09


   BEGIN STAGE 4-3-0: LAPACK TUNING at 23:09


      BEGIN STAGE 4-3-1: dLAPACK TUNING at 23:09
make -f Makefile IBuildPtlibs 2&gt;&amp;1 | ./xatlas_tee INSTALL_LOG/LIBPTBUILD.LOG
if [ -s &quot;/Users/adam/repos/ATLAS3.10/build/include/atlas_dGetNB_geqrf.h&quot; ]; then \
           echo &quot;Arch Defaults allow us to skip tuning&quot; ; \
        else \
        cd /Users/adam/repos/ATLAS3.10/build/tune/lapack ; make res/ATL_dGetNB_geqrf.h ; \
        cp /Users/adam/repos/ATLAS3.10/build/tune/lapack/res/ATL_dGetNB_geqrf.h \
               /Users/adam/repos/ATLAS3.10/build/include/atlas_dGetNB_geqrf.h ; \
        fi
Arch Defaults allow us to skip tuning
if [ -s &quot;/Users/adam/repos/ATLAS3.10/build/include/atlas_dtGetNB_geqrf.h&quot; ]; then \
           echo &quot;Arch Defaults allow us to skip threaded tuning&quot; ; \
        elif [ -s &quot;/Users/adam/repos/ATLAS3.10/build/include/atlas_pthreads.h&quot; ]; then \
        cd /Users/adam/repos/ATLAS3.10/build/tune/lapack ; make res/ATL_dtGetNB_geqrf.h ; \
        cp /Users/adam/repos/ATLAS3.10/build/tune/lapack/res/ATL_dtGetNB_geqrf.h \
               /Users/adam/repos/ATLAS3.10/build/include/atlas_dtGetNB_geqrf.h ; \
        fi
Arch Defaults allow us to skip threaded tuning
      DONE  STAGE 4-3-1 at 23:09


      BEGIN STAGE 4-3-2: sLAPACK TUNING at 23:09
make -f Makefile ILATune pre=d 2&gt;&amp;1 | ./xatlas_tee INSTALL_LOG/dLATUNE.LOG
if [ -s &quot;/Users/adam/repos/ATLAS3.10/build/include/atlas_sGetNB_geqrf.h&quot; ]; then \
           echo &quot;Arch Defaults allow us to skip tuning&quot; ; \
        else \
        cd /Users/adam/repos/ATLAS3.10/build/tune/lapack ; make res/ATL_sGetNB_geqrf.h ; \
        cp /Users/adam/repos/ATLAS3.10/build/tune/lapack/res/ATL_sGetNB_geqrf.h \
               /Users/adam/repos/ATLAS3.10/build/include/atlas_sGetNB_geqrf.h ; \
        fi
Arch Defaults allow us to skip tuning
if [ -s &quot;/Users/adam/repos/ATLAS3.10/build/include/atlas_stGetNB_geqrf.h&quot; ]; then \
           echo &quot;Arch Defaults allow us to skip threaded tuning&quot; ; \
        elif [ -s &quot;/Users/adam/repos/ATLAS3.10/build/include/atlas_pthreads.h&quot; ]; then \
        cd /Users/adam/repos/ATLAS3.10/build/tune/lapack ; make res/ATL_stGetNB_geqrf.h ; \
        cp /Users/adam/repos/ATLAS3.10/build/tune/lapack/res/ATL_stGetNB_geqrf.h \
               /Users/adam/repos/ATLAS3.10/build/include/atlas_stGetNB_geqrf.h ; \
        fi
Arch Defaults allow us to skip threaded tuning
      DONE  STAGE 4-3-2 at 23:09


      BEGIN STAGE 4-3-3: zLAPACK TUNING at 23:09
make -f Makefile ILATune pre=s 2&gt;&amp;1 | ./xatlas_tee INSTALL_LOG/sLATUNE.LOG
if [ -s &quot;/Users/adam/repos/ATLAS3.10/build/include/atlas_zGetNB_geqrf.h&quot; ]; then \
           echo &quot;Arch Defaults allow us to skip tuning&quot; ; \
        else \
        cd /Users/adam/repos/ATLAS3.10/build/tune/lapack ; make res/ATL_zGetNB_geqrf.h ; \
        cp /Users/adam/repos/ATLAS3.10/build/tune/lapack/res/ATL_zGetNB_geqrf.h \
               /Users/adam/repos/ATLAS3.10/build/include/atlas_zGetNB_geqrf.h ; \
        fi
Arch Defaults allow us to skip tuning
if [ -s &quot;/Users/adam/repos/ATLAS3.10/build/include/atlas_ztGetNB_geqrf.h&quot; ]; then \
           echo &quot;Arch Defaults allow us to skip threaded tuning&quot; ; \
        elif [ -s &quot;/Users/adam/repos/ATLAS3.10/build/include/atlas_pthreads.h&quot; ]; then \
        cd /Users/adam/repos/ATLAS3.10/build/tune/lapack ; make res/ATL_ztGetNB_geqrf.h ; \
        cp /Users/adam/repos/ATLAS3.10/build/tune/lapack/res/ATL_ztGetNB_geqrf.h \
               /Users/adam/repos/ATLAS3.10/build/include/atlas_ztGetNB_geqrf.h ; \
        fi
Arch Defaults allow us to skip threaded tuning
      DONE  STAGE 4-3-3 at 23:09


      BEGIN STAGE 4-3-4: cLAPACK TUNING at 23:09
make -f Makefile ILATune pre=z 2&gt;&amp;1 | ./xatlas_tee INSTALL_LOG/zLATUNE.LOG
if [ -s &quot;/Users/adam/repos/ATLAS3.10/build/include/atlas_cGetNB_geqrf.h&quot; ]; then \
           echo &quot;Arch Defaults allow us to skip tuning&quot; ; \
        else \
        cd /Users/adam/repos/ATLAS3.10/build/tune/lapack ; make res/ATL_cGetNB_geqrf.h ; \
        cp /Users/adam/repos/ATLAS3.10/build/tune/lapack/res/ATL_cGetNB_geqrf.h \
               /Users/adam/repos/ATLAS3.10/build/include/atlas_cGetNB_geqrf.h ; \
        fi
Arch Defaults allow us to skip tuning
if [ -s &quot;/Users/adam/repos/ATLAS3.10/build/include/atlas_ctGetNB_geqrf.h&quot; ]; then \
           echo &quot;Arch Defaults allow us to skip threaded tuning&quot; ; \
        elif [ -s &quot;/Users/adam/repos/ATLAS3.10/build/include/atlas_pthreads.h&quot; ]; then \
        cd /Users/adam/repos/ATLAS3.10/build/tune/lapack ; make res/ATL_ctGetNB_geqrf.h ; \
        cp /Users/adam/repos/ATLAS3.10/build/tune/lapack/res/ATL_ctGetNB_geqrf.h \
               /Users/adam/repos/ATLAS3.10/build/include/atlas_ctGetNB_geqrf.h ; \
        fi
Arch Defaults allow us to skip threaded tuning
      DONE  STAGE 4-3-4 at 23:09
   DONE  STAGE 4-3-0 at 23:09
DONE  STAGE 4-0-0 at 23:09


BEGIN STAGE 5-0-0: FINAL LIBRARY UPDATE at 23:09


   BEGIN STAGE 5-1-0: FINAL STATIC LIBRARY UPDATE at 23:09
make -f Makefile IBuildLibs IBuildPtlibs0 2&gt;&amp;1 | ./xatlas_tee INSTALL_LOG/LIBUPDATE.LOG
cd /Users/adam/repos/ATLAS3.10/build/src/auxil ; make lib
make[3]: Nothing to be done for `lib'.
cd /Users/adam/repos/ATLAS3.10/build/src/blas/gemm ; make lib
make auxillib dcleanuplib dusergemm
cd /Users/adam/repos/ATLAS3.10/build/src/auxil ; make lib
make[5]: Nothing to be done for `lib'.
cd KERNEL ; make -f dMakefile dlib
make[5]: Nothing to be done for `dlib'.
make[4]: Nothing to be done for `dusergemm'.
make -j 4 dlib.grd
ar r /Users/adam/repos/ATLAS3.10/build/lib/libatlas.a ATL_dMBJBmm.o
    ATL_dIBNBmm.o ATL_dIBJBmm.o ATL_dgemm.o ATL_dGetNB.o ATL_dGetNCNB.o
    ATL_dgemmNN.o ATL_dgemmNT.o ATL_dgemmTN.o ATL_dgemmTT.o ATL_dNCmmIJK.o
    ATL_dNCmmJIK.o ATL_dNCmmIJK_c.o ATL_dNCmmJIK_c.o ATL_daliased_gemm.o
    ATL_dAgemmNN.o ATL_dAgemmNT.o ATL_dAgemmTN.o ATL_dAgemmTT.o ATL_dmmJIK.o
    ATL_dmmIJK.o ATL_dmmJKI.o ATL_dmmK.o ATL_dmmBPP.o ATL_dmmJITcp.o
    ATL_dcol2blk_aX.o ATL_drow2blkT_aX.o ATL_dcol2blk_a1.o ATL_drow2blkT_a1.o
    ATL_dputblk_bX.o ATL_dputblk_b1.o ATL_dputblk_bn1.o ATL_dputblk_b0.o
ar: fatal error in /usr/bin/ranlib
make[4]: *** [dlib.grd] Error 1
make[3]: *** [dlib] Error 2
make[2]: *** [IBuildLibs] Error 2
   DONE  STAGE 5-1-0 at 23:09


   BEGIN STAGE 5-2-0: DYNAMIC/SHARED LIBRARY UPDATE at 23:09
make -f Makefile IBuildDyLibs 2&gt;&amp;1 | ./xatlas_tee INSTALL_LOG/LIBDYBUILD.LOG
cd /Users/adam/repos/ATLAS3.10/build ; make dylibs
cd lib ; make shared_all
make dylib
rm -rf RCW_tMp ; mkdir RCW_tMp
cd RCW_tMp ; ar x ../liblapack.a
ar: ../liblapack.a: No such file or directory
make[5]: *** [dylib] Error 1
make[4]: *** [shared_all] Error 2
make[3]: *** [dylibs] Error 2
make[2]: *** [IBuildDyLibs] Error 2
   DONE  STAGE 5-2-0 at 23:09




ATLAS install complete.  Examine
ATLAS/bin/&lt;arch&gt;/INSTALL_LOG/SUMMARY.LOG for details.
make clean
rm -rf *.dSYM
rm -f *.o x* config?.out *core*



make check

Died with errors:

ar r /Users/adam/repos/ATLAS3.10/build/lib/libatlas.a ATL_sMBJBmm.o
    ATL_sIBNBmm.o ATL_sIBJBmm.o ATL_sgemm.o ATL_sGetNB.o ATL_sGetNCNB.o
    ATL_sgemmNN.o ATL_sgemmNT.o ATL_sgemmTN.o ATL_sgemmTT.o ATL_sNCmmIJK.o
    ATL_sNCmmJIK.o ATL_sNCmmIJK_c.o ATL_sNCmmJIK_c.o ATL_saliased_gemm.o
    ATL_sAgemmNN.o ATL_sAgemmNT.o ATL_sAgemmTN.o ATL_sAgemmTT.o ATL_smmJIK.o
    ATL_smmIJK.o ATL_smmJKI.o ATL_smmK.o ATL_smmBPP.o ATL_smmJITcp.o
    ATL_scol2blk_aX.o ATL_srow2blkT_aX.o ATL_scol2blk_a1.o ATL_srow2blkT_a1.o
    ATL_sputblk_bX.o ATL_sputblk_b1.o ATL_sputblk_bn1.o ATL_sputblk_b0.o
ranlib /Users/adam/repos/ATLAS3.10/build/lib/libatlas.a
touch slib.grd
cd /Users/adam/repos/ATLAS3.10/build/src/blas/level3 ; make slib
( cd kernel; make slib )
make -j 4 slib.grd
make[6]: `slib.grd' is up to date.
make sl3ref
cd /Users/adam/repos/ATLAS3.10/build/src/blas/reference/level3 ; make slib
make[7]: Nothing to be done for `slib'.
( cd rblas;  make slib )
make[5]: Nothing to be done for `slib'.
cd ../pklevel3 ; make slib
cd gpmm ; make slib
make -j 4 slib.grd
make[7]: `slib.grd' is up to date.
cd sprk ; make slib
make -j 4 slib.grd
make[7]: `slib.grd' is up to date.
make -j 4 sblas3.grd
ar r /Users/adam/repos/ATLAS3.10/build/lib/libatlas.a ATL_ssymm.o ATL_ssyr2k.o ATL_ssyrk.o ATL_strmm.o ATL_strsm.o
ar: fatal error in /usr/bin/ranlib
make[5]: *** [sblas3.grd] Error 1
make[4]: *** [sblas3] Error 2
make[3]: *** [sl3lib] Error 2
make[2]: *** [sanity_test] Error 2
make[1]: *** [sanity_test] Error 2
make: *** [test] Error 2
</pre>
<p>Gave up after discovering this is an unsolved (and probably intrinsically unsolveable) problem:
<a class="reference external" href="http://fink.9193.n7.nabble.com/Atlas-STAGE-2-3-2-CacheEdge-DETECTION-error-td26004.html">http://fink.9193.n7.nabble.com/Atlas-STAGE-2-3-2-CacheEdge-DETECTION-error-td26004.html</a></p>
<p>maybe try this:
<a class="reference external" href="http://okomestudio.net/biboroku/?p=824">http://okomestudio.net/biboroku/?p=824</a></p>
<p>nope, same thing</p>
<p>Tried switching from gcc-4.6 to gcc-4.2 (the latter should have been the default anyway).
Even when I renamed gcc-4.6 to dontuse_gcc-4.6, specified CC=/usr/bin/gcc, still found gcc-4.6!</p>
<p>So I moved /usr/local/bin/gcc-4.6 to /usr/local/bin/dontuse/.gcc-4.6
Ridiculous.</p>
<p>Then tried what the site actually said, and used the hpc binaries:</p>
<pre class="literal-block">
wget http://prdownloads.sourceforge.net/hpc/gfortran-lion.tar.gz?download
wget http://prdownloads.sourceforge.net/hpc/gcc-lion.tar.gz?download
mkdir ~/repos/hpc
tar -xzf ~/Downloads/gcc-lion.tar.gz -C ~/repos/hpc/ --strip-components 2
tar -xzf ~/Downloads/gfortran-lion.tar.gz -C ~/repos/hpc/ --strip-components 2

CC=/Users/adam/repos/hpc/bin/gcc PATH=/Users/adam/repos/hpc/bin:$PATH
    ../configure -b 64 --shared --prefix=/usr/local/lib/atlas
    --with-netlib-lapack-tarfile=/Users/adam/Downloads/lapack-3.4.2.tar


ar r /Users/adam/repos/ATLAS3.10/build/lib/libatlas.a ATL_dMBJBmm.o
    ATL_dIBNBmm.o ATL_dIBJBmm.o ATL_dgemm.o ATL_dGetNB.o ATL_dGetNCNB.o
    ATL_dgemmNN.o ATL_dgemmNT.o ATL_dgemmTN.o ATL_dgemmTT.o ATL_dNCmmIJK.o
    ATL_dNCmmJIK.o ATL_dNCmmIJK_c.o ATL_dNCmmJIK_c.o ATL_daliased_gemm.o
    ATL_dAgemmNN.o ATL_dAgemmNT.o ATL_dAgemmTN.o ATL_dAgemmTT.o ATL_dmmJIK.o
    ATL_dmmIJK.o ATL_dmmJKI.o ATL_dmmK.o ATL_dmmBPP.o ATL_dmmJITcp.o
    ATL_dcol2blk_aX.o ATL_drow2blkT_aX.o ATL_dcol2blk_a1.o ATL_drow2blkT_a1.o
    ATL_dputblk_bX.o ATL_dputblk_b1.o ATL_dputblk_bn1.o ATL_dputblk_b0.o
ar: fatal error in /usr/bin/ranlib
make[4]: *** [dlib.grd] Error 1
make[3]: *** [dlib] Error 2
make[2]: *** [IBuildPtlibs] Error 2
   DONE  STAGE 4-2-1 at 18:09


   BEGIN STAGE 4-3-0: LAPACK TUNING at 18:09


      BEGIN STAGE 4-3-1: dLAPACK TUNING at 18:09
make -f Makefile IBuildPtlibs 2&gt;&amp;1 | ./xatlas_tee INSTALL_LOG/LIBPTBUILD.LOG
if [ -s &quot;/Users/adam/repos/ATLAS3.10/build/include/atlas_dGetNB_geqrf.h&quot; ]; then \
           echo &quot;Arch Defaults allow us to skip tuning&quot; ; \
        else \
        cd /Users/adam/repos/ATLAS3.10/build/tune/lapack ; make res/ATL_dGetNB_geqrf.h ; \
        cp /Users/adam/repos/ATLAS3.10/build/tune/lapack/res/ATL_dGetNB_geqrf.h \
               /Users/adam/repos/ATLAS3.10/build/include/atlas_dGetNB_geqrf.h ; \
        fi
Arch Defaults allow us to skip tuning
if [ -s &quot;/Users/adam/repos/ATLAS3.10/build/include/atlas_dtGetNB_geqrf.h&quot; ]; then \
           echo &quot;Arch Defaults allow us to skip threaded tuning&quot; ; \
        elif [ -s &quot;/Users/adam/repos/ATLAS3.10/build/include/atlas_pthreads.h&quot; ]; then \
        cd /Users/adam/repos/ATLAS3.10/build/tune/lapack ; make res/ATL_dtGetNB_geqrf.h ; \
        cp /Users/adam/repos/ATLAS3.10/build/tune/lapack/res/ATL_dtGetNB_geqrf.h \
               /Users/adam/repos/ATLAS3.10/build/include/atlas_dtGetNB_geqrf.h ; \
        fi
Arch Defaults allow us to skip threaded tuning
      DONE  STAGE 4-3-1 at 18:09


      BEGIN STAGE 4-3-2: sLAPACK TUNING at 18:09
make -f Makefile ILATune pre=d 2&gt;&amp;1 | ./xatlas_tee INSTALL_LOG/dLATUNE.LOG
if [ -s &quot;/Users/adam/repos/ATLAS3.10/build/include/atlas_sGetNB_geqrf.h&quot; ]; then \
           echo &quot;Arch Defaults allow us to skip tuning&quot; ; \
        else \
        cd /Users/adam/repos/ATLAS3.10/build/tune/lapack ; make res/ATL_sGetNB_geqrf.h ; \
        cp /Users/adam/repos/ATLAS3.10/build/tune/lapack/res/ATL_sGetNB_geqrf.h \
               /Users/adam/repos/ATLAS3.10/build/include/atlas_sGetNB_geqrf.h ; \
        fi
Arch Defaults allow us to skip tuning
if [ -s &quot;/Users/adam/repos/ATLAS3.10/build/include/atlas_stGetNB_geqrf.h&quot; ]; then \
           echo &quot;Arch Defaults allow us to skip threaded tuning&quot; ; \
        elif [ -s &quot;/Users/adam/repos/ATLAS3.10/build/include/atlas_pthreads.h&quot; ]; then \
        cd /Users/adam/repos/ATLAS3.10/build/tune/lapack ; make res/ATL_stGetNB_geqrf.h ; \
        cp /Users/adam/repos/ATLAS3.10/build/tune/lapack/res/ATL_stGetNB_geqrf.h \
               /Users/adam/repos/ATLAS3.10/build/include/atlas_stGetNB_geqrf.h ; \
        fi
Arch Defaults allow us to skip threaded tuning
      DONE  STAGE 4-3-2 at 18:09


      BEGIN STAGE 4-3-3: zLAPACK TUNING at 18:09
make -f Makefile ILATune pre=s 2&gt;&amp;1 | ./xatlas_tee INSTALL_LOG/sLATUNE.LOG
if [ -s &quot;/Users/adam/repos/ATLAS3.10/build/include/atlas_zGetNB_geqrf.h&quot; ]; then \
           echo &quot;Arch Defaults allow us to skip tuning&quot; ; \
        else \
        cd /Users/adam/repos/ATLAS3.10/build/tune/lapack ; make res/ATL_zGetNB_geqrf.h ; \
        cp /Users/adam/repos/ATLAS3.10/build/tune/lapack/res/ATL_zGetNB_geqrf.h \
               /Users/adam/repos/ATLAS3.10/build/include/atlas_zGetNB_geqrf.h ; \
        fi
Arch Defaults allow us to skip tuning
if [ -s &quot;/Users/adam/repos/ATLAS3.10/build/include/atlas_ztGetNB_geqrf.h&quot; ]; then \
           echo &quot;Arch Defaults allow us to skip threaded tuning&quot; ; \
        elif [ -s &quot;/Users/adam/repos/ATLAS3.10/build/include/atlas_pthreads.h&quot; ]; then \
        cd /Users/adam/repos/ATLAS3.10/build/tune/lapack ; make res/ATL_ztGetNB_geqrf.h ; \
        cp /Users/adam/repos/ATLAS3.10/build/tune/lapack/res/ATL_ztGetNB_geqrf.h \
               /Users/adam/repos/ATLAS3.10/build/include/atlas_ztGetNB_geqrf.h ; \
        fi
Arch Defaults allow us to skip threaded tuning
      DONE  STAGE 4-3-3 at 18:09


      BEGIN STAGE 4-3-4: cLAPACK TUNING at 18:09
make -f Makefile ILATune pre=z 2&gt;&amp;1 | ./xatlas_tee INSTALL_LOG/zLATUNE.LOG
if [ -s &quot;/Users/adam/repos/ATLAS3.10/build/include/atlas_cGetNB_geqrf.h&quot; ]; then \
           echo &quot;Arch Defaults allow us to skip tuning&quot; ; \
        else \
        cd /Users/adam/repos/ATLAS3.10/build/tune/lapack ; make res/ATL_cGetNB_geqrf.h ; \
        cp /Users/adam/repos/ATLAS3.10/build/tune/lapack/res/ATL_cGetNB_geqrf.h \
               /Users/adam/repos/ATLAS3.10/build/include/atlas_cGetNB_geqrf.h ; \
        fi
Arch Defaults allow us to skip tuning
if [ -s &quot;/Users/adam/repos/ATLAS3.10/build/include/atlas_ctGetNB_geqrf.h&quot; ]; then \
           echo &quot;Arch Defaults allow us to skip threaded tuning&quot; ; \
        elif [ -s &quot;/Users/adam/repos/ATLAS3.10/build/include/atlas_pthreads.h&quot; ]; then \
        cd /Users/adam/repos/ATLAS3.10/build/tune/lapack ; make res/ATL_ctGetNB_geqrf.h ; \
        cp /Users/adam/repos/ATLAS3.10/build/tune/lapack/res/ATL_ctGetNB_geqrf.h \
               /Users/adam/repos/ATLAS3.10/build/include/atlas_ctGetNB_geqrf.h ; \
        fi
Arch Defaults allow us to skip threaded tuning
      DONE  STAGE 4-3-4 at 18:09
   DONE  STAGE 4-3-0 at 18:09
DONE  STAGE 4-0-0 at 18:09


BEGIN STAGE 5-0-0: FINAL LIBRARY UPDATE at 18:09


   BEGIN STAGE 5-1-0: FINAL STATIC LIBRARY UPDATE at 18:09
make -f Makefile IBuildLibs IBuildPtlibs0 2&gt;&amp;1 | ./xatlas_tee INSTALL_LOG/LIBUPDATE.LOG
cd /Users/adam/repos/ATLAS3.10/build/src/auxil ; make lib
make[3]: Nothing to be done for `lib'.
cd /Users/adam/repos/ATLAS3.10/build/src/blas/gemm ; make lib
make auxillib dcleanuplib dusergemm
cd /Users/adam/repos/ATLAS3.10/build/src/auxil ; make lib
make[5]: Nothing to be done for `lib'.
cd KERNEL ; make -f dMakefile dlib
make[5]: Nothing to be done for `dlib'.
make[4]: Nothing to be done for `dusergemm'.
make -j 4 dlib.grd
ar r /Users/adam/repos/ATLAS3.10/build/lib/libatlas.a ATL_dMBJBmm.o
    ATL_dIBNBmm.o ATL_dIBJBmm.o ATL_dgemm.o ATL_dGetNB.o ATL_dGetNCNB.o
    ATL_dgemmNN.o ATL_dgemmNT.o ATL_dgemmTN.o ATL_dgemmTT.o ATL_dNCmmIJK.o
    ATL_dNCmmJIK.o ATL_dNCmmIJK_c.o ATL_dNCmmJIK_c.o ATL_daliased_gemm.o
    ATL_dAgemmNN.o ATL_dAgemmNT.o ATL_dAgemmTN.o ATL_dAgemmTT.o ATL_dmmJIK.o
    ATL_dmmIJK.o ATL_dmmJKI.o ATL_dmmK.o ATL_dmmBPP.o ATL_dmmJITcp.o
    ATL_dcol2blk_aX.o ATL_drow2blkT_aX.o ATL_dcol2blk_a1.o ATL_drow2blkT_a1.o
    ATL_dputblk_bX.o ATL_dputblk_b1.o ATL_dputblk_bn1.o ATL_dputblk_b0.o
ar: fatal error in /usr/bin/ranlib
make[4]: *** [dlib.grd] Error 1
make[3]: *** [dlib] Error 2
make[2]: *** [IBuildLibs] Error 2
   DONE  STAGE 5-1-0 at 18:09


   BEGIN STAGE 5-2-0: DYNAMIC/SHARED LIBRARY UPDATE at 18:09
make -f Makefile IBuildDyLibs 2&gt;&amp;1 | ./xatlas_tee INSTALL_LOG/LIBDYBUILD.LOG
cd /Users/adam/repos/ATLAS3.10/build ; make dylibs
cd lib ; make shared_all
make dylib
rm -rf RCW_tMp ; mkdir RCW_tMp
cd RCW_tMp ; ar x ../liblapack.a
ar: ../liblapack.a: No such file or directory
make[5]: *** [dylib] Error 1
make[4]: *** [shared_all] Error 2
make[3]: *** [dylibs] Error 2
make[2]: *** [IBuildDyLibs] Error 2
   DONE  STAGE 5-2-0 at 18:09




ATLAS install complete.  Examine
ATLAS/bin/&lt;arch&gt;/INSTALL_LOG/SUMMARY.LOG for details.
make clean
rm -rf *.dSYM
rm -f *.o x* config?.out *core*
</pre>
<p>This is the next step, if I ever get there:</p>
<pre class="literal-block">
wget http://www.astromatic.net/download/sextractor/sextractor-2.8.6.tar.gz
tar -xzvf ~/Downloads/sextractor-2.8.6.tar.gz
</pre>
 </div>
        <!-- /.entry-content   not article.summary--> 
    </article></li>
    <hr width=100%>
    <li><article class="hentry">
        <header> 
            <h2 class="entry-title">
                <a href="https://keflavich.github.io/blog/catalog-vs-image-shift-a-possible-solution-to-the-atlasgal-issue.html" rel="bookmark" title="Permalink to Catalog vs Image shift? A possible solution to the ATLASGAL issue">
                    Catalog vs Image shift?  A possible solution to the ATLASGAL issue</a>
            </h2> 
        </header>
        <footer class="post-info">
            <abbr class="published" title="2012-12-26T23:02:00-07:00"> 2012/12/26 </abbr>
            <!--<address class="vcard author"><a class="url fn" href="https://keflavich.github.io/blog/author/adam-adamgginsburggmailcom.html">Adam (adam.g.ginsburg@gmail.com)</a></address>-->
        </footer><!-- /.post-info -->
        <div class="entry-content"> <p>In the <a class="reference external" href="http://bolocam.blogspot.com/2012/12/pointing-cross-correlation-yet-again.html">previous post</a>, I came up with a final plot showing the
pointing offset was, on average, not significant, even in the ATLASGAL
overlap zone.
So why did the ATLASGAL group infer a net pointing offset?
The problem is probably one or two fields with a slight pointing offset,
but a huge number of source. &nbsp;l=1 has an offset of the right sign and is
the single most source-rich degree in the survey, with 368 sources.</p>
<img alt="" src="http://2.bp.blogspot.com/-ONF7C_v8rNk/UNpmXIEe6HI/AAAAAAAAHUI/kdf3pmUKyE0/s320/l001_catalog_image_compare.png" />
<p>This figure shows the v1 vs v2 source locations in grey, their average
and standard deviation in green, and the cross-correlation offset in
red. &nbsp;The plot is somewhat difficult to interpret, but it appears that
the v1 point sources are systematically more shifted to negative
longitudes than v2, and the point sources more than the maps themselves.
&nbsp;There may have been some reason sources were systematically selected at
more negative longitudes in the v1 catalog; around Sgr B2 there's a lot
of structure that had to be decomposed somehow but was not necessarily
&quot;source&quot;.
One thing to note is the reversal in left-right (in pixel space) vs the
positive/negativeness in longitude. &nbsp;The above plot is correct (negative
longitudes, as shown on the plot, are &quot;right&quot; in images), but most of my
other plots have the X-axis flipped.
In the end, after spending two weeks hammering my head against this, I
find no clear evidence for an offset &nbsp;between the BGPS and Herschel or
v1/v2 data overall or in the ATLASGAL fields. &nbsp;In any individual field,
that statement is not necessarily true.
Despite the strong statistical evidence, it is really hard to be really
sure about sub-pixel offsets, since the &quot;model&quot; image is never perfect.
&nbsp;I think we can safely state the ~1/2 pixel offsets (~3&quot;) but I just
don't feel confident about numbers below that range for ALL fields.</p>
 </div>
        <!-- /.entry-content   not article.summary--> 
    </article></li>
    <hr width=100%>
    <li><article class="hentry">
        <header> 
            <h2 class="entry-title">
                <a href="https://keflavich.github.io/blog/idea-multispectral-eigenimage-decomposition.html" rel="bookmark" title="Permalink to Idea: Multispectral Eigenimage decomposition...">
                    Idea: Multispectral Eigenimage decomposition...</a>
            </h2> 
        </header>
        <footer class="post-info">
            <abbr class="published" title="2012-12-22T02:53:00-07:00"> 2012/12/22 </abbr>
            <!--<address class="vcard author"><a class="url fn" href="https://keflavich.github.io/blog/author/adam-adamgginsburggmailcom.html">Adam (adam.g.ginsburg@gmail.com)</a></address>-->
        </footer><!-- /.post-info -->
        <div class="entry-content"> <p>Can use BGPS + HiGal to look for correlated (thermal) components and
decorrelated (free-free) components. &nbsp;Obviously needs to be tried in GC
first.
Also, need to figure out a method to mitigate negative bowls in
unsharp-masking for herschel-bolocam comparison</p>
 </div>
        <!-- /.entry-content   not article.summary--> 
    </article></li>
    <hr width=100%>
    <li><article class="hentry">
        <header> 
            <h2 class="entry-title">
                <a href="https://keflavich.github.io/blog/pointing-cross-correlation-yet-again.html" rel="bookmark" title="Permalink to Pointing & Cross-Correlation yet again">
                    Pointing &amp; Cross-Correlation yet again</a>
            </h2> 
        </header>
        <footer class="post-info">
            <abbr class="published" title="2012-12-15T03:21:00-07:00"> 2012/12/15 </abbr>
            <!--<address class="vcard author"><a class="url fn" href="https://keflavich.github.io/blog/author/adam-adamgginsburggmailcom.html">Adam (adam.g.ginsburg@gmail.com)</a></address>-->
        </footer><!-- /.post-info -->
        <div class="entry-content"> <p>Prompted in part by a <a class="reference external" href="http://arxiv.org/abs/1211.0741">recent ATLASGAL paper</a>&nbsp;identifying pointing
offsets of about 3&quot; in the BGPS, we revisit the BGPS pointing.
The ATLASGAL team compared the source locations in their catalog to
source locations in the Bolocam catalog by doing &quot;nearest-match&quot;
searches within a 40&quot; radius (see their Figure 8, reproduced here)</p>
<img alt="" src="http://1.bp.blogspot.com/-UJVCzHbaDCI/UMYpeAoulVI/AAAAAAAAHR4/cy5SIqL_HFQ/s320/ATLASGALvsBolocam.png" />
<p>Their comparison was over the range -10 &lt; l &lt; 21, so it only covered a
small fraction of the BGPS. &nbsp;It covered 13 fields with independent
pointing solutions, so it's possible that they have actually discovered
an offset only in some of our fields.</p>
<p>The catalog comparison, while interesting, is potentially quite flawed.
&nbsp;There's no guarantee that a source extraction algorithm will measure
source centers accurately when a &quot;source&quot; is just a local overdensity on
a complex background. &nbsp;Using source comparison will also lead to a bias
towards the most source-rich fields, e.g. l000 and l001, so an offset in
one of those fields would drastically affect the catalog offset.</p>
<p>There is a better way to compare pointing between two images that are
expected to be (nearly) identical. &nbsp;It is well-known that
cross-correlation is an effective technique for determining the offsets
between two identical images; I'll briefly summarize some of the
literature here.</p>
<p><a class="reference external" href="http://adsabs.harvard.edu/abs/2005A%26A...443..357G">Gratadour et al 2005</a>&nbsp;used a maximum likelihood estimator approach to
determine the &quot;best-fit&quot; offset between two images. &nbsp;This approach is
comparable to <a class="reference external" href="http://www.google.com/url?sa=t&amp;rct=j&amp;q=&amp;esrc=s&amp;source=web&amp;cd=5&amp;cad=rja&amp;ved=0CF0QFjAE&amp;url=http%3A%2F%2Fwww.optics.rochester.edu%2Fworkgroups%2Ffienup%2FPUBLICATIONS%2FMGS_OL08_EffRegistration.pdf&amp;ei=rC3GUJC9CcSA2AX3wYCIAg&amp;usg=AFQjCNHdUm0v8qYzNbvrqFRqByR_3svlSA&amp;sig2=GQztgkfvoQzAzQ7kzCJU2w">Guizar et al (2008)</a>, who <a class="reference external" href="http://www.mathworks.com/matlabcentral/fileexchange/18401-efficient-subpixel-image-registration-by-cross-correlation">implemented</a> a fast solution
for (highly) sub-pixel image registration in matlab. &nbsp;In order for the
image registration to be fast, it must operate in fourier space, but to
get sub-pixel registration in fourier space, you need to either pad
(which is slow, and increases memory use drastically) or fit some
functional form around the peak of the cross-correlation image. &nbsp;The
alternative approach implemented by Guizar utilizes the <a class="reference external" href="http://en.wikipedia.org/wiki/Fourier_transform#Basic_properties">Fourier scaling
theorem</a>&nbsp;to create a zoomed-in image of the peak pixel, which allows
you to get much higher precision for a much lower computational cost.
My innovation is to use the minimum $\chi^2$ estimator to determine the
goodness of fit and therefore error bars on the best-fit offset.</p>
<p>Because the $\chi^2$ value for each offset is simply determined by
sums and multiplication ($\chi^2 = \sum
\frac{x_i-\mu_x}{\sigma_{x_i}^2}$), we can compute each term that
goes in to the $\chi^2$ value independently with fourier transforms,
then create goodness-of-fit contours around the $\chi^2$ minimum. &nbsp;The
statistical requirement for this approach to make sense is that the
errors on the data are gaussian distributed, which is an assumption we
inevitably make for astronomical images. &nbsp;I believe there is also a
requirement that the errors are independent, which may be more difficult
to satisfy, but in the Bolocam images it is satisfied, especially when
multiple independent observations are combined.</p>
<p>Strictly, this approach can only be used when the model data have the
same multiplicative scale as the fitted data. &nbsp;The peak will never be
wrong using this method, but the errors could be incorrect if the model
and data are multiplicatively offset. &nbsp;In principle, this can be
resolved in the future using a <a class="reference external" href="http://en.wikipedia.org/wiki/Mellin_transform">Mellin transform</a>&nbsp;[see <a class="reference external" href="http://ecocodespace.wordpress.com/category/matlab/image-matching/fourier-mellin-transform/">this site</a>&nbsp;or
<a class="reference external" href="http://www.mathworks.com/matlabcentral/fileexchange/authors/7667">this</a> for
a matlab approach and <a class="reference external" href="http://www.fresnel.fr/perso/derrode/publi/Cviu01.pdf">this</a> for an academic paper
on it].</p>
<p>This is the approach I have implemented
at&nbsp; <a class="reference external" href="http://image-registration.rtfd.org/">image-registration.rtfd.org</a>. &nbsp;I used simulated test cases to
demonstrate that it is, indeed, effective and accurate. &nbsp;I used this
method to measure the offsets between the v2 data and the v1 data (which
should, in principle, be the same as the offsets between ATLASGAL and
v1) and the v2 vs Herschel Hi-Gal data (which should be zero).
There are actually a few methods implemented in image-registration, and
I compared those. &nbsp;There's a &quot;dft&quot; and a &quot;$\chi^2$&quot; approach, which are
the same (except $\chi^2$ includes realistic errors), a method where a
2D gaussian is fit to the peak of the cross-correlation image, and a
method where a 2nd-order Taylor expansion is performed around the peak
of the cross-correlation image. &nbsp;The latter two are <em>biased</em>. &nbsp;An
example comparison plot looks like this:</p>
<img alt="" src="http://1.bp.blogspot.com/-LtA6owJr_vc/UMZBLK394HI/AAAAAAAAHSI/tR4F0BnFSVs/s320/l000_catalog_image_compare_chi2contours.png" />
<p>The grey dots are catalog centroid positions offsets measured between v1
and v2. &nbsp;The green cross represents the mean and standard deviation of
the grey points. &nbsp;The other data points, as labeled, show the offsets
between the l000 images in v1 and v2 as measured by the method shown.
They all have errorbars plotted, but the errorbars are generally smaller
than the points. &nbsp;The dark spot seen behind the purple point shows the
$\chi^2$ contours out to 8-$\sigma$: the error in the offset is tiny,
sub-arcsecond. &nbsp;In this case, the offsets nearly agree:</p>
<p>l000 catalog dx: &nbsp;-0.31 +/- 0.68 &nbsp; dy: 1.48 +/- 0.64</p>
<p>l000 $\chi^2$ dx: &nbsp; 1.74 +/- 0.03 &nbsp;dy: 1.41 +/- 0.03</p>
<p>This field agreed nicely between v1 and v2.</p>
<p>The comparison to Hi-Gal is perhaps more important; HiGal's pointing is
calibrated based on multi-wavelength observations, some of which include
actual stars. &nbsp;It's a space-based mission, so its pointing is more
stable. &nbsp;And finally, being a space mission, there's a large dedicated
team instead of a single, part-time individual working on the data.
Our offsets from Hi-Gal are pretty small in general, though not
trivially small.</p>
<img alt="" src="http://1.bp.blogspot.com/-JyMtqE536LY/UMaEqOYBRxI/AAAAAAAAHSY/85nEo6rEc9k/s320/Offsets_XYplot.png" />
<p>And it turns out, the region that overlaps with ATLASGAL had more
serious pointing errors than the rest of the survey:</p>
<img alt="" src="http://2.bp.blogspot.com/-iXI7TUl1y9I/UMaHHXwN2oI/AAAAAAAAHSg/z3g51NHD0zk/s320/Offsets_XYplot_ATLASGALoverlap.png" />
<p>(note: both of the above plots are missing L=359 because I forgot it.
&nbsp;Fixing that now...)</p>
<p>The clearest problem field is l=15, with a longitude offset of -6&quot;
between v2 and HiGal.... that's not the question, though. &nbsp;Somehow I've
lost the code that did the v1-HiGal offsets; I'll have to re-write that
tomorrow and let it run...</p>
<p>Update 12/13: &nbsp;I've spent the last couple days clearing up some issues
with the offsets. &nbsp;The error bars should be MUCH smaller than in the
above plots. &nbsp;The means are pretty similar, though.
Short story: the offsets between v1 and Hi-Gal are greater in the
ATLASGAL overlap regions than elsewhere, and in the right general
direction, but not quite as serious as they claimed. &nbsp;In v2, the
ATLASGAL overlap fields and the rest of the survey have the same mean
offsets, and those offsets are small (-0.5&quot; in l, -1&quot; in b).
The problem now is the table. &nbsp;If everything made sense,
(v1-v2)+(v2-higal)+(higal-v1) = 0. &nbsp;But that clearly isn't the case,
which implies an error in the method, which sucks since I'm claiming
this method is superior to alternatives. &nbsp;It's possible that I'm
actually underestimating the errors against Hi-Gal - that can be fixed
relatively easily - but the magnitude of the error won't affect the
centroid measurements. &nbsp;So I probably need to investigate one case very
carefully. &nbsp;l050 is a big problem case, with vector sums &gt;1 pixel in
both directions. &nbsp;That will be my next line of investigation.
The approach will be:
-crop identical fields within l050 from v1, v2, herschel
-perform pointing comparison between them
-check that vector sum &lt; sum of errors
I think - and hope - the trouble is just that I'm using inconsistent
sub-fields to compare Herschel with the two different Bolocam versions,
which is possible because of the way I selected these sub-fields. &nbsp;I'll
do more careful cropping, and probably re-do this analysis
degree-by-degree (with $512^2$ fields, in the hope that it speeds up the
FTs).
Update 12/14:
I've now cropped identical sections in each of the survey, 1 square
degree (512 pixels) each - which is great for speed. &nbsp;As a sidenote, a
little line profiling revealed that the make_cross_plots
&nbsp;code was the slow point in the process, and it is dominated by savefig
calls, not ffts.
I've run a careful examination of self consistency on the l=0 field,
with positive results: the offsets agree to well within the errorbars
(though there is some residual error at the 0.5&quot; level).</p>
<img alt="" src="http://1.bp.blogspot.com/--3Q9h0Q1jA4/UMuUjQ33dCI/AAAAAAAAHS4/zSD3H26r5dA/s320/circular_selfconsistency.png" />
<p>However, a similar inspection of l=50 resulted in a major failure:</p>
<img alt="" src="http://2.bp.blogspot.com/-wlwvC26eTEk/UMuYZHU179I/AAAAAAAAHTI/Csf3mBSdbGI/s320/circular_selfconsistency.png" />
<p>In this case, the problem is caused by W51 being exactly on the field
edge, leading to huge cross-correlation power at dx=0, but spread over a
large y range. &nbsp;My first thought is to try to downweight the edges,
which can be achieved by &quot;zero-padding&quot; the noise image, but with high
values instead of zero... or alternatively, by setting the edge region
to zero smoothly.</p>
<p>OK, first thought: Bad idea. &nbsp;Increasing the noise along the edges
drastically increases the small-shift autocorrelation for the noise,
which in turn ends up ruling out the small shifts as a fit possibility.
&nbsp;I don't think this really makes sense mathematically, but each step
does. &nbsp;Why would increasing the noise along the edges make the $\chi^2$
fit worse?</p>
<p>This revealed a serious bug in the code that, luckily, only affected
non-uniform error maps. &nbsp;Basically, I had decomposed the $\chi^2$
equation wrong (which is as bad as it sounds).</p>
<p>That total mess has been resolved now. &nbsp;The image edges are downweighted
with a gaussian of 12 pixels, error=100 outside and weight=0 outside
(with weight^2 inside... best to just view the source if you really want
to know the details). &nbsp;The new versions of the above diagrams:</p>
<img alt="" src="http://4.bp.blogspot.com/-mjPyO7LkbGc/UMuxVgSxwZI/AAAAAAAAHTY/ilRnJRaAiOQ/s320/circular_selfconsistency.png" />
<img alt="" src="http://3.bp.blogspot.com/-rMiHxucSQuo/UMuxZSH63fI/AAAAAAAAHTg/W_IzmhcFCzo/s320/circular_selfconsistency.png" />
<p>Less than spectacular for l=50, but acceptable given the errors, which
are indeed significantly larger, as you might expect given the lower
total signal in l=50. Now I need to re-run the fits on every field.</p>
<p>OK, cool, last thing accomplished today (...by 8pm): offset comparison
by square degree for all fields. &nbsp;Again, I don't reproduce the magnitude
of the ATLASGAL-measured offsets, but the ATLASGAL fields are, on
average, more offset in longitude (to the negative) than the overall
average.</p>
<p>Curiously, for both v1 and v2, there appears to be a -1.5 deg shift in
latitude from Hi-Gal.</p>
<p>The vector sums are mostly sub-arcsecond, with most exceptions at l&gt;50.
&nbsp;l=59,64, and 65 are particularly bad - but l=50 isn't so bad. &nbsp;So I
should do the &quot;deep&quot; examination of one or two of those fields... who
knows what new errors I'll turn up?</p>
<p>Here's the new v1-ATLASGAL offset plot:</p>
<img alt="" src="http://3.bp.blogspot.com/-iv_FsACT958/UMvsyr90haI/AAAAAAAAHTw/g56hcK6hMCw/s320/Offsets_XYplot_v1-Hi-Gal_ATLASGALoverlap.png" />
 </div>
        <!-- /.entry-content   not article.summary--> 
    </article></li>
    <hr width=100%>
    <li><article class="hentry">
        <header> 
            <h2 class="entry-title">
                <a href="https://keflavich.github.io/blog/the-peculiar-balmer-decrement-of-sn-2009ip-constraints-on-circumstellar-geometry.html" rel="bookmark" title="Permalink to The Peculiar Balmer Decrement of SN 2009ip: Constraints on Circumstellar Geometry">
                    The Peculiar Balmer Decrement of SN 2009ip: Constraints on Circumstellar Geometry</a>
            </h2> 
        </header>
        <footer class="post-info">
            <abbr class="published" title="2012-11-21T21:01:00-07:00"> 2012/11/21 </abbr>
            <!--<address class="vcard author"><a class="url fn" href="https://keflavich.github.io/blog/author/adam-keflavichgmailcom.html">Adam (keflavich@gmail.com)</a></address>-->
        </footer><!-- /.post-info -->
        <div class="entry-content"> <p><a class="reference external" href="http://arxiv.org/find/astro-ph/1/au:+Levesque_E/0/1/0/all/0/1">Emily M. Levesque</a>,&nbsp;<a class="reference external" href="http://arxiv.org/find/astro-ph/1/au:+Stringfellow_G/0/1/0/all/0/1">Guy S. Stringfellow</a>,&nbsp;<a class="reference external" href="http://arxiv.org/find/astro-ph/1/au:+Ginsburg_A/0/1/0/all/0/1">Adam G.
Ginsburg</a>,&nbsp;<a class="reference external" href="http://arxiv.org/find/astro-ph/1/au:+Bally_J/0/1/0/all/0/1">John Bally</a>,&nbsp;<a class="reference external" href="http://arxiv.org/find/astro-ph/1/au:+Keeney_B/0/1/0/all/0/1">Brian A. Keeney</a></p>
<hr class="docutils" />
<p>SN2009ip is a particularly interesting &quot;supernova&quot; since it left a
bright remnant behind, indicating that it was instead a supernova
impostor. &nbsp;The 2012B event, a brightening in late September 2012, looked
like it might be a &quot;genuine supernova&quot;, but maybe not. &nbsp;Have a look at
the other papers on this
object:&nbsp;<a class="reference external" href="http://arxiv.org/abs/1210.3568">http://arxiv.org/abs/1210.3568</a>,&nbsp;<a class="reference external" href="http://arxiv.org/abs/1210.3347">http://arxiv.org/abs/1210.3347</a>,&nbsp;<a class="reference external" href="http://arxiv.org/abs/1209.6320">http://arxiv.org/abs/1209.6320</a>.
A few folks at CU, primarily Guy, had acquired some spectra of SN2009ip
right around the 2012B event. &nbsp;We had a quick look at the data and
decided there was something really interesting in it that other groups
(who probably had more complete data) had overlooked.
The most interesting single point we noted was a peculiar &quot;Balmer
Decrement&quot; (which is the ratio of H-alpha to H-beta). &nbsp;The normal Balmer
decrement is ~3 (2.87 at n~10<sup>3</sup> and 10000K), but we observed a
decrement of ~1.4 (and so did others, see
e.g.&nbsp;<a class="reference external" href="http://users.northnet.com.au/~bohlsen/Nova/sn2009ip.htm">http://users.northnet.com.au/~bohlsen/Nova/sn2009ip.htm</a>).
This Balmer decrement is weird, because all normal effects will
<em>increase</em>&nbsp;rather than decrease the Balmer decrement.</p>
<ul class="simple">
<li>Interstellar reddening - affects the blue more than the red,
therefore should decrease H-beta relative to H-alpha. &nbsp;Of course, the
reddening towards SN2009ip has been measured to be quite low.</li>
<li>Line Splitting due to optical depth in the H-beta line (photons
become &quot;trapped&quot; in the n=4 state and &quot;escape&quot; via Paschen-alpha and
H-alpha) - but this only serves to decrease H-beta and increase
H-alpha. &nbsp;This is known as &quot;Case C recombination&quot; (see <a class="reference external" href="http://adsabs.harvard.edu/abs/1992ApJ...386..181X">Xu et al
1992</a>, Figure 1)</li>
</ul>
<p>So what can increase the Balmer decrement? &nbsp;Two possibilities:</p>
<ol class="arabic simple">
<li>Hydrogen reaches local densities above 10<sup>13</sup> cm<sup>-3</sup>:
above these densities, it reaches collisional equilibrium with the
gas and adopts the gas temperature. &nbsp;At 10000K, H-beta will be a few
times brighter than H-alpha [to-do: put exactly how much brighter...]</li>
<li>H-alpha becomes optically thick, while H-beta remains optically thin.
&nbsp;This is essentially a geometric argument, and is explored a little
in the text. &nbsp;If H-alpha becomes optically thick, more hydrogen won't
increase the H-alpha brightness, but if H-beta remains optically
thin, more hydrogen will increase its brightness. &nbsp;Simple argument,
and it hasn't been fully explored yet (does the radiative transfer
work, or does the &quot;Case-C&quot; situation kick in too hard first?), but it
is a plausible alternative.</li>
</ol>
<p>If you want to see my calculations in action, check out the <a class="reference external" href="http://nbviewer.ipython.org/urls/raw.github.com/keflavich/sn2009ip/master/SN2009ip.ipynb">ipython
notebook</a>&nbsp;performing the calculations.
In case you're interested in Case C recombination, here's a first step:
a hydrogen level diagram with levels connected by the (sum of the)
Einstein A values between the relevant levels
(from&nbsp;<a class="reference external" href="http://physics.nist.gov/cgi-bin/ASD/lines1.pl">http://physics.nist.gov/cgi-bin/ASD/lines1.pl</a>, generated
with&nbsp;<a class="reference external" href="https://github.com/keflavich/energyleveldiagrams">https://github.com/keflavich/energyleveldiagrams</a>).</p>
<img alt="" src="http://1.bp.blogspot.com/-L1C1rEu7cSQ/UK1A2KuTwcI/AAAAAAAAHRo/49TKIW0TChQ/s640/EnergyLevelDiagram.png" />
 </div>
        <!-- /.entry-content   not article.summary--> 
    </article></li>
    <hr width=100%>
    <li><article class="hentry">
        <header> 
            <h2 class="entry-title">
                <a href="https://keflavich.github.io/blog/galactic-h2co-densitometry-i-pilot-survey-of-ultracompact-hii-regions-and-methodology.html" rel="bookmark" title="Permalink to Galactic H2CO Densitometry I: Pilot survey of Ultracompact HII regions and methodology">
                    Galactic H2CO Densitometry I: Pilot survey of Ultracompact HII regions and methodology</a>
            </h2> 
        </header>
        <footer class="post-info">
            <abbr class="published" title="2012-11-21T04:59:00-07:00"> 2012/11/21 </abbr>
            <!--<address class="vcard author"><a class="url fn" href="https://keflavich.github.io/blog/author/adam-keflavichgmailcom.html">Adam (keflavich@gmail.com)</a></address>-->
        </footer><!-- /.post-info -->
        <div class="entry-content"> <p><em>First Author</em> [ <a class="reference external" href="http://adsabs.harvard.edu/abs/2011ApJ...736..149G">ADS</a> ] [ <a class="reference external" href="http://eta.colorado.edu/papers/h2co_pilot_draft0607.pdf">Full Version</a> ]</p>
<hr class="docutils" />
<p>We examined 24 UCHII regions using the GBT to observe the 2-2 line of
ortho-Formaldehyde. We measured the local gas density and compared to
GMCs and other galaxies. We found densities in GMCs that are 1-2 orders
of magnitude higher than the mean density in GMCs, implying that extreme
overdensities are common even in &quot;quiescent&quot; (non-star-forming) GMCs.
This work was almost entirely my own, but was seeded by <a class="reference external" href="http://casa.colorado.edu/~jdarling/">Jeremy
Darling</a> Some highlight figures from the paper:</p>
<img alt="" src="http://1.bp.blogspot.com/-2FeB2dq7tXE/UGMxy17g_NI/AAAAAAAAHQQ/Ugswqn154-4/s400/G32.80%252B0.19_both.png" />
<p>A sample spectrum. On the top, black is Formaldehyde 1-1, red is
Formaldehyde 2-2. On the bottom, blue is 13CO, red is H77α, black is
H110α.</p>
<img alt="" src="http://3.bp.blogspot.com/-B9zbOPROYn4/UGMxzZSsz9I/AAAAAAAAHQc/tQ_NVJNiVTE/s400/DensityHistogram.png" />
<p>Histograms of GMC mean densities and the densities measured directly
from our survey. Note that even for &quot;serendipitious&quot; line of sight GMCs,
the densities are MUCH higher than typical GMC densities.</p>
<img alt="" src="http://4.bp.blogspot.com/-jfspjzvR6Tc/UGMxz8-7dEI/AAAAAAAAHQo/chH7rwVuyhs/s400/Derived_DensityVsColumn_ExgalCompare_all_colored.png" />
<p>Comparison of the measured column densities of formaldehyde and inferred
number densities of H<sub>2</sub>.</p>
 </div>
        <!-- /.entry-content   not article.summary--> 
    </article></li>
    <hr width=100%>
    <li><article class="hentry">
        <header> 
            <h2 class="entry-title">
                <a href="https://keflavich.github.io/blog/short-timescale-variability-in-orion-nope.html" rel="bookmark" title="Permalink to Short timescale variability in Orion? Nope.">
                    Short timescale variability in Orion?  Nope.</a>
            </h2> 
        </header>
        <footer class="post-info">
            <abbr class="published" title="2012-11-19T17:07:00-07:00"> 2012/11/19 </abbr>
            <!--<address class="vcard author"><a class="url fn" href="https://keflavich.github.io/blog/author/adam-keflavichgmailcom.html">Adam (keflavich@gmail.com)</a></address>-->
        </footer><!-- /.post-info -->
        <div class="entry-content"> <div dir="ltr" style="text-align: left;"><p>I attempted to use TripleSpec finder / guider images to search for
variability &nbsp;on short (~5s) timescales in the Orion Nebula region. &nbsp;This
project was an offshoot of the related
<a class="reference external" href="http://adamginsburg.blogspot.com/2012/10/using-guider-images-to-achieve.html">http://adamginsburg.blogspot.com/2012/10/using-guider-images-to-achieve.html</a>.
&nbsp;I successfully matched the images using a particular catalog &amp; the
ever-cool&nbsp;<a class="reference external" href="http://astrometry.net/">astrometry.net</a>with a great deal of assistance from
<a class="reference external" href="http://www.astro.princeton.edu/~dstn/">Dustin Lang</a>&nbsp;and some from <a class="reference external" href="http://hoggresearch.blogspot.com/2012/10/time-for-astrometrynet-to-rise-again.html">David Hogg</a>. &nbsp;I'll post details of that
process later; it proved challenging but will DEFINITELY be useful again
in the future. &nbsp;Short story: I had to build my own indices, then fit
twice - once for the first match, once after distortion was applied to
re-extract the sources in the right location.
Conveniently, one of the products output by the astrometry.net code is
ra,dec locations and fluxes (background subtracted) for all of the
identified sources. &nbsp;So, I used a simple script to match all sources
within 2&quot; of a known source from my input catalog and generate
timestream data. &nbsp;It took about an hour of processing (nested for loops
- awful, but the only obvious choice at first. &nbsp;Half of the time was
probably file IO anyway).
I now had a few hundred timestreams of Orion stars. &nbsp;At this point, I
hadn't done any kind of quality control, which was obviously a problem
because the Trapezium and neighbors were clearly saturated. &nbsp;Also, there
are known hot pixels that will drive some stars into weird behavior.
&nbsp;But I ignored all of that. &nbsp;All I did for quality control was reject
stars with more than about 5% missing data.
I elected to go straight for PCA analysis. &nbsp;I assumed the primary
component (the most correlated component) would be from the atmosphere,
which is almost certainly true. &nbsp;Subtracting that off (shown in the
notebook linked below) left some clearly correlated components left over
- some of these are instrumental, others are correlated backgrounds,
others are correlated saturation levels. &nbsp;I don't honestly know what all
of the components are, but I DO know that correlated components are very
unlikely to be intrinsic phenomena - stellar brightness isn't
correlated.
So I tried to cut out ALL correlated components. &nbsp;However, I think in
the process I probably removed any useful information - even
un-correlated signal should probably have a high amplitude (if it's
interesting...) that will get removed through the process I used.
&nbsp;Nonetheless, I probably have some upper limits on the 5s scale
variability of these stars in K-band. &nbsp;Not enough to do anything like
asteroseismology, but it was worth a day's effort.
Here's the ipython notebook (gist &amp; nbviewer) for those interested:
<a class="reference external" href="https://gist.github.com/4109329">https://gist.github.com/4109329</a>
<a class="reference external" href="http://nbviewer.ipython.org/4109329/">http://nbviewer.ipython.org/4109329/</a></p>
</div></p> </div>
        <!-- /.entry-content   not article.summary--> 
    </article></li>
    <hr width=100%>
    <li><article class="hentry">
        <header> 
            <h2 class="entry-title">
                <a href="https://keflavich.github.io/blog/attempts-to-install-astrometrynet-comment-on-problems-with-index-files-generation.html" rel="bookmark" title="Permalink to Attempts to install astrometry.net (comment on problems-with-index-files-generation)">
                    Attempts to install astrometry.net (comment on problems-with-index-files-generation)</a>
            </h2> 
        </header>
        <footer class="post-info">
            <abbr class="published" title="2012-11-04T17:26:00-07:00"> 2012/11/04 </abbr>
            <!--<address class="vcard author"><a class="url fn" href="https://keflavich.github.io/blog/author/adam.html">Adam</a></address>-->
        </footer><!-- /.post-info -->
        <div class="entry-content"> <p>Some progress in this vein:
1. installed astrometry.net (but without some graphical extras)
2. figured out how to create indexes! Finders are ~5x5', so based on
<a class="reference external" href="http://forum.astrometry.net/index.php?p=/discussion/2/problems-with-index-files-generation/p1">this post</a> I want to use ~2-3' healpixes.
3. I also should be using denser catalogs than the all-sky USNO B1,
especially for infrared targets.
So, here's a sample build command (using a CDS-based FITS table, but
modified by me using atpy):
build-index -v -i OMC1_optical_phot_DaRio.fits -o
OMC1_optical_phot_DaRio_astrometryindex -N 1758</p>
 </div>
        <!-- /.entry-content   not article.summary--> 
    </article></li>
    <hr width=100%>
</ul><!-- /#posts-list -->
<p class="paginator">
            <a href="https://keflavich.github.io/blog/index13.html">&laquo;</a>
    Page 14 / 51
        <a href="https://keflavich.github.io/blog/index15.html">&raquo;</a>
</p>
</section><!-- /#content -->
  </div>

    <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-37306139-1']);
    _gaq.push(['_trackPageview']);
    (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();

    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-37306139-1');
    ga('send', 'pageview');
</script>
<script type="text/javascript">
  var disqus_shortname = 'adamginsburgsblog';
  (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
   })();
</script>
</body>
</html>
