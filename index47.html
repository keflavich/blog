<!DOCTYPE html>
<html lang="en">
<link rel="stylesheet" type="text/css" href="https://keflavich.github.io/blog/theme/css/style.css" />
<link rel="icon" type="image/gif" href="https://keflavich.github.io/blog/theme/favicon8.ico">
<head>
    <base href="https://keflavich.github.io/blog">
        <title>Adam Ginsburg's blog</title>
        <meta charset="utf-8" />
        <link href="https://keflavich.github.io/blog/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="Adam Ginsburg's blog Full Atom Feed" />
<!-- Using MathJax, with the delimiters $ -->
<!-- Conflict with pygments for the .mo and .mi -->
<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
    "HTML-CSS": {
    styles: {
    ".MathJax .mo, .MathJax .mi": {color: "inherit !important"}},
    'div.typeset': { 'text-align': 'left'}
    },
    tex2jax: {inlineMath: [['$','$'], ['\\(','\\)']],processEscapes: true}
    });
    TeX: {
        extensions: ["AMSmath.js", "AMSsymbols.js"]
    }
    MathJax.Hub.Register.StartupHook("HTML-CSS Jax Ready",function () {
    var VARIANT = MathJax.OutputJax["HTML-CSS"].FONTDATA.VARIANT;
    VARIANT["normal"].fonts.unshift("MathJax_SansSerif");
    VARIANT["bold"].fonts.unshift("MathJax_SansSerif-bold");
    VARIANT["italic"].fonts.unshift("MathJax_SansSerif-italic");
    VARIANT["-tex-mathit"].fonts.unshift("MathJax_SansSerif-italic");
    });
    MathJax.Hub.Register.StartupHook("SVG Jax Ready",function () {
    var VARIANT = MathJax.OutputJax.SVG.FONTDATA.VARIANT;
    VARIANT["normal"].fonts.unshift("MathJax_SansSerif");
    VARIANT["bold"].fonts.unshift("MathJax_SansSerif-bold");
    VARIANT["italic"].fonts.unshift("MathJax_SansSerif-italic");
    VARIANT["-tex-mathit"].fonts.unshift("MathJax_SansSerif-italic");
    });
</script>

<script type="text/javascript"
src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS_HTML">
</script>
        
</head>

<body id="base" class="home">


    <header id="banner" class="body" >
        <div id="header" style='background-image: url("https://keflavich.github.io/blog/images/GC_4096sq_bolo.png"); background-position:left; min-heigt: 200px;  background-repeat: no-repeat; max-width: 80%;'>
            <h1 style="color: #C4C4C4;"><a class="header" href="https://keflavich.github.io/blog">Adam Ginsburg's blog <strong></strong></a></h1>

            <nav id="menu"><ul id="menulist">
                <li><a href="https://www.adamgginsburg.com">Homepage</a></li>
                <li><a href="/index.html">Blog Index</a></li>
                <li><a href="/category/bgps.html">BGPS Blog</a></li>
                <li><a href="/category/publications.html">Publications</a></li>
                <li><a href="/archives.html">Archives</a></li>
                <li><a href="/tags.html">Tags</a></li>
            </ul></nav><!-- /#menu -->
        </div>
    </header><!-- /#banner -->

  <div id="sidebar">
    <ul>
      <li>
        <h3 id='recent_header'>Recent Posts</h3>
        <ul>
              <li class="post">
                  2025/03/15
                  <br>
                  <a href="https://keflavich.github.io/blog/pushing-to-a-pull-request.html">Pushing to a pull request</a>
              </li>
              <li class="post">
                  2023/08/11
                  <br>
                  <a href="https://keflavich.github.io/blog/editing-metadata-in-measurement-sets.html">Editing metadata in measurement sets</a>
              </li>
              <li class="post">
                  2022/05/06
                  <br>
                  <a href="https://keflavich.github.io/blog/casa-mpi-debugging-contd.html">CASA MPI debugging cont'd</a>
              </li>
              <li class="post">
                  2022/05/01
                  <br>
                  <a href="https://keflavich.github.io/blog/co2-monitoring-at-conferences-update-in-2022.html">CO2 Monitoring at Conferences: Update in 2022</a>
              </li>
              <li class="post">
                  2022/04/14
                  <br>
                  <a href="https://keflavich.github.io/blog/alma-cycle-9-corrupted-zip-fix.html">ALMA Cycle 9 corrupted zip fix</a>
              </li>
        </ul>
      </li>
    
    </ul>
  </div><!-- end #sidebar -->

  <div id="content">
<section id="content">

<ul id="post-list">
    <li><article class="hentry">
        <header> 
            <h2 class="entry-title">
                <a href="https://keflavich.github.io/blog/non-greedy-vim.html" rel="bookmark" title="Permalink to Non-greedy vim">
                    Non-greedy vim</a>
            </h2> 
        </header>
        <footer class="post-info">
            <abbr class="published" title="2008-09-05T01:12:00-06:00"> 2008/09/05 </abbr>
            <!--<address class="vcard author"><a class="url fn" href="https://keflavich.github.io/blog/author/adam.html">Adam</a></address>-->
        </footer><!-- /.post-info -->
        <div class="entry-content"> <p>To make .* in VIM be non-greedy (i.e. match just <tt class="docutils literal">&lt;a href=x&gt;</tt> out of <tt class="docutils literal">&quot;&lt;a href=x&gt; &lt;/a&gt;&quot;</tt>), use:</p>
<pre class="literal-block">
.\{-}
</pre>
 </div>
        <!-- /.entry-content   not article.summary--> 
    </article></li>
    <hr width=100%>
    <li><article class="hentry">
        <header> 
            <h2 class="entry-title">
                <a href="https://keflavich.github.io/blog/pointing-model-success.html" rel="bookmark" title="Permalink to Pointing model success">
                    Pointing model success</a>
            </h2> 
        </header>
        <footer class="post-info">
            <abbr class="published" title="2008-09-02T15:11:00-06:00"> 2008/09/02 </abbr>
            <!--<address class="vcard author"><a class="url fn" href="https://keflavich.github.io/blog/author/adam-adamgginsburggmailcom.html">Adam (adam.g.ginsburg@gmail.com)</a></address>-->
        </footer><!-- /.post-info -->
        <div class="entry-content"> <p>/scratch/adam_work/plots/models_myptgmdl_0707.ps
Look at the left plots in #1 and #4, and ignore the red lines. The RMS
is 4.87 in alt, 3.51 in az, using all pointing observations in 0707
(i.e. not splitting it into part1/part2 or refining heavily). Total is
6.003&quot;, not bad.
I'm calling it quits on pointing refinement for the moment; I'm
satisfied using Meredith's pointing models to get science maps
co-aligned, then we'll use my model on the PPSes to get the pointing to
maximum precision.
Also, in the galactic center, the mapping works happily now. No more
silly problems with that.
It's time for a real Next Step. I think that means mapping nearly
everything. Well, here goes!</p>
 </div>
        <!-- /.entry-content   not article.summary--> 
    </article></li>
    <hr width=100%>
    <li><article class="hentry">
        <header> 
            <h2 class="entry-title">
                <a href="https://keflavich.github.io/blog/prepare_map-issues.html" rel="bookmark" title="Permalink to prepare_map issues">
                    prepare_map issues</a>
            </h2> 
        </header>
        <footer class="post-info">
            <abbr class="published" title="2008-09-01T16:31:00-06:00"> 2008/09/01 </abbr>
            <!--<address class="vcard author"><a class="url fn" href="https://keflavich.github.io/blog/author/adam-adamgginsburggmailcom.html">Adam (adam.g.ginsburg@gmail.com)</a></address>-->
        </footer><!-- /.post-info -->
        <div class="entry-content"> <p>The problem: There is a bulk offset that can range from small to ~22'
(largest observed so far) in the combined maps that is not present in
the individual maps.
Observations: I THINK the offset between ra/dec and l/b is most
pronounced when the map boundaries are most different.
We have been putting CRPIX in the middle of the map (i.e. number of x/y
elements divided by 2), which is not the same position as the median
ra/dec or l/b. I figured this might be a problem, but there's not really
a way around it - if you just set CRPIX to be 0,0, it doesn't change
anything. xy2ad and ad2xy produce self-consistent results, but that
doesn't mean anything either.
I think the problem is that AD2XY is largely ignorant of CRPIX: it
calculates x/y offsets from the CRVAL assuming that the CRVAL is at
CRPIX.... but I don't know why that should be wrong. Ideas? More to come
if I figure anything out.
Update: from doing the individual maps in l/b vs ra/dec, I don't think
the offset is between l/b and ra/dec.... something less fundamental.
Update 2: still no clues after reading ad2xy and trying to plow through
parts of wcssph2xy. gotta be rect_pix_tstream, but I think it's
right....
Update 3: I think I have figured out the problem, currently testing. My
idea has to do with the fact that all x,y positions in
rect_pix_tstream are positive, but ad2xy is not constrained to return
positive values. In principle, the two-iteration ad2xy should take care
of this, but in the case where the middle of the map in pixels is not
the middle of the map in the WCS coordinate system, it is still possible
to get negative pixel mappings out of the 2nd iteration. I'm still
confused about whether this is really possible - makes my head fuzzy -
but I tried implementing a solution where I simply shift the crpix
rather than recalculating with AD2XY.
Update 4: Based on L111, my test in update 3 fixed the problem. Scuba
contours are correct, and reasonably consistent across the field - still
need to do the more complete test, e.g. Cygnus
Update 5: Cygnus tests still await completion, but a very close
inspection of single L111 maps reveals a ~2 pixel difference that could
go a long way to explaining my high-RMS pointing calculations. Still
doesn't explain the sine curve, but anything helps...
Update 6: My correction definitely fixed the problem, EXCEPT there's
still an ambiguity at the .5 pixel level. Specifically, is AD2XY
treating the pixel center as .5,.5 or 0,0? Ditto IDL. I believe (from my
simulated data) that this ambiguity is still causing a problem.
Update 7: New correction fixed problem to better than 1&quot; (checked by
making a simulated map with 1&quot; pixels) - probably 'perfect' now. Read
prepare_map.pro for details. The issue was a difference in pixel
centers.</p>
 </div>
        <!-- /.entry-content   not article.summary--> 
    </article></li>
    <hr width=100%>
    <li><article class="hentry">
        <header> 
            <h2 class="entry-title">
                <a href="https://keflavich.github.io/blog/confirmed-error-in-lb-mapping.html" rel="bookmark" title="Permalink to Confirmed error in L/B mapping">
                    Confirmed error in L/B mapping</a>
            </h2> 
        </header>
        <footer class="post-info">
            <abbr class="published" title="2008-08-28T01:32:00-06:00"> 2008/08/28 </abbr>
            <!--<address class="vcard author"><a class="url fn" href="https://keflavich.github.io/blog/author/adam-adamgginsburggmailcom.html">Adam (adam.g.ginsburg@gmail.com)</a></address>-->
        </footer><!-- /.post-info -->
        <div class="entry-content"> <p>I've used my simulated data and confirmed that there is in fact an error
in the l/b mapping, but I haven't tracked it down yet. Stay tuned.
Update: Something is not self-consistent in prepare_map. I've tried a
variety of different things without success yet.</p>
 </div>
        <!-- /.entry-content   not article.summary--> 
    </article></li>
    <hr width=100%>
    <li><article class="hentry">
        <header> 
            <h2 class="entry-title">
                <a href="https://keflavich.github.io/blog/updates-today.html" rel="bookmark" title="Permalink to Updates today">
                    Updates today</a>
            </h2> 
        </header>
        <footer class="post-info">
            <abbr class="published" title="2008-08-25T23:35:00-06:00"> 2008/08/25 </abbr>
            <!--<address class="vcard author"><a class="url fn" href="https://keflavich.github.io/blog/author/adam-adamgginsburggmailcom.html">Adam (adam.g.ginsburg@gmail.com)</a></address>-->
        </footer><!-- /.post-info -->
        <div class="entry-content"> <p>I updated the FITS header writing pieces of the software today, we
should now have:
N_PCA
ITERNUM
PPBEAM
in all new maps.
I'm mapping all of Cygnus degree-by-degree in RA/Dec and Galactic to try
to measure offsets... possibly offsets as a function of l/b or ra/dec. I
should really be doing this with PPSes, though.
My priority list:</p>
<ol class="arabic simple">
<li>find out what's causing bulk offsets</li>
<li>beat down noise in my pointing models by rejecting bad sources/points
[has to be done from campus]</li>
<li>test my personal special pointing models</li>
<li>make maps!</li>
<li>figure out the rest of pointing</li>
</ol>
 </div>
        <!-- /.entry-content   not article.summary--> 
    </article></li>
    <hr width=100%>
    <li><article class="hentry">
        <header> 
            <h2 class="entry-title">
                <a href="https://keflavich.github.io/blog/iterating-to-convergence.html" rel="bookmark" title="Permalink to Iterating to Convergence">
                    Iterating to Convergence</a>
            </h2> 
        </header>
        <footer class="post-info">
            <abbr class="published" title="2008-08-25T17:42:00-06:00"> 2008/08/25 </abbr>
            <!--<address class="vcard author"><a class="url fn" href="https://keflavich.github.io/blog/author/adam-adamgginsburggmailcom.html">Adam (adam.g.ginsburg@gmail.com)</a></address>-->
        </footer><!-- /.post-info -->
        <div class="entry-content"> <img alt="" src="http://4.bp.blogspot.com/_lsgW26mWZnU/SLLufcweELI/AAAAAAAADOs/5LV8RF28aUk/s400/iteratetoconvergence-0.png" />
<p>Some sample plots of flux-vs-iteration number in the Galactic Center.
The above is for a 13-pca-component map, and the plot is of the
northeast peak of SGR B2. The other plots (available in postscript
below) are of two other points in the GC, and the last one is of the
whole of SGR B2 (it's a very large aperture).
ps version here:
<a class="reference external" href="http://sites.google.com/site/bolocam/pipeline/mapping/iteratetoconvergence.ps?attredirects=0">http://sites.google.com/site/bolocam/pipeline/mapping/iteratetoconvergence.ps?attredirects=0</a>
or /scratch/adam_work/plots/iteratetoconvergence.ps</p>
 </div>
        <!-- /.entry-content   not article.summary--> 
    </article></li>
    <hr width=100%>
    <li><article class="hentry">
        <header> 
            <h2 class="entry-title">
                <a href="https://keflavich.github.io/blog/g343-pca-subtraction-comparison.html" rel="bookmark" title="Permalink to G34.3 PCA subtraction comparison">
                    G34.3 PCA subtraction comparison</a>
            </h2> 
        </header>
        <footer class="post-info">
            <abbr class="published" title="2008-08-24T20:30:00-06:00"> 2008/08/24 </abbr>
            <!--<address class="vcard author"><a class="url fn" href="https://keflavich.github.io/blog/author/adam-adamgginsburggmailcom.html">Adam (adam.g.ginsburg@gmail.com)</a></address>-->
        </footer><!-- /.post-info -->
        <div class="entry-content"> <img alt="" src="http://3.bp.blogspot.com/_lsgW26mWZnU/SLHDrcGWxqI/AAAAAAAADOM/mVp0tqm6qjI/s400/g34.3_pca_compare.png" />
<p>From top-left to the blue highlighted box, the 20th iteration of N pca
components subtracted is shown. N goes from 1 to 19. The other plots are
'ascending' and 0-pca components with median and baseline subtraction -
ask if you want more details on those.
19 iterations recovers a LOT of flux. I haven't generated the plots for
flux as a function of iteration, but I have software to do that
available.
Things to note: at 10 iterations and higher, you start to generate
negative bowls.
One observation is probably independently responsible for the chunks of
glitchy data present even in the 19 PCA component subtraction. While the
bowls do worsen with higher number of PCA components, we also find
fainter structure (e.g. those tongues to the southeast and northwest).</p>
 </div>
        <!-- /.entry-content   not article.summary--> 
    </article></li>
    <hr width=100%>
    <li><article class="hentry">
        <header> 
            <h2 class="entry-title">
                <a href="https://keflavich.github.io/blog/some-good-news-some-not-news.html" rel="bookmark" title="Permalink to Some good news, some.... not news.">
                    Some good news, some.... not news.</a>
            </h2> 
        </header>
        <footer class="post-info">
            <abbr class="published" title="2008-08-24T20:09:00-06:00"> 2008/08/24 </abbr>
            <!--<address class="vcard author"><a class="url fn" href="https://keflavich.github.io/blog/author/adam-adamgginsburggmailcom.html">Adam (adam.g.ginsburg@gmail.com)</a></address>-->
        </footer><!-- /.post-info -->
        <div class="entry-content"> <p>I've been mapping all weekend. It turns out that if you do 25 mapping
runs that take ~1hr apiece, that takes ~25 hours. Who knew?
Whole observation took 3965.3506 sec.
Whole observation took 3071.1403 sec.
Whole observation took 4205.3337 sec.
Whole observation took 7362.5490 sec.
Whole observation took 9313.6064 sec.
Whole observation took 3755.2383 sec.
Whole observation took 3755.8278 sec.
Whole observation took 3760.7032 sec.
Whole observation took 3758.5719 sec.
Whole observation took 3763.1436 sec.
Whole observation took 3766.0066 sec.
Whole observation took 3789.5806 sec.
Whole observation took 3760.9774 sec.
Whole observation took 3762.7124 sec.
Whole observation took 3763.1120 sec.
Whole observation took 3767.1255 sec.
Whole observation took 3766.9085 sec.
Whole observation took 3758.5867 sec.
Whole observation took 3760.2131 sec.
Whole observation took 3755.8963 sec.
Whole observation took 3759.9199 sec.
Whole observation took 3764.4494 sec.
Whole observation took 3766.9686 sec.
Whole observation took 3756.5876 sec.
The good news is that I haven't encountered any crashes. Smooth sailing
so far.</p>
 </div>
        <!-- /.entry-content   not article.summary--> 
    </article></li>
    <hr width=100%>
    <li><article class="hentry">
        <header> 
            <h2 class="entry-title">
                <a href="https://keflavich.github.io/blog/re-convergence-tests.html" rel="bookmark" title="Permalink to Re: Convergence Tests">
                    Re: Convergence Tests</a>
            </h2> 
        </header>
        <footer class="post-info">
            <abbr class="published" title="2008-08-23T17:03:00-06:00"> 2008/08/23 </abbr>
            <!--<address class="vcard author"><a class="url fn" href="https://keflavich.github.io/blog/author/adam-adamgginsburggmailcom.html">Adam (adam.g.ginsburg@gmail.com)</a></address>-->
        </footer><!-- /.post-info -->
        <div class="entry-content"> <p>Made a little code to check out convergence, but frankly it's pretty
easy to just build a mapcube and plot lines in the iteration axis. The
code is in bgps_pipeline/postproc/compareiters.pro, and it is not a
single program.
Comparing deconvolution to no deconvolution, deconvolution is a lot
better. Without it, there are much more substantial negative regions. In
the GC, my test region, the noise-dominated areas were about the same,
though the no-deconvolve map had a little bit more large scale
structure. The signal-dominated regions were very nearly uniformly
brighter. The deconvolved map was ~3 Jy brighter in SGR B2, or 4%.</p>
 </div>
        <!-- /.entry-content   not article.summary--> 
    </article></li>
    <hr width=100%>
    <li><article class="hentry">
        <header> 
            <h2 class="entry-title">
                <a href="https://keflavich.github.io/blog/on-the-list-for-today.html" rel="bookmark" title="Permalink to On the list for today....">
                    On the list for today....</a>
            </h2> 
        </header>
        <footer class="post-info">
            <abbr class="published" title="2008-08-23T13:42:00-06:00"> 2008/08/23 </abbr>
            <!--<address class="vcard author"><a class="url fn" href="https://keflavich.github.io/blog/author/adam-adamgginsburggmailcom.html">Adam (adam.g.ginsburg@gmail.com)</a></address>-->
        </footer><!-- /.post-info -->
        <div class="entry-content"> <p>Since my gigantic mapping run is still going, I'm going to work
primarily on developing code for testing the maps, and determining
important information about the mapper.
The data paper will require an iteration-to-convergence figure, or at
least an estimate of degree of convergence.</p>
<ol class="arabic simple">
<li>Need to develop code to show iteration-to-convergence<ol class="arabic">
<li>need it for both NxNpca and ascending/descending</li>
<li>have to use region files? make some sort of region reader?</li>
<li>pick demonstration sources</li>
</ol>
</li>
<li>Compare N<sub>pca</sub> results for bright, faint sources</li>
<li>Compare iterating with/without deconvolution</li>
<li>Compare median/average/baseline sky subtraction</li>
<li>Analyze efficiency...</li>
<li>Try to figure out what's causing huge offsets. Is it Galactic
Coordinate mapping?</li>
</ol>
<pre class="literal-block">
-bash-3.00$ less /scratch/adam_work/logs/log_082208_domemiter.log | grep WholeWhole observation took 5122.6795 sec.Whole observation took 4774.3424 sec.Whole observation took 2687.7761 sec.Whole observation took 2102.5577 sec.Whole observation took 3247.5344 sec.Whole observation took 5515.2907 sec.Whole observation took 2877.6389 sec.Whole observation took 2757.0235 sec.Whole observation took 1453.0918 sec.Whole observation took 1459.7892 sec.Whole observation took 1381.3762 sec.Whole observation took 1443.1440 sec.Whole observation took 614.39645 sec.Whole observation took 2001.6709 sec.Whole observation took 1817.1512 sec.Whole observation took 1879.1385 sec.
</pre>
<p>Note that the longest set there - 5515s = 1.53 hours - was 40
iterations!</p>
 </div>
        <!-- /.entry-content   not article.summary--> 
    </article></li>
    <hr width=100%>
</ul><!-- /#posts-list -->
<p class="paginator">
            <a href="https://keflavich.github.io/blog/index46.html">&laquo;</a>
    Page 47 / 51
        <a href="https://keflavich.github.io/blog/index48.html">&raquo;</a>
</p>
</section><!-- /#content -->
  </div>

    <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-37306139-1']);
    _gaq.push(['_trackPageview']);
    (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();

    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-37306139-1');
    ga('send', 'pageview');
</script>
<script type="text/javascript">
  var disqus_shortname = 'adamginsburgsblog';
  (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
   })();
</script>
</body>
</html>
