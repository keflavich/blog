<!DOCTYPE html>
<html lang="en">
<link rel="stylesheet" type="text/css" href="https://keflavich.github.io/blog/theme/css/style.css" />
<link rel="icon" type="image/gif" href="https://keflavich.github.io/blog/theme/favicon8.ico">
<head>
    <base href="https://keflavich.github.io/blog">
        <title>Adam Ginsburg's blog</title>
        <meta charset="utf-8" />
        <link href="https://keflavich.github.io/blog/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="Adam Ginsburg's blog Full Atom Feed" />
        <link href="https://keflavich.github.io/blog/feeds/{slug}.atom.xml" type="application/atom+xml" rel="alternate" title="Adam Ginsburg's blog Categories Atom Feed" />
<!-- Using MathJax, with the delimiters $ -->
<!-- Conflict with pygments for the .mo and .mi -->
<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
    "HTML-CSS": {
    styles: {
    ".MathJax .mo, .MathJax .mi": {color: "inherit !important"}},
    'div.typeset': { 'text-align': 'left'}
    },
    tex2jax: {inlineMath: [['$','$'], ['\\(','\\)']],processEscapes: true}
    });
    TeX: {
        extensions: ["AMSmath.js", "AMSsymbols.js"]
    }
    MathJax.Hub.Register.StartupHook("HTML-CSS Jax Ready",function () {
    var VARIANT = MathJax.OutputJax["HTML-CSS"].FONTDATA.VARIANT;
    VARIANT["normal"].fonts.unshift("MathJax_SansSerif");
    VARIANT["bold"].fonts.unshift("MathJax_SansSerif-bold");
    VARIANT["italic"].fonts.unshift("MathJax_SansSerif-italic");
    VARIANT["-tex-mathit"].fonts.unshift("MathJax_SansSerif-italic");
    });
    MathJax.Hub.Register.StartupHook("SVG Jax Ready",function () {
    var VARIANT = MathJax.OutputJax.SVG.FONTDATA.VARIANT;
    VARIANT["normal"].fonts.unshift("MathJax_SansSerif");
    VARIANT["bold"].fonts.unshift("MathJax_SansSerif-bold");
    VARIANT["italic"].fonts.unshift("MathJax_SansSerif-italic");
    VARIANT["-tex-mathit"].fonts.unshift("MathJax_SansSerif-italic");
    });
</script>

<script type="text/javascript"
src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS_HTML">
</script>
        
</head>

<body id="base" class="home">


    <header id="banner" class="body" >
        <div id="header" style='background-image: url("https://keflavich.github.io/blog/images/GC_4096sq_bolo.png"); background-position:left; min-heigt: 200px;  background-repeat: no-repeat; max-width: 80%;'>
            <h1 style="color: #C4C4C4;"><a class="header" href="https://keflavich.github.io/blog">Adam Ginsburg's blog <strong></strong></a></h1>

            <nav id="menu"><ul id="menulist">
                <li><a href="https://www.adamgginsburg.com">Homepage</a></li>
                <li><a href="/index.html">Blog Index</a></li>
                <li><a href="/category/bgps.html">BGPS Blog</a></li>
                <li><a href="/category/publications.html">Publications</a></li>
                <li><a href="/archives.html">Archives</a></li>
                <li><a href="/tags.html">Tags</a></li>
            </ul></nav><!-- /#menu -->
        </div>
    </header><!-- /#banner -->

  <div id="sidebar">
    <ul>
      <li>
        <h3 id='recent_header'>Recent Posts</h3>
        <ul>
              <li class="post">
                  2013/05/20
                  <br>
                  <a href="https://keflavich.github.io/blog/bgps-point-source-recovery-experiment-23-results.html">BGPS Point Source Recovery - Experiment 23 results</a>
              </li>
              <li class="post">
                  2013/05/16
                  <br>
                  <a href="https://keflavich.github.io/blog/bgps-point-source-recovery.html">BGPS Point Source Recovery</a>
              </li>
              <li class="post">
                  2012/12/26
                  <br>
                  <a href="https://keflavich.github.io/blog/catalog-vs-image-shift-a-possible-solution-to-the-atlasgal-issue.html">Catalog vs Image shift? A possible solution to the ATLASGAL issue</a>
              </li>
              <li class="post">
                  2012/12/22
                  <br>
                  <a href="https://keflavich.github.io/blog/idea-multispectral-eigenimage-decomposition.html">Idea: Multispectral Eigenimage decomposition...</a>
              </li>
              <li class="post">
                  2012/12/15
                  <br>
                  <a href="https://keflavich.github.io/blog/pointing-cross-correlation-yet-again.html">Pointing & Cross-Correlation yet again</a>
              </li>
        </ul>
      </li>
    
    </ul>
  </div><!-- end #sidebar -->

  <div id="content">
<section id="content">
<h2>Articles in the bgps category</h2>

<ul id="post-list">
    <li><article class="hentry">
        <header> 
            <h2 class="entry-title">
                <a href="https://keflavich.github.io/blog/searching-for-more-offsets.html" rel="bookmark" title="Permalink to Searching for more offsets">
                    Searching for more offsets</a>
            </h2> 
        </header>
        <footer class="post-info">
            <abbr class="published" title="2008-08-12T21:35:00-06:00"> 2008/08/12 </abbr>
            <!--<address class="vcard author"><a class="url fn" href="https://keflavich.github.io/blog/author/adam-adamgginsburggmailcom.html">Adam (adam.g.ginsburg@gmail.com)</a></address>-->
        </footer><!-- /.post-info -->
        <div class="entry-content"> <p>The defining feature of my pointing calculations - and their
inconsistency - is that the spread for individual sources is bad, which
means that there's still something wrong in the way the bulk ra/dec are
being calculated.</p>
<p>I checked apply_distortion_map_radec to see if it might have inserted
some bulk offset, but it only changes the average position by &lt;2&quot;. That
might be an issue, but the boresight isn't necessarily aligned with the
mean location of the bolometers. It should be shifted by at least .3&quot;
according to a simple average of sin/cos of the bolo_params angles.
Comparing my pointing code to map_ncdf_reading directly:</p>
<p>readstruct=map_ncdf_reading(filename,/nopixoff)
offsets are small (e.g. -0.050665803 -0.0029540043 arcseconds ra/dec) if
I don't subtract fazo/fzao
offsets in ra/dec are remarkably close to fazo/fzao if I subtract them:</p>
<pre class="literal-block">
92.830656 -126.12773
95.000000 -120.00000
</pre>
<p>which is because ra/dec are pretty closely aligned to az/el.
So, any difference comes from at least one of the keyword parameters.
Therefore I AM missing something, and that something is one of the
keywords to map_ncdf_reading</p>
 </div>
        <!-- /.entry-content   not article.summary--> 
    </article></li>
    <hr width=100%>
    <li><article class="hentry">
        <header> 
            <h2 class="entry-title">
                <a href="https://keflavich.github.io/blog/ffts-and-unlucky-primes.html" rel="bookmark" title="Permalink to FFTs and unlucky primes">
                    FFTs and unlucky primes</a>
            </h2> 
        </header>
        <footer class="post-info">
            <abbr class="published" title="2008-08-12T17:04:00-06:00"> 2008/08/12 </abbr>
            <!--<address class="vcard author"><a class="url fn" href="https://keflavich.github.io/blog/author/adam-adamgginsburggmailcom.html">Adam (adam.g.ginsburg@gmail.com)</a></address>-->
        </footer><!-- /.post-info -->
        <div class="entry-content"> <p>I've encountered a lot (!) of unlucky prime numbers that I'm trying to
FFT in too many places, and it basically stops the code.
211151 was impossibly bad, 5827 is pretty bad too.
I solved the first by splitting into by-scan delining, which is better
anyway. But the second is a map, in which I KNOW zero padding is OK.
So... are there any functions that find the nearest reasonably efficient
map size?</p>
 </div>
        <!-- /.entry-content   not article.summary--> 
    </article></li>
    <hr width=100%>
    <li><article class="hentry">
        <header> 
            <h2 class="entry-title">
                <a href="https://keflavich.github.io/blog/more-cleaning-modifications.html" rel="bookmark" title="Permalink to More cleaning modifications">
                    More cleaning modifications</a>
            </h2> 
        </header>
        <footer class="post-info">
            <abbr class="published" title="2008-08-12T17:01:00-06:00"> 2008/08/12 </abbr>
            <!--<address class="vcard author"><a class="url fn" href="https://keflavich.github.io/blog/author/adam-adamgginsburggmailcom.html">Adam (adam.g.ginsburg@gmail.com)</a></address>-->
        </footer><!-- /.post-info -->
        <div class="entry-content"> <p>I had removed sigmadeglitch from deline, now it's permanently gone. I
think it might be worth exploring re-inserting sigmadeglitch somewhere.
My higher-order polynomial fit is creating deeper bowls around sources,
so that's a big problem, but if I use a lower order I get the bad
streaks. What's the best way to deal with this? I'm thinking perhaps
only doing the polysub on the second iteration (i.e. after a source
model has been subtracted).
Delining runs into some issues now, though, because not all frequencies
are sampled (?).</p>
 </div>
        <!-- /.entry-content   not article.summary--> 
    </article></li>
    <hr width=100%>
    <li><article class="hentry">
        <header> 
            <h2 class="entry-title">
                <a href="https://keflavich.github.io/blog/wow-fft-failure.html" rel="bookmark" title="Permalink to Wow - FFT failure">
                    Wow - FFT failure</a>
            </h2> 
        </header>
        <footer class="post-info">
            <abbr class="published" title="2008-08-12T15:11:00-06:00"> 2008/08/12 </abbr>
            <!--<address class="vcard author"><a class="url fn" href="https://keflavich.github.io/blog/author/adam-adamgginsburggmailcom.html">Adam (adam.g.ginsburg@gmail.com)</a></address>-->
        </footer><!-- /.post-info -->
        <div class="entry-content"> <p>On my huge Cygnus run, the fft keeps failing in the deline code. It's
actually pretty impressive, but there are 844604 points in the
timestream. The prime factorization of 844604 is 2^2 * 211151. This is
just damned bad luck, because I think an FFT is extremely inefficient
when it can't factorize. What's the best workaround? ....
9 AM update: I've rewritten the deliner to work on a scan-by-scan basis.
It's possible that the delining failed in the past because it was
essentially removing a constant amplitude at the line frequencies across
the observation (or combined observations!) which is not likely to be
true.</p>
 </div>
        <!-- /.entry-content   not article.summary--> 
    </article></li>
    <hr width=100%>
    <li><article class="hentry">
        <header> 
            <h2 class="entry-title">
                <a href="https://keflavich.github.io/blog/rms-fails-to-shrink.html" rel="bookmark" title="Permalink to RMS fails to shrink">
                    RMS fails to shrink</a>
            </h2> 
        </header>
        <footer class="post-info">
            <abbr class="published" title="2008-08-12T13:51:00-06:00"> 2008/08/12 </abbr>
            <!--<address class="vcard author"><a class="url fn" href="https://keflavich.github.io/blog/author/adam-adamgginsburggmailcom.html">Adam (adam.g.ginsburg@gmail.com)</a></address>-->
        </footer><!-- /.post-info -->
        <div class="entry-content"> <p>Spent a while today working on these plots after rejecting every obvious
bad point:
/scratch/adam_work/plots/sourcecompare_0_rawcsoptg_0707.ps
/scratch/adam_work/plots/sourcecompare_10_rawcsoptg_0707.ps
/scratch/adam_work/plots/sourcecompare_1_rawcsoptg_0707.ps
/scratch/adam_work/plots/sourcecompare_2_rawcsoptg_0707.ps
/scratch/adam_work/plots/sourcecompare_3_rawcsoptg_0707.ps
/scratch/adam_work/plots/sourcecompare_4_rawcsoptg_0707.ps
/scratch/adam_work/plots/sourcecompare_5_rawcsoptg_0707.ps
/scratch/adam_work/plots/sourcecompare_6_rawcsoptg_0707.ps
/scratch/adam_work/plots/sourcecompare_7_rawcsoptg_0707.ps
/scratch/adam_work/plots/sourcecompare_8_rawcsoptg_0707.ps
/scratch/adam_work/plots/sourcecompare_9_rawcsoptg_0707.ps
/scratch/adam_work/plots/models_rawcsoptg_0707.ps
The net result is, I still don't have a nice small RMS offset
Update 8/12/08: using RA/DEC mapping doesn't help.</p>
 </div>
        <!-- /.entry-content   not article.summary--> 
    </article></li>
    <hr width=100%>
    <li><article class="hentry">
        <header> 
            <h2 class="entry-title">
                <a href="https://keflavich.github.io/blog/cleaning-ideas.html" rel="bookmark" title="Permalink to Cleaning ideas">
                    Cleaning ideas</a>
            </h2> 
        </header>
        <footer class="post-info">
            <abbr class="published" title="2008-08-11T15:20:00-06:00"> 2008/08/11 </abbr>
            <!--<address class="vcard author"><a class="url fn" href="https://keflavich.github.io/blog/author/adam-adamgginsburggmailcom.html">Adam (adam.g.ginsburg@gmail.com)</a></address>-->
        </footer><!-- /.post-info -->
        <div class="entry-content"> <p>It's proving very difficult to get rid of glitches, so here are some
more ideas:</p>
<p>Median filter the whole timestream (downsampled) at a resolution that
will pull down the glitch peak. Subtract out the median-filtered
timestream from the original, and look for outliers in that
distribution: in principle, those should be glitches.</p>
<p>Another option: subtract out the noise map AND the best-model map from
the original timestream before trying to pull out additional astro model
stuff. The map-to-timestream astro model can't include glitches because
they're averaged over, but the sky-subtracted timestream DOES include
glitches (no matter how many PCA components are removed) because
glitches are NOT correlated across detectors. The weird thing is that
this is effectively subtracting out exactly what was calculated from the
sky subtraction - the question is whether subtracting it out BEFORE sky
subtracting again gets you any benefit. If it was just noise,
subtracting noise from noise is fine, but the &quot;noise&quot; does include some
residual signal.</p>
 </div>
        <!-- /.entry-content   not article.summary--> 
    </article></li>
    <hr width=100%>
    <li><article class="hentry">
        <header> 
            <h2 class="entry-title">
                <a href="https://keflavich.github.io/blog/glitches-and-errors.html" rel="bookmark" title="Permalink to Glitches and errors">
                    Glitches and errors</a>
            </h2> 
        </header>
        <footer class="post-info">
            <abbr class="published" title="2008-08-11T04:24:00-06:00"> 2008/08/11 </abbr>
            <!--<address class="vcard author"><a class="url fn" href="https://keflavich.github.io/blog/author/adam-adamgginsburggmailcom.html">Adam (adam.g.ginsburg@gmail.com)</a></address>-->
        </footer><!-- /.post-info -->
        <div class="entry-content"> <p>It's definitely important to get rid of the spikes and, more
importantly, the exponential decay. The current function is pretty good,
but possibly not good enough because there are some situations in which
the turnaround decay is obviously not well-enough dealt with and results
in high/low streaks.
The glitches can be ~20 Jy. The problem is that they sometimes show up
in the middle of sources (e.g. in 060609_o26). That will badly distort
fluxes.
My ideal is still to use a median instead of mean combination of data
points into image points, but that seems to be impractical to implement.
Other ideas...</p>
 </div>
        <!-- /.entry-content   not article.summary--> 
    </article></li>
    <hr width=100%>
    <li><article class="hentry">
        <header> 
            <h2 class="entry-title">
                <a href="https://keflavich.github.io/blog/big-run-this-weekend.html" rel="bookmark" title="Permalink to Big run this weekend...">
                    Big run this weekend...</a>
            </h2> 
        </header>
        <footer class="post-info">
            <abbr class="published" title="2008-08-09T17:22:00-06:00"> 2008/08/09 </abbr>
            <!--<address class="vcard author"><a class="url fn" href="https://keflavich.github.io/blog/author/adam-adamgginsburggmailcom.html">Adam (adam.g.ginsburg@gmail.com)</a></address>-->
        </footer><!-- /.post-info -->
        <div class="entry-content"> <p>In case anyone is wondering why Milkyway is going really slowly, I'm
mapping a 69-observation set of Cygnus. It ought to prove to be an
interesting test of Milkyway's swap capacity, but other than that I
doubt it will be useful. While the pointing is reasonably good at this
point (30&quot; still, but whatever), I haven't done ANY work on filtering
out bad observations / flagging stuff in Cyg. Data massaging is going to
be a long process, it would be great if I could do that instead of
pointing stuff. Argh.
One thing to note is that this file:
/scratch/sliced/l078/070702_o33_raw_ds5.nc
is a &quot;_ds5.nc&quot; but is NOT downsampled!
Update:
Mapped the individual files successfully, picked out noisy ones. The
overall map failed - just not enough memory to do a field that large. I
split it up in to two sets of 25 observations, plus I'll be mapping each
L 70-L 90 field separately (I didn't get ride of noisy observations for
this). I'm also remapping the individual observations with PSD flagging
enabled to see how that works.
For notes on the P Cyg observations, see the file
/scratch/adam_work/texts/cygnus_for_pat.in</p>
 </div>
        <!-- /.entry-content   not article.summary--> 
    </article></li>
    <hr width=100%>
    <li><article class="hentry">
        <header> 
            <h2 class="entry-title">
                <a href="https://keflavich.github.io/blog/images-with-artifacts.html" rel="bookmark" title="Permalink to Images with artifacts">
                    Images with artifacts</a>
            </h2> 
        </header>
        <footer class="post-info">
            <abbr class="published" title="2008-08-07T23:42:00-06:00"> 2008/08/07 </abbr>
            <!--<address class="vcard author"><a class="url fn" href="https://keflavich.github.io/blog/author/adam-adamgginsburggmailcom.html">Adam (adam.g.ginsburg@gmail.com)</a></address>-->
        </footer><!-- /.post-info -->
        <div class="entry-content"> <p>Here's the list from 0507:
Streaky offsets:
/scratch/adam_work/g34.3/rawcsoptg050706_o47_raw_ds1.nc_indiv3pca_map00.fits
.. image:: <a class="reference external" href="http://3.bp.blogspot.com/_lsgW26mWZnU/SJtP9wKu4_I/AAAAAAAADNo/gmMEFkzCX-A/s320/050706_o47.png">http://3.bp.blogspot.com/_lsgW26mWZnU/SJtP9wKu4_I/AAAAAAAADNo/gmMEFkzCX-A/s320/050706_o47.png</a>
Totally messed up (two sets of images many degrees apart):
/scratch/adam_work/g34.3/rawcsoptg050713_o40_raw_ds1.nc_indiv3pca_map00.fits
070709_ob7 :
.. image:: <a class="reference external" href="http://4.bp.blogspot.com/_lsgW26mWZnU/SJuIDL161GI/AAAAAAAADN4/D4mxFyx1Fr0/s320/070709_ob7_1730m130_peanut.png">http://4.bp.blogspot.com/_lsgW26mWZnU/SJuIDL161GI/AAAAAAAADN4/D4mxFyx1Fr0/s320/070709_ob7_1730m130_peanut.png</a>
070703_o48 :
.. image:: <a class="reference external" href="http://4.bp.blogspot.com/_lsgW26mWZnU/SJuICzavE_I/AAAAAAAADNw/70Hl5930eU8/s320/070703_o48_3c454.3.png">http://4.bp.blogspot.com/_lsgW26mWZnU/SJuICzavE_I/AAAAAAAADNw/70Hl5930eU8/s320/070703_o48_3c454.3.png</a></p>
 </div>
        <!-- /.entry-content   not article.summary--> 
    </article></li>
    <hr width=100%>
    <li><article class="hentry">
        <header> 
            <h2 class="entry-title">
                <a href="https://keflavich.github.io/blog/looking-back-at-the-old-pipeline.html" rel="bookmark" title="Permalink to Looking back at the old pipeline">
                    Looking back at the old pipeline</a>
            </h2> 
        </header>
        <footer class="post-info">
            <abbr class="published" title="2008-08-07T16:33:00-06:00"> 2008/08/07 </abbr>
            <!--<address class="vcard author"><a class="url fn" href="https://keflavich.github.io/blog/author/adam-adamgginsburggmailcom.html">Adam (adam.g.ginsburg@gmail.com)</a></address>-->
        </footer><!-- /.post-info -->
        <div class="entry-content"> <p>I've obviously missed something. So to try to figure out what it is, I'm
going back to the old pipeline... again...
in map_ncdf_reading, lines 441-448, there is something curious that
goes back to a definition-of-variables problem: ddec and dra are ADDED
to ra and dec to get the new &quot;ra_all&quot; and &quot;dec_all&quot; variables. ddec
and dra are calculated from eaz and eel: ERROR OFFSETS in Az and El.
Why? What?!
I added a new piece of code, correct_eaz_eel.pro. It is extremely
short, but extremely necessary.</p>
<pre class="literal-block">
pro correct_eaz_eel,ra,dec,el,az,eel,eaz,pa    dra=-eaz*cos(!dtor*pa)*cos(!dtor*el)+eel*sin(!dtor*pa)    ddec=eaz*sin(!dtor*pa)*cos(!dtor*el)+eel*cos(!dtor*pa)    dec += ddec/3600.    ra  += dra/3600. / cos(!dtor*dec) / 15.end
</pre>
<p>This comes back to the fact that I don't know what ANY of the variables
in the NCDF header are supposed to be. Why are &quot;error&quot; variables
actually OFFSET variables, and why didn't anyone know about them?</p>
 </div>
        <!-- /.entry-content   not article.summary--> 
    </article></li>
    <hr width=100%>
</ul><!-- /#posts-list -->
<p class="paginator">
            <a href="https://keflavich.github.io/blog/category/bgps17.html">&laquo;</a>
    Page 18 / 20
        <a href="https://keflavich.github.io/blog/category/bgps19.html">&raquo;</a>
</p>
</section><!-- /#content -->
  </div>

    <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-37306139-1']);
    _gaq.push(['_trackPageview']);
    (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();

    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-37306139-1');
    ga('send', 'pageview');
</script>
<script type="text/javascript">
  var disqus_shortname = 'adamginsburgsblog';
  (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
   })();
</script>
</body>
</html>
