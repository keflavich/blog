---
layout: post
title: "Cross-Correlation Offsets Revisited"
date: 2012-09-08T01:05:00-07:00
categories:
 - alignment
 - pointing
---

<div class='post'>
<div dir="ltr" style="text-align: left;" trbidi="on">Since last time (<a href="http://bolocam.blogspot.com/2009/03/43-relative-alignment-and-mosaicing.html">Taylor Expansion &amp; Cross Correlation</a><a href="">, </a><a href="http://bolocam.blogspot.com/2012/03/new-coalignment-code.html">Coalignment Code</a>), I have attempted to re-do the cross-correlation with an added component: error estimates.<br /><br />It turns out, there is a better method than the Taylor-expansion around the cross-correlation peak. &nbsp;Fourier upsampling can be used to efficiently determine precise sub-pixel offsets (<a href="http://www.mathworks.com/matlabcentral/fileexchange/18401-efficient-subpixel-image-registration-by-cross-correlation/content/html/efficient_subpixel_registration.html">matlab version</a>, <a href="http://people.web.psi.ch/guizar_m/main/">Manuel Guizar, author</a>, <a href="http://www.opticsinfobase.org/view_article.cfm?gotourl=http%3A%2F%2Fwww%2Eopticsinfobase%2Eorg%2FDirectPDFAccess%2F6C566DF3-B5C5-B342-97F01180999C7632_148843%2Fol-33-2-156%2Epdf%3Fda%3D1%26id%3D148843%26seq%3D0%26mobile%3Dno&amp;org=University%20of%20Colorado%20at%20Boulder%20Library">refereed article</a>).<br /><br />However, in the published methods just cited, there is no way to determine the error - those algorithms are designed to measure offsets between identical images corrupted by noise but still strongly dominated by signal.<br /><br />We're more interested in the case where individual pixels may well be noise-dominated, but the overall signal in the map is still large.<br /><br />So, I've developed a python translation of the above codes and then some.<br /><br /><a href="https://github.com/keflavich/image_registration">Image Registration on github</a><br /><br />The docstrings are pretty solid, but there is no overall documentation.<br /><br />However, there's a pretty good demo of the simulation AND fitting code here:<br /><a href="https://github.com/keflavich/image_registration/blob/master/doc/CrossCorrelationSimulation.pdf?raw=true">Tests and Examples</a><br /><br />The results for the Bolocam data are here (only applied to v2-Herschel offsets):<br /><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://2.bp.blogspot.com/-PMJx-wX23w8/UErt7G3PqfI/AAAAAAAAHOQ/-5xD6ReBRGs/s1600/Offsets_XYplot.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" height="320" src="http://2.bp.blogspot.com/-PMJx-wX23w8/UErt7G3PqfI/AAAAAAAAHOQ/-5xD6ReBRGs/s320/Offsets_XYplot.png" width="320" /></a></div><br /></div></div>
