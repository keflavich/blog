---
layout: post
title: "Looking back at the old pipeline"
date: 2008-08-07T08:27:00-07:00
categories:
 - pipeline
---

<div class='post'>
I've obviously missed something.  So to try to figure out what it is, I'm going back to the old pipeline... again...<br /><br />in map_ncdf_reading, lines 441-448, there is something curious that goes back to a definition-of-variables problem:  ddec and dra are ADDED to ra and dec to get the new "ra_all" and "dec_all" variables.  ddec and dra are calculated from eaz and eel: ERROR OFFSETS in Az and El.  Why?  What?!<br /><br />I added a new piece of code, correct_eaz_eel.pro.  It is extremely short, but extremely necessary.<br /><br /><pre><br />pro correct_eaz_eel,ra,dec,el,az,eel,eaz,pa<br />    dra=-eaz*cos(!dtor*pa)*cos(!dtor*el)+eel*sin(!dtor*pa)<br />    ddec=eaz*sin(!dtor*pa)*cos(!dtor*el)+eel*cos(!dtor*pa)<br />    dec += ddec/3600.<br />    ra  += dra/3600. / cos(!dtor*dec) / 15.<br />end    <br /></pre><br /><br />This comes back to the fact that I don't know what ANY of the variables in the NCDF header are supposed to be.  Why are "error" variables actually OFFSET variables, and why didn't anyone know about them?</div>
