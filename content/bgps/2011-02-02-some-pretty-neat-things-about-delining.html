---
layout: post
title: "Some pretty neat things about delining...."
date: 2011-02-02T20:50:00-08:00
categories:
 - pipeline
 - deline
---

<div class='post'>
Well, I did the work, so might as well come up with some plots...<br /><br />I created a gaussian-fitting based delining code that saves all of the fits in a text file!  That's a lot of data to play with, and allows me to draw some conclusions:<br /><br /><ol><li> For the narrow lines, the linewidth (gaussian sigma) is 0.03 Hz.  For the wide lines, it is 0.05. <div class="separator" style="clear: both; text-align: center;"><a href="http://2.bp.blogspot.com/_lsgW26mWZnU/TUorHEcJO0I/AAAAAAAAF7k/TaWEWrbczZ0/s1600/histogram_fit_deline_linewidths.png" imageanchor="1" style="margin-left:1em; margin-right:1em"><img align='right' border="0" height="214" width="390" src="http://2.bp.blogspot.com/_lsgW26mWZnU/TUorHEcJO0I/AAAAAAAAF7k/TaWEWrbczZ0/s320/histogram_fit_deline_linewidths.png" /></a></div><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://1.bp.blogspot.com/_lsgW26mWZnU/TUorHusiIdI/AAAAAAAAF7s/NX67lE3OgaQ/s1600/histogram_fit_deline_linewidths_wide.png" imageanchor="1" style="margin-left:1em; margin-right:1em"><img align='right' border="0" height="214" width="390" src="http://1.bp.blogspot.com/_lsgW26mWZnU/TUorHusiIdI/AAAAAAAAF7s/NX67lE3OgaQ/s320/histogram_fit_deline_linewidths_wide.png" /></a></div><br /><li> The amplitudes from December 2010 are ENORMOUS compared to others!<br /><div class="separator" style="clear: both; text-align: center;"><a href="http://4.bp.blogspot.com/_lsgW26mWZnU/TUosLpxdcdI/AAAAAAAAF70/QTgqsu4uQrg/s1600/histogram_fit_deline_amplitudes_epochcompare.png" imageanchor="1" style="margin-left:1em; margin-right:1em"><img align='right' border="0" height="214" width="390" src="http://4.bp.blogspot.com/_lsgW26mWZnU/TUosLpxdcdI/AAAAAAAAF70/QTgqsu4uQrg/s320/histogram_fit_deline_amplitudes_epochcompare.png" /></a></div><br /><li> The width distributions of the two are similar, though the lines appear to be significantly wider in July 2009<br /><div class="separator" style="clear: both; text-align: center;"><a href="http://3.bp.blogspot.com/_lsgW26mWZnU/TUotc81_ztI/AAAAAAAAF78/8nxzuv8Apc8/s1600/histogram_fit_deline_width_epochcompare.png" imageanchor="1" style="margin-left:1em; margin-right:1em"><img align='right' border="0" height="214" width="390" src="http://3.bp.blogspot.com/_lsgW26mWZnU/TUotc81_ztI/AAAAAAAAF78/8nxzuv8Apc8/s320/histogram_fit_deline_width_epochcompare.png" /></a></div><br /></ol> I've also gotten to the point that I'm satisfied with how delining with wing suppression works.  Wing suppression is 0.4-2x quicker than fitting directly, depending on... not clear what exactly; it depends on epoch, but that could either be because there are more lines found or because of relative data size.  Does delining have to be done on whole timestreams, or can it be done on a scan-by-scan basis?  This is not entirely clear... the peaks are less suppressed when done on a scan-by-scan basis (presumably because the S/N is low and peaks are therefore not detected), but incorrect suppression (removing a line that's not there) is reduced.  For short scans, the scan-by-scan approach is 10x faster; for longer scans it's ~20% faster.  I think the scan-by-scan approach is going to be ideal. <br><hr><br>Examples from l089 (0709):  <br>Top row: non-fitted line suppression <div class="separator" style="clear: both; text-align: center;"><a href="http://4.bp.blogspot.com/_lsgW26mWZnU/TUowz4zgpsI/AAAAAAAAF8E/iJd0tAbVj0U/s1600/deline_10hz_wingsuppress_psds_003.png" imageanchor="1" style="margin-left:1em; margin-left:1em"><img align='left' border="0" height="214" width="390" src="http://4.bp.blogspot.com/_lsgW26mWZnU/TUowz4zgpsI/AAAAAAAAF8E/iJd0tAbVj0U/s320/deline_10hz_wingsuppress_psds_003.png" /></a><a href="http://4.bp.blogspot.com/_lsgW26mWZnU/TUow1IQ_Y9I/AAAAAAAAF8c/1OkISODwwPM/s1600/deline_fitline_10hz_noscan_nsig0_preservephase_timestreams_003.png" imageanchor="1" style="margin-right:1em; margin-right:1em"><img align='right' border="0" height="214" width="390" src="http://4.bp.blogspot.com/_lsgW26mWZnU/TUow1IQ_Y9I/AAAAAAAAF8c/1OkISODwwPM/s320/deline_fitline_10hz_noscan_nsig0_preservephase_timestreams_003.png" /></a></div><br> <br>Bottom row: fitted line suppression <div class="separator" style="clear: both; text-align: center;"><a href="http://4.bp.blogspot.com/_lsgW26mWZnU/TUow0sTBKsI/AAAAAAAAF8U/GtL0nyvlNBw/s1600/deline_fitline_10hz_noscan_nsig0_preservephase_psds_003.png" imageanchor="1" style="margin-left:1em; margin-left:1em"><img align='left' border="0" height="214" width="390" src="http://4.bp.blogspot.com/_lsgW26mWZnU/TUow0sTBKsI/AAAAAAAAF8U/GtL0nyvlNBw/s320/deline_fitline_10hz_noscan_nsig0_preservephase_psds_003.png" /></a><a href="http://1.bp.blogspot.com/_lsgW26mWZnU/TUow0d-vEcI/AAAAAAAAF8M/or2gkvGxW4o/s1600/deline_10hz_wingsuppress_timestreams_003.png" imageanchor="1" style="margin-right:1em; margin-right:1em"><img align='right' border="0" height="214" width="390" src="http://1.bp.blogspot.com/_lsgW26mWZnU/TUow0d-vEcI/AAAAAAAAF8M/or2gkvGxW4o/s320/deline_10hz_wingsuppress_timestreams_003.png" /></a></div><br><br><hr><div class="separator" style="clear: both; text-align: left;"><br><left>Examples from Uranus (1012, really really liney):</left></div><br>Top row: non-fitted line suppression <div class="separator" style="clear: both; text-align: center;"><a href="http://1.bp.blogspot.com/_lsgW26mWZnU/TUoxEvWqRwI/AAAAAAAAF8k/J6ImhPN9ZS0/s1600/deline_10hz_wingsuppress_psds_003.png" imageanchor="1" style="margin-left:1em; margin-left:1em"><img align='left' border="0" height="214" width="390" src="http://1.bp.blogspot.com/_lsgW26mWZnU/TUoxEvWqRwI/AAAAAAAAF8k/J6ImhPN9ZS0/s320/deline_10hz_wingsuppress_psds_003.png" /></a><a href="http://2.bp.blogspot.com/_lsgW26mWZnU/TUoxFMLdujI/AAAAAAAAF8s/DrzWxFCdBu0/s1600/deline_10hz_wingsuppress_timestreams_003.png" imageanchor="1" style="margin-right:1em; margin-right:1em"><img align='right' border="0" height="214" width="390" src="http://2.bp.blogspot.com/_lsgW26mWZnU/TUoxFMLdujI/AAAAAAAAF8s/DrzWxFCdBu0/s320/deline_10hz_wingsuppress_timestreams_003.png" /></a></div><br> <br>Bottom row: fitted line suppression <div class="separator" style="clear: both; text-align: center;"><a href="http://3.bp.blogspot.com/_lsgW26mWZnU/TUoxFXYN_tI/AAAAAAAAF80/BQwv6ROSOJ4/s1600/deline_fitline_10hz_noscan_nsig0_preservephase_psds_003.png" imageanchor="1" style="margin-left:1em; margin-left:1em"><img align='left' border="0" height="214" width="390" src="http://3.bp.blogspot.com/_lsgW26mWZnU/TUoxFXYN_tI/AAAAAAAAF80/BQwv6ROSOJ4/s320/deline_fitline_10hz_noscan_nsig0_preservephase_psds_003.png" /></a><a href="http://4.bp.blogspot.com/_lsgW26mWZnU/TUoxF_c0URI/AAAAAAAAF88/JU9_F-8HC2k/s1600/deline_fitline_10hz_noscan_nsig0_preservephase_timestreams_003.png" imageanchor="1" style="margin-right:1em; margin-right:1em"><img align='right' border="0" height="214" width="390" src="http://4.bp.blogspot.com/_lsgW26mWZnU/TUoxF_c0URI/AAAAAAAAF88/JU9_F-8HC2k/s320/deline_fitline_10hz_noscan_nsig0_preservephase_timestreams_003.png" /></a></div></div>
<h2>Comments</h2>
<div class='comments'>
<div class='comment'>
<div class='author'>Adam</div>
<div class='content'>
Next step: prove that this works in maps...</div>
</div>
</div>
