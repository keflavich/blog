---
layout: post
title: "netpbm install"
date: 2012-11-04T23:48:00-08:00
---

<div class='post'>
<div dir="ltr" style="text-align: left;" trbidi="on"><div dir="ltr" style="text-align: left;" trbidi="on"><a href="http://casa.colorado.edu/~ginsbura/index.htm">I</a>&nbsp;needed to install netpbm in order to use <a href="http://www.blogger.com/astrometry.net">astrometry.net</a>, but the install sucked.<br /><br />First, had to build with a bunch of flags:<br /><code>CC=/usr/bin/gcc-4.2 CFLAGS="-arch i386 -arch x86_64" FFLAGS="-m32 -m64" LDFLAGS="-Wall -undefined dynamic_lookup -bundle -arch i386 -arch x86_64" &nbsp;MACOSX_DEPLOYMENT_TARGET=10.6 CFLAGS_SHLIB="-fno-common" NETPBMLIBTYPE=dylib NETPBMLIBSUFFIX=dylib LDSHLIB="--shared" TIFFLIB=-ltiff JPEGLIB=-ljpeg PNGLIB=-lpng ZLIB=-lz make </code> &nbsp;(some of those probably aren't necessary, and oops my deployment target should've been 10.7 but I don't think it matters.<br /><br />Then, I got error messages that looked like this:<br /><code>strip: symbols referenced by indirect symbol table entries that can't be stripped in: /private/tmp/netpbm/bin/#inst.36429# (for architecture i386)</code><br />It was caused by this line:<br /><code>&nbsp;/Users/adam/repos/netpbm-10.35.86/buildtools/install.sh -c -s -m 755 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;atktopbm /tmp/netpbm/bin</code><br />I thought that looked a little suspicious, so I tried removing the "-s" (for "stripprg"). &nbsp;I had to remove it in the buildtools/install.sh directory. &nbsp;Felt like a hack, but apparently worked. &nbsp;Except that now I get dyld errors:<br /><code code="code" pnmfile="pnmfile"></code><br />dyld: Library not loaded: /libnetpbm.10.dylib<br />&nbsp; Referenced from: /usr/local/netpbm/bin/pnmfile<br />&nbsp; Reason: image not found<br />Trace/BPT trap: 5</div><br />Solution:<br /><code>export DYLD_LIBRARY_PATH=/usr/local/netpbm/lib/</code><br />in ~/.bashrc<br /><br />UPDATE: Installing on 10.6.8 was trivial, ironically.</div></div>
