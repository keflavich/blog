---
layout: post
title: "Failure to compile 64 bit gtk on mac os"
date: 2009-07-05T16:52:00-07:00
categories:
 - computer
---

<div class='post'>
Attempted to install gtk+-2.17.2 on my mac.  Had to install:<br />glib-2.21.2<br />which would not let me compile with multiple architectures, and <br />pkgconfig-0.9.0, <br />which won't configure because:<br /><code><br />configure: configuring in glib-1.2.8<br />configure: running /bin/sh './configure' --prefix=/usr/local  CC= CFLAGS= LDFLAGS= --cache-file=/dev/null --srcdir=.<br />configure: warning: CC=: invalid host type<br />configure: warning: CFLAGS=: invalid host type<br />configure: error: can only configure for one host and one target at a time<br />configure: error: /bin/sh './configure' failed for glib-1.2.8<br /></code><br /><br />which is bs because I don't have any compiler flags set.<br /><br />So, gtk+ seems hopeless.<br /><br />UPDATE: 0.9.0 is not the latest version, 0.23.0 is.  Dumb version numbering.<br /><br /><br />GTK is absurd to install.  You need:<br />pkg-config<br />glib<br />cairo<br />  pixman<br />pango (MUST be installed AFTER cairo)<br /><a href="http://ftp.gnome.org/pub/gnome/sources/atk/">atk</a><br /><a href="ftp://ftp.remotesensing.org/pub/libtiff/">libtiff</a><br /><a href="http://www.ijg.org/">libjpg</a><br /><a href="http://www.openjpeg.org/index.php">jpeg2000</a> - but I just passed a flag to not do this because it didn't install right.  --without-libjasper<br /><a href="http://fontconfig.org/wiki/">fontconfig</a> I mean, really?  at this point it's just ridiculous....<br /><br />and finally, it died with this:<br />checking Pango flags... configure: error:<br />*** Pango not found. Pango built with Cairo support is required<br />*** to build GTK+. See http://www.pango.org for Pango information.<br /><br />which meant that I had to reinstall Pango because I had installed it before Cairo.<br /><br />I believe this is where the term <a href="http://en.wikipedia.org/wiki/Dependency_hell">dependency hell</a> comes from.<br /><br />Also, I don't think any of these are x86-64 compatible.<br /><br /><br />Then I'm STILL not done.<br /><br />PyGTK dies with an import error on dsextras, which a painful google search traces to pygobject.  pygobject makes and installs fine.... but then I find out it installed to /usr/local/lib/python2.6/site-packages/gtk-2.0/, which is obviously not on my python path since I installed a framework.  <br /><br />So:<br />./configure --prefix=/Library/Frameworks/Python.framework/Versions/2.6/<br />in both pygobject and pygtk.<br /><br />Oh, guess what?  Need pycairo too.  What happens there?  What you'd guess:<br />ld warning: in /Developer/SDKs/MacOSX10.5.sdk/usr/local/lib/libcairo.dylib, file is not of required architecture<br /><br />so when I configure pygtk:<br /><br />The following modules will be built:<br /><br />atk<br />pango<br /><br />The following modules will NOT be built:<br /><br />pangocairo<br />gtk<br />gtk.glade<br />gtk.unixprint<br /><br />Damn.  That blows.<br /><br />python-64 -c "import gtk"<br />ImportError: dlopen(/Library/Frameworks/Python.framework/Versions/2.6/lib/python2.6/site-packages/gtk-2.0/glib/_glib.so, 2): no suitable image found.  Did find:<br />        /Library/Frameworks/Python.framework/Versions/2.6/lib/python2.6/site-packages/gtk-2.0/glib/_glib.so: mach-o, but wrong architecture<br /><br />FAIL.</div>
